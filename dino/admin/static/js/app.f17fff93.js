(function(t){function e(e){for(var n,a,r=e[0],l=e[1],c=e[2],d=0,h=[];d<r.length;d++)a=r[d],i[a]&&h.push(i[a][0]),i[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=s[0]))}return t}var n={},i={app:0},o=[];function a(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=n,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0db3":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"switch"},[s("input",{ref:"input",attrs:{type:"checkbox",disabled:t.disabled},on:{click:t.switchValue}}),s("span",{staticClass:"slider"})])},i=[],o=(s("c5f6"),{model:{prop:"checked",event:"change"},props:{checked:{type:[Boolean,Number],default:!1},disabled:{type:Boolean,default:!1}},mounted:function(){this.$refs.input.checked=this.checked},computed:{isChecked:function(){return this.checked}},methods:{switchValue:function(){this.disabled||this.handleChange()},handleChange:function(){var t=this;this.$emit("change",!this.isChecked),this.$emit("switch",!this.isChecked),this.$nextTick(function(){t.$refs.input.checked=t.isChecked})}},watch:{isChecked:function(){this.$refs.input.checked=this.isChecked}}}),a=o,r=s("2877"),l=Object(r["a"])(a,n,i,!1,null,null,null);l.options.__file="ISwitch.vue";e["default"]=l.exports},"0ed9":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"collapse-item",class:{"is-active":t.isActive}},[s("header",{staticClass:"collapse-item__header",on:{click:t.handleHeaderClick}},[s("p",[t._v(t._s(t.title))]),t.hasChildren?s("icon",{attrs:{icon:"chevron-right",size:"small"}}):t._e()],1),s("transition",{on:{beforeEnter:t.beforeEnter,enter:t.enter,afterEnter:t.afterEnter,beforeLeave:t.beforeLeave,leave:t.leave,afterLeave:t.afterLeave}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],ref:"body",staticClass:"collapse-item__body"},[t._t("default")],2)])],1)},i=[],o=s("8afe"),a=(s("6762"),s("2fdb"),s("c5f6"),{props:{selected:Boolean,title:{type:String,required:!0},name:{type:[String,Number],default:function(){return this._uid}}},inject:["collapse"],computed:{isActive:function(){return this.collapse.activeItems.includes(this.name)},hasChildren:function(){return this.$slots.default&&0!==this.$slots.default.length}},mounted:function(){this.selected&&this.handleHeaderClick()},methods:{dispatch:function(t,e,s){var n,i=this.$parent||this.$root,a=i.$options.componentName;while(i&&(!a||a!==t))i=i.$parent,i&&(a=i.$options.componentName);i&&(n=i).$emit.apply(n,Object(o["a"])([e].concat(s)))},handleHeaderClick:function(){this.dispatch("Collapse","collapse-item-clicked",this),this.$emit("click")},beforeEnter:function(t){t.style.setProperty("height","0")},enter:function(t){t.style.setProperty("height","".concat(t.scrollHeight,"px"))},afterEnter:function(t){t.style.setProperty("height","")},beforeLeave:function(t){t.style.setProperty("height","".concat(t.scrollHeight,"px"))},leave:function(t){0!==t.scrollHeight&&t.style.setProperty("height","0")},afterLeave:function(t){t.style.setProperty("height","")}}}),r=a,l=s("2877"),c=Object(l["a"])(r,n,i,!1,null,null,null);c.options.__file="CollapseItem.vue";e["default"]=c.exports},"11d3":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"hero-header",class:{snap:t.isOverThreshold,"tall-header":t.isTallHeader}},[s("div",{staticClass:"header-content container"},[s("div",{staticClass:"header-content__logo-large",class:{hide:!t.isTallHeader},on:{click:t.logoClicked}},[s("p",{staticClass:"is-size-2"},[t._v("\n        "+t._s(t.$appConfig.title)+"\n        "),s("span",{staticClass:"is-size-5"},[t._v(t._s(t.$appConfig.environment))])])]),s("div",{staticClass:"header-content__logo",class:{transparent:t.isTallHeader&&!t.isOverThreshold},on:{click:t.logoClicked}},[t._v("\n      "+t._s(t.$appConfig.shortTitle)+"\n    ")]),s("div",{ref:"menu",staticClass:"header-content__menu"},t._l(t.menu.items,function(e){return s("div",{key:e.label,staticClass:"menu-item"},[s("div",{staticClass:"menu-item__label",class:{"has-children":e.children},on:{click:function(s){t.itemClicked(e)}}},[t._v("\n          "+t._s(e.label)+"\n        ")]),e.children?s("ul",{staticClass:"menu-item__children"},t._l(e.children,function(n){return s("li",{key:n.label,staticClass:"menu-item__child-item",on:{click:function(s){t.itemClicked(n,e)}}},[t._v(t._s(n.label))])})):t._e()])}))])])},i=[],o=(s("cadf"),s("551c"),s("097d"),{props:{menu:{type:Object,default:function(){return{items:[]}}},fixed:{type:Boolean,default:!1}},data:function(){return{scrollY:0,activeId:0,title:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_TITLE,shortTitle:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SHORT_TITLE}},computed:{isOverThreshold:function(){return this.scrollY>128},isHome:function(){return this.$route&&"home"===this.$route.name},isTallHeader:function(){return this.isHome&&!this.fixed}},mounted:function(){this.listeningOnScroll()},methods:{listeningOnScroll:function(){window.addEventListener("scroll",this.manipulateScrollY)},manipulateScrollY:function(){this.scrollY=window.scrollY},itemClicked:function(t,e){this.$emit("item-click",t,e)},logoClicked:function(){this.$router.push({name:"home"})}}}),a=o,r=s("2877"),l=Object(r["a"])(a,n,i,!1,null,null,null);l.options.__file="HeroHeader.vue";e["default"]=l.exports},"1f24":function(t,e,s){"use strict";s.r(e);s("c5f6");var n,i,o=s("2b0e"),a=s("2ef0"),r={props:{position:{type:String,default:"bottom",validator:function(t){return-1!==["bottom","top","right","left"].indexOf(t)}},content:{type:String,required:!0},delay:{type:Number,default:200},disabled:{type:Boolean,default:!1}},data:function(){return{showing:!1,expectedState:!1,fixedPosition:this.position,timeout:null}},beforeCreate:function(){var t=this;this.tooltipVM=new o["a"]({data:{node:""},render:function(){return this.node}}).$mount(),this.debounceHide=Object(a["debounce"])(function(){return t.hideTooltip()},200)},render:function(){var t=this,e=arguments[0];return this.tooltipVM&&(this.tooltipVM.node=e("transition",{attrs:{name:"fade"}},[e("div",{class:"tooltip ".concat(this.fixedPosition),ref:"tooltip",attrs:{id:"tooltip-".concat(this.tooltipVM._uid)},on:{mouseenter:function(){t.expectedState=!0},mouseleave:function(){t.onMouseLeave()}},directives:[{name:"show",value:!this.disabled&&this.showing}]},[this.$slots.content||this.content])])),this.$slots.default&&this.$slots.default.length?this.getFirstComponentChild(this.$slots.default):this.$slots.default},mounted:function(){1===this.$el.nodeType&&(this.$el.addEventListener("mouseenter",this.onMouseEnter),this.$el.addEventListener("mouseleave",this.onMouseLeave))},methods:{getFirstComponentChild:function(t){return t&&t.filter(function(t){return t&&t.tag})[0]},setPosition:function(){if(this.tooltipAppended){var t=this.$el.getBoundingClientRect(),e=this.tooltipVM.$el.getBoundingClientRect(),s=this[this.position](t,e);this.tooltipVM.$el.style.top="".concat(s.top,"px"),this.tooltipVM.$el.style.left="".concat(s.left,"px")}},top:function(t,e){var s={left:t.left+(t.width-e.width)/2,top:t.top-e.height-10};return s.top<0?(this.fixedPosition="bottom",this.bottom(t,e)):s.left<0?(this.fixedPosition="right",this.right(t,e)):s},bottom:function(t,e){var s={left:t.left+(t.width-e.width)/2,top:t.top+t.height+10};return s.left<0?(this.fixedPosition="right",this.right(t,e)):s},left:function(t,e){var s={left:t.left-e.width-10,top:t.top+(t.height-e.height)/2};return s.left<0?(this.fixedPosition="right",this.right(t,e)):s},right:function(t,e){var s={left:t.left+t.width+10,top:t.top+(t.height-e.height)/2};return s},mountTooltip:function(){document.body.append(this.tooltipVM.$el)},unmountTooltip:function(){document.body.removeChild(this.tooltipVM.$el)},onMouseEnter:function(){this.expectedState=!0,this.showTooltip()},onMouseLeave:function(){this.expectedState=!1,this.debounceHide()},showTooltip:function(){var t=this;this.expectedState&&(this.tooltipAppended||(this.mountTooltip(),this.tooltipAppended=!0),clearTimeout(this.timeoutHandle),this.timeout=setTimeout(function(){t.showing=!0,t.$nextTick(function(){t.setPosition()})},this.delay))},hideTooltip:function(){this.expectedState||(clearTimeout(this.timeout),this.showing=!1)}},destroyed:function(){var t=this.$el;t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave),this.tooltipAppended&&this.unmountTooltip()}},l=r,c=s("2877"),u=Object(c["a"])(l,n,i,!1,null,null,null);u.options.__file="Tooltip.vue";e["default"]=u.exports},"24aa":function(t,e,s){"use strict";s.r(e);var n,i,o={props:{columns:[Array],data:[Array]},inject:["table"],render:function(t){var e=this;return t("tbody",[this._l(this.data,function(s,n){return[t("tr",{key:n,class:"row-".concat(n),on:{click:function(t){e.handleRowClick(t,s)}}},[e._l(e.columns,function(i,o){return i?t("td",{class:"column-".concat(o),on:{click:function(t){e.handleColumnClick(t,s,i)}}},[i.renderCell.call(e._renderProxy,t,{row:s,column:i,$index:n,cellIndex:o})]):""})])]})])},methods:{handleRowClick:function(t,e){this.table.$emit("row-click",e,t)},handleColumnClick:function(t,e,s){t.stopPropagation(),s.click(e,s,t)}}},a=o,r=s("2877"),l=Object(r["a"])(a,n,i,!1,null,null,null);l.options.__file="TableBody.vue";e["default"]=l.exports},"3a5e":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-wrapper",style:{width:t.size,height:t.size}},[s("svg",{staticClass:"triangle-loading",attrs:{viewBox:"0 0 100 100"}},[s("path",{attrs:{d:"M 50,16 L 96,96","stroke-width":"8","fill-opacity":"0","stroke-dasharray":"100","stroke-linecap":"round","stroke-linejoin":"round"}}),s("path",{attrs:{id:t.bottomID,d:"M 96,96 L 4,96","stroke-width":"8","fill-opacity":"0","stroke-dasharray":"100","stroke-linecap":"round","stroke-linejoin":"round"}}),s("path",{attrs:{d:"M 4,96 L 50,16","stroke-width":"8","fill-opacity":"0","stroke-dasharray":"100","stroke-linecap":"round","stroke-linejoin":"round"}}),s("animate",{attrs:{attributeName:"stroke-dashoffset",dur:"1.5s",d:"fill",repeatCount:"indefinite",keyTimes:"0; 0.6; 0.6; 0.8;1",values:"100; 0; 190; 108; 108"}}),s("animate",{attrs:{"xlink:href":"#"+t.bottomID,attributeName:"stroke-dashoffset",dur:"1.5s",d:"fill",repeatCount:"indefinite",keyTimes:"0; 0.6; 0.6; 0.8;1",values:"100; 0; 190; 109; 109"}})])])},i=[];s("6b54");function o(){return Math.random().toString().substring(2)}var a={props:{size:{type:String,default:"2rem"}},data:function(){return{bottomID:"bottom-".concat(o())}}},r=a,l=s("2877"),c=Object(l["a"])(r,n,i,!1,null,null,null);c.options.__file="Loading.vue";e["default"]=c.exports},"4c60":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{class:{"has-fixed-aside":t.hasFixedAside}},[s("hero-header",{attrs:{menu:t.menu,fixed:t.hasFixedAside},on:{"item-click":t.tryNavigate}}),t.menu.items.length?s("side-nav",{attrs:{menu:t.menu,fixed:t.hasFixedAside},on:{"item-click":t.tryNavigate}}):t._e()],1)},i=[],o={items:[{id:1,label:"Chat",children:[{name:"home",label:"Channels"},{name:"user",label:"Users"},{name:"ban",label:"Banned Users"},{name:"blacklist",label:"Blocked Words"},{name:"history",label:"History"},{name:"spam",label:"Spam"}]},{id:2,label:"Notification",children:[{name:"broadcast",label:"Broadcast"}]}]},a={data:function(){return{menu:o,hasFixedAside:!1}},methods:{tryNavigate:function(t,e){t.link?window.location.href=t.link:(this.activeId=e?e.id:t.id,this.$router.push({name:t.name,params:t.params}))}}},r=a,l=s("2877"),c=Object(l["a"])(r,n,i,!1,null,null,null);c.options.__file="Navigator.vue";e["default"]=c.exports},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("global-loading"),s("navigator"),s("main",{staticClass:"container",class:{home:t.isHome}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("router-view")],1)],1),s("i-footer")],1)},o=[],a=s("63e0");s("ac6a"),s("6762"),s("2fdb"),s("6b54"),s("28a5"),s("a481");function r(t){return Array.isArray(t)?t[0]:null}function l(t){var e=r(t.split(","));return e&&e.includes("=")?e.split("=")[1]:null}function c(t){var e=[];return t.forEach(function(t){var s=l(t.name);s&&e.push({name:s,children:c(t.children),icon:t.description.iconPath,image:t.description.imgPath,url:t.urlStr})}),e}function u(t){return new Promise(function(e,s){var n=document.createElement("script");n.src=t,n.async=!0,n.defer=!0,n.addEventListener("load",e);try{document.body.appendChild(n)}catch(t){s(t)}})}var d={computed:{isHome:function(){return"home"===this.$route.name}},mounted:function(){this.installFloatingMenu()},methods:{fetchServices:function(){return this.$store.dispatch(a["i"])},installFloatingMenu:function(){var t=this;if(this.$appConfig.rhum){var e=function(){t.$dialog.show("Fail to install floating menu.")};u(this.$appConfig.rhum).then(function(){window.Rhum&&t.fetchServices().then(function(e){window.Rhum.install(t.$appConfig.serviceName,e)}).catch(e)}).catch(e)}}}},h=d,m=s("2877"),p=Object(m["a"])(h,i,o,!1,null,null,null);p.options.__file="App.vue";var f=p.exports,v=s("2f62"),g=s("a322"),b=s("bc3a"),w=s.n(b),C=s("c93e"),_={};function y(t){return"string"===typeof t?"True"===t:"boolean"===typeof t&&t}document.querySelectorAll("meta").forEach(function(t){t.name&&(_[t.name]=t.content)}),_.base="/".concat(_.base,"/").replace(/\/+/g,"/");var O,k=y(_.floatingmenu)&&"/assets/js/rhum.js",$=Object(C["a"])({title:"Dino Admin",shortTitle:"Dino",serviceName:"ChatService",servicesBaseAPI:"/sso-oauth/rest/v1/oauth",rhum:k},_),M={services:[],user:""},P={services:function(t){return t.services}},x=Object(g["a"])({},a["i"],function(t){var e=t.state;return w.a.get("".concat($.servicesBaseAPI,"/auth/services")).then(function(t){var s=t.data;return e.services=c(s.scopes),e.user=s.username,e.services})}),S={state:M,getters:P,actions:x},N="UPDATE_GLOBAL_LOADING_STATUS",E={isGlobalLoadingShowing:!1,isLoadingMuskShowing:!1},R={isGlobalLoadingShowing:function(t){return t.isGlobalLoadingShowing},isLoadingMuskShowing:function(t){return t.isLoadingMuskShowing}},D=Object(g["a"])({},N,function(t,e){var s=e.status,n=e.withMusk;t.isGlobalLoadingShowing=s,t.isLoadingMuskShowing=n||!1}),A=(O={},Object(g["a"])(O,a["Q"],function(t,e){var s=t.commit;s(N,{status:!0,withMusk:e})}),Object(g["a"])(O,a["H"],function(t){var e=t.commit;e(N,{status:!1})}),O),I={state:E,getters:R,mutations:D,actions:A},T=w.a.create({baseURL:"".concat($.base,"/api/").replace("//","/"),headers:{"Content-type":"Application/json"}});T.interceptors.response.use(function(t){return t.status>=200&&t.status<300?t.data.status_code>=200&&t.data.status_code<300?t.data.data:Promise.reject(t.data.message):Promise.reject(t)},function(t){return Promise.reject(t)});var U,j,L,B,F,G=T,H=(U={},Object(g["a"])(U,a["x"],function(){return G.get("/channels")}),Object(g["a"])(U,a["a"],function(t,e){return G.post("/channels",e)}),Object(g["a"])(U,a["z"],function(t,e){return G.get("/channels/".concat(e))}),Object(g["a"])(U,a["m"],function(t,e){return G.delete("/channels/".concat(e))}),Object(g["a"])(U,a["Y"],function(t,e){var s=e.channel,n=e.name;return G.put("/channels/".concat(s,"/name"),{name:n})}),Object(g["a"])(U,a["Z"],function(t,e){var s=e.channel,n=e.order;return G.put("/channels/".concat(s,"/order"),{order:n})}),Object(g["a"])(U,a["c"],function(t,e){var s=e.channel,n=e.admin;return G.post("/channels/".concat(s,"/admins"),{admin:n})}),Object(g["a"])(U,a["o"],function(t,e){var s=e.channel,n=e.admin;return G.delete("/channels/".concat(s,"/admins/").concat(n))}),Object(g["a"])(U,a["d"],function(t,e){var s=e.channel,n=e.owner;return G.post("/channels/".concat(s,"/owners"),{owner:n})}),Object(g["a"])(U,a["p"],function(t,e){var s=e.channel,n=e.owner;return G.delete("/channels/".concat(s,"/owners/").concat(n))}),Object(g["a"])(U,a["n"],function(t,e){var s=e.channel,n=e.action,i=e.type;return G.delete("/channels/".concat(s,"/acls/").concat(n,"/").concat(i))}),Object(g["a"])(U,a["b"],function(t,e){var s=e.channel,n=e.action,i=e.type,o=e.value;return G.post("/channels/".concat(s,"/acls"),{action:n,type:i,value:o})}),Object(g["a"])(U,a["X"],function(t,e){var s=e.channel,n=e.action,i=e.type,o=e.value;return G.put("/channels/".concat(s,"/acls/").concat(n,"/").concat(i),{value:o})}),Object(g["a"])(U,a["y"],function(t,e){return G.get("/acls/channel/actions/".concat(e,"/types"))}),U),z={actions:H},V=(j={},Object(g["a"])(j,a["B"],function(t,e){return G.get("/channels/".concat(e,"/rooms"))}),Object(g["a"])(j,a["e"],function(t,e){var s=e.channel,n=e.room;return G.post("/channels/".concat(s,"/rooms"),n)}),Object(g["a"])(j,a["C"],function(t,e){var s=e.channel,n=e.room;return G.get("/channels/".concat(s,"/rooms/").concat(n))}),Object(g["a"])(j,a["bb"],function(t,e){var s=e.channel,n=e.room,i=e.name;return G.put("/channels/".concat(s,"/rooms/").concat(n,"/name"),{name:i})}),Object(g["a"])(j,a["cb"],function(t,e){var s=e.room,n=e.order;return G.put("/rooms/".concat(s,"/order"),{order:n})}),Object(g["a"])(j,a["q"],function(t,e){var s=e.channel,n=e.room;return G.delete("/channels/".concat(s,"/rooms/").concat(n))}),Object(g["a"])(j,a["h"],function(t,e){var s=e.room,n=e.owner;return G.post("/rooms/".concat(s,"/owners"),{owner:n})}),Object(g["a"])(j,a["t"],function(t,e){var s=e.room,n=e.owner;return G.delete("/rooms/".concat(s,"/owners/").concat(n))}),Object(g["a"])(j,a["g"],function(t,e){var s=e.room,n=e.moderator;return G.post("/rooms/".concat(s,"/moderators"),{moderator:n})}),Object(g["a"])(j,a["s"],function(t,e){var s=e.room,n=e.moderator;return G.delete("/rooms/".concat(s,"/moderators/").concat(n))}),Object(g["a"])(j,a["r"],function(t,e){var s=e.room,n=e.action,i=e.type;return G.delete("/rooms/".concat(s,"/acls/").concat(n,"/").concat(i))}),Object(g["a"])(j,a["f"],function(t,e){var s=e.room,n=e.action,i=e.type,o=e.value;return G.post("/rooms/".concat(s,"/acls"),{action:n,type:i,value:o})}),Object(g["a"])(j,a["ab"],function(t,e){var s=e.channel,n=e.room,i=e.action,o=e.type,a=e.value;return G.put("/channels/".concat(s,"/rooms/").concat(n,"/acls/").concat(i,"/").concat(o),{value:a})}),Object(g["a"])(j,a["S"],function(t,e){var s=e.room,n=e.status;return n?G.put("/rooms/".concat(s,"/set-default")):G.put("/rooms/".concat(s,"/unset-default"))}),Object(g["a"])(j,a["V"],function(t,e){var s=e.room,n=e.status;return n?G.put("/rooms/".concat(s,"/set-ephemeral")):G.put("/rooms/".concat(s,"/unset-ephemeral"))}),Object(g["a"])(j,a["R"],function(t,e){var s=e.room,n=e.status;return n?G.put("/rooms/".concat(s,"/set-admin")):G.put("/rooms/".concat(s,"/unset-admin"))}),j),q={actions:V},Y=(L={},Object(g["a"])(L,a["F"],function(t,e){return G.get("/rooms/".concat(e,"/users"))}),Object(g["a"])(L,a["I"],function(t,e){var s=e.room,n=e.user;return G.post("/rooms/".concat(s,"/users/").concat(n,"/kick"))}),Object(g["a"])(L,a["j"],function(t,e){return G.post("/bans",e)}),Object(g["a"])(L,a["E"],function(){return G.get("/super-users")}),Object(g["a"])(L,a["L"],function(t,e){return G.get("/users/search/".concat(e))}),Object(g["a"])(L,a["P"],function(t,e){return G.post("/super-users/".concat(e))}),Object(g["a"])(L,a["W"],function(t,e){return G.delete("/super-users/".concat(e))}),Object(g["a"])(L,a["l"],function(t,e){return G.post("/super-users",e)}),Object(g["a"])(L,a["v"],function(){return G.get("/bans")}),Object(g["a"])(L,a["J"],function(t,e){var s=e.user,n=e.target,i=e.targetUUID;return G.post("/bans/".concat(s,"/delete"),{target:n,target_uuid:i})}),L),W={actions:Y},K=(B={},Object(g["a"])(B,a["w"],function(){return G.get("/blacklist")}),Object(g["a"])(B,a["k"],function(t,e){return G.post("/blacklist",{words:e})}),Object(g["a"])(B,a["K"],function(t,e){return G.delete("/blacklist/".concat(e))}),Object(g["a"])(B,a["M"],function(t,e){return G.post("/history",e)}),Object(g["a"])(B,a["T"],function(t,e){var s=e.message,n=e.status;return n?G.delete("/history/".concat(s)):G.put("/history/".concat(s,"/undelete"))}),Object(g["a"])(B,a["O"],function(t,e){return G.post("/broadcast",e)}),B),J={actions:K},Q=(s("456d"),{channel:{},room:{}}),X={channelActions:function(t){return Object.keys(t.channel)},channelTypes:function(t){return t.channel},roomActions:function(t){return Object.keys(t.room)},roomTypes:function(t){return t.room}},Z=Object(g["a"])({},a["u"],function(t){var e=t.state;G.get("/acls").then(function(t){n["a"].set(e,"channel",t.channel),n["a"].set(e,"room",t.room)})}),tt={state:Q,actions:Z,getters:X},et={actions:(F={},Object(g["a"])(F,a["A"],function(){return G.get("/spam")}),Object(g["a"])(F,a["N"],function(t,e){return G.post("/spam/search",e)}),Object(g["a"])(F,a["G"],function(t,e){return G.get("/spam/".concat(e))}),Object(g["a"])(F,a["U"],function(t,e){var s=e.id,n=e.status;return n?G.post("/spam/".concat(s,"/correct")):G.post("/spam/".concat(s,"/incorrect"))}),Object(g["a"])(F,a["D"],function(){return G.get("/spam/settings")}),Object(g["a"])(F,a["db"],function(t,e){return G.post("/spam/settings",e)}),F)};n["a"].use(v["a"]);var st=new v["a"].Store({modules:{service:S,loading:I,channel:z,room:q,user:W,message:J,permission:tt,spam:et}}),nt=s("8c4f"),it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"Channels",data:t.channels}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v(" Channels\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newChannel.open=!0}}},[s("icon",{attrs:{icon:"plus"}})],1)]),s("table-column",{attrs:{display:"Sort Order",field:"sort"}}),s("table-column",{attrs:{display:"name",field:"name"}}),s("table-column",{attrs:{display:"UUID",field:"uuid"}}),s("table-column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button is-info",on:{click:function(s){t.goToRooms(e.row)}}},[t._v("Rooms")]),s("a",{staticClass:"button",on:{click:function(s){t.editChannel(e.row)}}},[t._v("Edit")])])]}}])})],1),s("modal",{attrs:{active:t.newChannel.open,duration:300},on:{close:t.resetNewChannel}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.saveChannel(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Channel Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newChannel.name,expression:"newChannel.name"}],staticClass:"input",class:{"is-danger":t.channelFormNameError},attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newChannel.name},on:{input:function(e){e.target.composing||t.$set(t.newChannel,"name",e.target.value)}}})]),t.channelFormNameError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.channelFormNameError))]):t._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Owner UUID")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newChannel.owner,expression:"newChannel.owner"}],staticClass:"input",class:{"is-danger":t.channelFormOwnerError},attrs:{type:"text",placeholder:"Owner"},domProps:{value:t.newChannel.owner},on:{input:function(e){e.target.composing||t.$set(t.newChannel,"owner",e.target.value)}}})]),t.channelFormOwnerError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.channelFormOwnerError))]):t._e()]),s("div",{staticClass:"field is-grouped"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[t._v("Submit")])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-link",on:{click:function(e){t.newChannel.open=!1}}},[t._v("Cancel")])])])])])]),s("modal",{attrs:{active:t.modalOpen,"is-card":!0,duration:300},on:{close:t.onModalClose}},[t.selectedChannel?[s("header",{staticClass:"modal-card-head"},[s("div",{ref:"channelName",staticClass:"modal-card-title",on:{click:t.editChannelName}},[s("p",{staticClass:"name"},[t._v("\n            "+t._s(t.selectedChannel.name)+"\n            "),t.loading.name?s("icon",{staticClass:"keep rotate",attrs:{icon:"refresh"}}):s("icon",{attrs:{icon:"edit"}})],1),s("span",{staticClass:"label uuid"},[t._v(t._s(t.selectedChannel.uuid))])]),s("div",{ref:"nameField",staticClass:"name-field field has-addons hide"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedChannel.name,expression:"selectedChannel.name"}],ref:"nameInput",staticClass:"input",attrs:{type:"text",name:"name"},domProps:{value:t.selectedChannel.name},on:{input:function(e){e.target.composing||t.$set(t.selectedChannel,"name",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.saveChannelName}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.toggleNameFieldVisibility}},[s("icon",{attrs:{icon:"close"}})],1)])]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),s("section",{staticClass:"modal-card-body"},[s("span",{staticClass:"label"},[t._v("Order: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedChannel.sort,expression:"selectedChannel.sort"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.selectedChannel.sort},on:{input:function(e){e.target.composing||t.$set(t.selectedChannel,"sort",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v("Owners: ")]),s("div",{staticClass:"tags"},[t._l(t.channelOwners,function(e){return s("tooltip",{key:e.id,attrs:{content:"uuid: "+e.uuid+", name: "+e.name,position:"top"}},[s("div",{staticClass:"tag is-medium"},[t._v("\n              "+t._s(e.name)+"\n              "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteOwner(t.selectedChannel.uuid,e.uuid)}}})])])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newOwner.status,expression:"!newOwner.status"}],staticClass:"adding tag is-medium",on:{click:t.showOwnerInput}},[s("icon",{attrs:{icon:"plus"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newOwner.status,expression:"newOwner.status"}],staticClass:"owner-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newOwner.uuid,expression:"newOwner.uuid"}],ref:"ownerInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newOwner.uuid},on:{input:function(e){e.target.composing||t.$set(t.newOwner,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addOwner}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newOwner.status=!1}}},[s("icon",{attrs:{icon:"close"}})],1)])])],2),s("span",{staticClass:"label"},[t._v("Admins: ")]),s("div",{staticClass:"tags"},[t._l(t.channelAdmins,function(e){return s("tooltip",{key:e.id,attrs:{content:"uuid: "+e.uuid+", name: "+e.name,position:"top"}},[s("div",{staticClass:"tag is-medium"},[t._v("\n              "+t._s(e.name)+"\n              "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteAdmin(t.selectedChannel.uuid,e.uuid)}}})])])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newAdmin.status,expression:"!newAdmin.status"}],staticClass:"adding tag is-medium",on:{click:t.showAdminInput}},[s("icon",{attrs:{icon:"plus"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newAdmin.status,expression:"newAdmin.status"}],staticClass:"admin-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newAdmin.uuid,expression:"newAdmin.uuid"}],ref:"adminInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newAdmin.uuid},on:{input:function(e){e.target.composing||t.$set(t.newAdmin,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addAdmin}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newAdmin.status=!1}}},[s("icon",{attrs:{icon:"close"}})],1)])])],2),s("span",{staticClass:"label"},[t._v("Permissions: ")]),s("div",{staticClass:"datatable-content"},[s("table",{staticClass:"table is-fullwidth"},[s("thead",[s("tr",[s("td",[t._v("Action")]),s("td",[t._v("Type")]),s("td",[t._v("Value")]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-default",on:{click:t.showPermissionInput}},[s("icon",{attrs:{icon:"plus"}})],1)])])]),s("tbody",[t._l(t.channelPermissions,function(e,n){return s("tr",{key:n},[s("td",[t._v(t._s(e.action))]),s("td",[t._v(t._s(e.type))]),s("td",[t._v(t._s(e.value))]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-danger",on:{click:function(s){t.deletePermission(t.selectedChannel.uuid,e,n)}}},[s("icon",{attrs:{icon:"trash-o"}})],1),s("button",{staticClass:"button is-info",on:{click:function(s){t.editPermission(n,e)}}},[s("icon",{attrs:{icon:"edit"}})],1)])])}),s("tr",{directives:[{name:"show",rawName:"v-show",value:t.newPermission.status,expression:"newPermission.status"}]},[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"actionSelector",attrs:{disabled:!t.newPermission.isNew},on:{change:function(e){t.selectAction(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Action")]),t._l(t.actions,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"typeSelector",attrs:{disabled:!t.newPermission.isNew||!t.newPermission.action},on:{change:function(e){t.selectType(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Type")]),t._l(t.selectedActionTypes,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPermission.value,expression:"newPermission.value"}],ref:"permissionInput",staticClass:"input",attrs:{type:"text",placeholder:"value"},domProps:{value:t.newPermission.value},on:{input:function(e){e.target.composing||t.$set(t.newPermission,"value",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.savePermission}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.resetNewPermission}},[s("icon",{attrs:{icon:"close"}})],1)])])])])],2)])])]),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-primary",on:{click:t.updateOrder}},[t._v("Save")]),s("button",{staticClass:"button",on:{click:t.destroyChannel}},[t._v("Destroy")])])]:t._e()],2)],1)},ot=[],at=(s("f751"),s("8615"),s("20d6"),s("7514"),s("55dd"),s("4d4a")),rt=s("89ce"),lt={data:function(){return{destroying:null}},created:function(){this.resetDestroying()},methods:{resetDestroying:function(){this.destroying={item:"",id:null}},doubleCheckDestroy:function(t,e){return this.destroying&&this.destroying.id===e&&this.destroying.item===t?(this.resetDestroying(),!0):(this.destroying.id=e,this.destroying.item=t,this.$dialog.show("Click again to destroy!"),!1)}}},ct={mixins:[rt["a"],lt],data:function(){return{channels:[],selectedChannel:null,channelOwners:[],channelAdmins:[],channelPermissions:[],modalOpen:!1,loading:{name:!1,destroying:!1},newChannel:null,newOwner:null,newAdmin:null,newPermission:null}},computed:{actions:function(){return this.$store.getters.channelActions},types:function(){return this.$store.getters.channelTypes},channelFormNameError:function(){return this.newChannel.errors&&this.newChannel.errors.name},channelFormOwnerError:function(){return this.newChannel.errors&&this.newChannel.errors.owner},selectedActionTypes:function(){return this.types[this.newPermission.action]||[]}},created:function(){this.resetNewChannel(),this.fetchChannels()},mounted:function(){this.resetModal()},methods:{fetchChannels:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["x"]).then(function(e){t.channels=e,t.hideGlobalLoading()}).catch(function(e){t.$dialog.show(e,3e3),t.hideGlobalLoading()})},saveChannel:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["a"],this.newChannel).then(function(e){t.channels.push(e),t.$dialog.show("Create channel successfully."),t.resetNewChannel(),t.hideGlobalLoading()}).catch(function(e){t.newChannel.errors=e,t.hideGlobalLoading()})},updateOrder:function(){var t=this;this.$store.dispatch(a["Z"],{channel:this.selectedChannel.uuid,order:this.selectedChannel.sort}).then(function(){var e=t.channels.find(function(e){return e.uuid===t.selectedChannel.uuid});e.sort=t.selectedChannel.sort,t.$dialog.show("Success.")}).catch(function(){t.$dialog.show("Update channel unsuccessfully.")})},resetNewChannel:function(){this.$set(this,"newChannel",{open:!1,name:"",owner:"",errors:{}})},fetchChannelInfo:function(t){var e=this;this.loading.info=!0,this.$store.dispatch(a["z"],t).then(function(t){e.channelOwners=t.owners,e.channelPermissions=t.acls,e.channelAdmins=t.admins,e.loading.info=!1})},editChannel:function(t){this.selectedChannel=Object(at["cloneDeep"])(this.channels.find(function(e){return e.uuid===t.uuid})),this.fetchChannelInfo(this.selectedChannel.uuid),this.modalOpen=!0},goToRooms:function(t){this.$router.push({name:"room",params:{channel:t.uuid}})},resetNewOwner:function(){this.newOwner={status:!1,uuid:""}},resetNewAdmin:function(){this.newAdmin={status:!1,uuid:""}},resetNewPermission:function(){this.newPermission={status:!1,isNew:!0,action:"",type:"",value:""}},resetModal:function(){this.resetDestroying(),this.resetNewOwner(),this.resetNewAdmin(),this.resetNewPermission()},onModalClose:function(){this.selectedChannel=null,this.closeModal(),this.resetModal()},closeModal:function(){this.modalOpen=!1},toggleNameFieldVisibility:function(){this.$refs.channelName.classList.toggle("hide"),this.$refs.nameField.classList.toggle("hide")},editChannelName:function(){this.toggleNameFieldVisibility(),this.$refs.nameInput.focus()},saveChannelName:function(){var t=this;this.toggleNameFieldVisibility();var e=this.channels.find(function(e){return e.uuid===t.selectedChannel.uuid});e.name!==this.selectedChannel.name&&(this.loading.name=!0,this.$store.dispatch(a["Y"],{channel:this.selectedChannel.uuid,name:this.selectedChannel.name}).then(function(){e.name=t.selectedChannel.name,t.loading.name=!1,t.$dialog.show("Update channel name successfully.")}))},destroyChannel:function(){var t=this;this.doubleCheckDestroy("channel",this.selectedChannel.uuid)&&(this.showGlobalLoading(),this.$store.dispatch(a["m"],this.selectedChannel.uuid).then(function(){t.$dialog.show("Delete channel successfully."),t.channels.splice(t.channels.findIndex(function(e){return e.uuid===t.selectedChannel.uuid}),1),t.closeModal(),t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to delete channel.")}))},deleteOwner:function(t,e){var s=this;this.doubleCheckDestroy("owner",t+e)&&this.$store.dispatch(a["p"],{channel:t,owner:e}).then(function(){s.channelOwners.splice(s.channelOwners.findIndex(function(t){return t.uuid===e}),1),s.$dialog.show("Delete owner successfully.")})},showOwnerInput:function(){var t=this;this.newOwner.status=!0,this.$nextTick(function(){t.$refs.ownerInput.scrollIntoView(),t.$refs.ownerInput.focus()})},addOwner:function(){var t=this;this.channelOwners.find(function(e){return t.newOwner.uuid===e.uuid})?this.$dialog.show("<p>This user has already been owner.</p> <p>Please check and submit again.</p>",5e3):this.$store.dispatch(a["d"],{channel:this.selectedChannel.uuid,owner:this.newOwner.uuid}).then(function(e){t.channelOwners.push(e),t.resetNewOwner()}).catch(function(e){t.$dialog.show(e)})},deleteAdmin:function(t,e){var s=this;this.doubleCheckDestroy("admin",t+e)&&this.$store.dispatch(a["o"],{channel:t,admin:e}).then(function(){s.channelAdmins.splice(s.channelOwners.findIndex(function(t){return t.uuid===e}),1),s.$dialog.show("Delete admin successfully.")})},showAdminInput:function(){var t=this;this.newAdmin.status=!0,this.$nextTick(function(){t.$refs.adminInput.scrollIntoView(),t.$refs.adminInput.focus()})},addAdmin:function(){var t=this;this.channelAdmins.find(function(e){return t.newAdmin.uuid===e.uuid})?this.$dialog.show("<p>This user has already been admin.</p> <p>Please check and submit again.</p>",5e3):this.$store.dispatch(a["c"],{channel:this.selectedChannel.uuid,admin:this.newAdmin.uuid}).then(function(e){t.channelAdmins.push(e),t.resetNewAdmin()}).catch(function(e){t.$dialog.show(e)})},deletePermission:function(t,e,s){var n=this;this.doubleCheckDestroy("permission",t+e.action+e.type)&&this.$store.dispatch(a["n"],{channel:t,action:e.action,type:e.type}).then(function(){n.$dialog.show("Delete channel permission successfully."),n.channelPermissions.splice(s,1)})},showPermissionInput:function(){var t=this;this.newPermission.status=!0,this.$nextTick(function(){t.$refs.permissionInput.scrollIntoView(),t.$refs.permissionInput.focus()})},savePermission:function(){this.newPermission.isNew?this.addPermission(this.selectedChannel.uuid,this.newPermission):this.updatePermission(this.selectedChannel.uuid,this.newPermission)},selectAction:function(t){this.newPermission.action=t.target.value,this.newPermission.type="",this.$refs.typeSelector.selectedIndex=0},selectType:function(t){this.newPermission.type=t.target.value},addPermission:function(t,e){var s=this;this.channelPermissions.find(function(t){return t.action===e.action&&t.type===e.type})?this.$dialog.show("Permission with action: '".concat(e.action,"', type: '").concat(e.type,"' exists."),5e3):this.$store.dispatch(a["b"],Object(C["a"])({channel:t},e)).then(function(){s.channelPermissions.push(e),s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},updatePermission:function(t,e){var s=this;this.$store.dispatch(a["X"],Object(C["a"])({channel:t},e)).then(function(){s.channelPermissions[e.index].value=e.value,s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},editPermission:function(t,e){this.newPermission=Object.assign({},this.newPermission,e,{status:!0,isNew:!1,index:t}),this.showPermissionInput()}}},ut=ct,dt=Object(m["a"])(ut,it,ot,!1,null,null,null);dt.options.__file="Channel.vue";var ht=dt.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"Rooms",data:t.rooms}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Rooms\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newRoom.open=!0}}},[s("icon",{attrs:{icon:"plus"}})],1)]),s("table-column",{attrs:{display:"Sort Order",field:"sort",sortable:""}}),s("table-column",{attrs:{display:"Name",field:"name",sortable:""}}),s("table-column",{attrs:{display:"UUID",field:"uuid"}}),s("table-column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button is-info",on:{click:function(s){t.goToUsers(e.row)}}},[t._v("Users")]),s("a",{staticClass:"button",on:{click:function(s){t.editRoom(e.row)}}},[t._v("Edit")])])]}}])})],1),s("modal",{attrs:{active:t.newRoom.open,duration:300},on:{close:t.resetNewRoom}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.saveRoom(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Room Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newRoom.name,expression:"newRoom.name"}],staticClass:"input",class:{"is-danger":t.roomFormNameError},attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newRoom.name},on:{input:function(e){e.target.composing||t.$set(t.newRoom,"name",e.target.value)}}})]),t.roomFormNameError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.roomFormNameError))]):t._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Owner UUID")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newRoom.owner,expression:"newRoom.owner"}],staticClass:"input",class:{"is-danger":t.roomFormOwnerError},attrs:{type:"text",placeholder:"Owner"},domProps:{value:t.newRoom.owner},on:{input:function(e){e.target.composing||t.$set(t.newRoom,"owner",e.target.value)}}})]),t.roomFormOwnerError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.roomFormOwnerError))]):t._e()]),s("div",{staticClass:"field is-grouped"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[t._v("Submit")])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-link",on:{click:function(e){t.newRoom.open=!1}}},[t._v("Cancel")])])])])])]),s("modal",{attrs:{active:t.modalOpen,"is-card":!0,duration:300},on:{close:t.onModalClose}},[t.selectedRoom?[s("header",{staticClass:"modal-card-head"},[s("div",{ref:"roomName",staticClass:"modal-card-title",on:{click:t.editRoomName}},[s("p",{staticClass:"name"},[t._v("\n            "+t._s(t.selectedRoom.name)+"\n            "),t.loading.name?s("icon",{staticClass:"keep rotate",attrs:{icon:"refresh"}}):s("icon",{attrs:{icon:"edit"}})],1),s("span",{staticClass:"label uuid"},[t._v(t._s(t.selectedRoom.uuid))])]),s("div",{ref:"nameField",staticClass:"name-field hide field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedRoom.name,expression:"selectedRoom.name"}],ref:"nameInput",staticClass:"input",attrs:{type:"text",name:"name"},domProps:{value:t.selectedRoom.name},on:{input:function(e){e.target.composing||t.$set(t.selectedRoom,"name",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.saveRoomName}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.toggleNameFieldVisibility}},[s("icon",{attrs:{icon:"close"}})],1)])]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),s("section",{staticClass:"modal-card-body"},[s("span",{staticClass:"label"},[t._v("Order: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedRoom.sort,expression:"selectedRoom.sort"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.selectedRoom.sort},on:{input:function(e){e.target.composing||t.$set(t.selectedRoom,"sort",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v(" Default\n          "),s("tooltip",{attrs:{content:"Auto-join",position:"right"}},[s("icon",{attrs:{icon:"question-circle-o"}})],1),t._v(":\n        ")],1),s("i-switch",{on:{switch:t.toggleDefaultRoom},model:{value:t.selectedRoom.is_default,callback:function(e){t.$set(t.selectedRoom,"is_default",e)},expression:"selectedRoom.is_default"}}),s("span",{staticClass:"label"},[t._v("Temporary\n          "),s("tooltip",{attrs:{content:"Deleted when owner leaves.",position:"right"}},[s("icon",{attrs:{icon:"question-circle-o"}})],1),t._v(":\n        ")],1),s("i-switch",{on:{switch:t.toggleTemporaryRoom},model:{value:t.selectedRoom.is_ephemeral,callback:function(e){t.$set(t.selectedRoom,"is_ephemeral",e)},expression:"selectedRoom.is_ephemeral"}}),s("span",{staticClass:"label"},[t._v("Admin\n          "),s("tooltip",{attrs:{content:"Request admin events sent here.",position:"right"}},[s("icon",{attrs:{icon:"question-circle-o"}})],1),t._v(":\n        ")],1),s("i-switch",{on:{switch:t.toggleAdminRoom},model:{value:t.selectedRoom.is_admin,callback:function(e){t.$set(t.selectedRoom,"is_admin",e)},expression:"selectedRoom.is_admin"}}),s("span",{staticClass:"label"},[t._v("Owners: ")]),s("div",{staticClass:"tags"},[t._l(t.roomOwners,function(e){return s("tooltip",{key:e.id,attrs:{content:"id: "+e.uuid+", name: "+e.name,position:"top"}},[s("div",{staticClass:"tag is-medium"},[t._v("\n              "+t._s(e.name)+"\n              "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteOwner(t.selectedRoom.uuid,e.uuid)}}})])])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newOwner.status,expression:"!newOwner.status"}],staticClass:"adding tag is-medium",on:{click:t.showOwnerInput}},[s("icon",{attrs:{icon:"plus"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newOwner.status,expression:"newOwner.status"}],staticClass:"owner-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newOwner.uuid,expression:"newOwner.uuid"}],ref:"ownerInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newOwner.uuid},on:{input:function(e){e.target.composing||t.$set(t.newOwner,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addOwner}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newOwner.status=!1}}},[s("icon",{attrs:{icon:"close"}})],1)])])],2),s("span",{staticClass:"label"},[t._v("Moderator: ")]),s("div",{staticClass:"tags"},[t._l(t.roomModerators,function(e){return s("tooltip",{key:e.id,staticClass:"tag is-medium",attrs:{content:"id: "+e.uuid+", name: "+e.name,position:"top"}},[s("div",{staticClass:"tag is-medium"},[t._v("\n              "+t._s(e.name)+"\n              "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteModerator(t.selectedRoom.uuid,e.uuid)}}})])])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newModerator.status,expression:"!newModerator.status"}],staticClass:"adding tag is-medium",on:{click:t.showModeratorInput}},[s("icon",{attrs:{icon:"plus"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newModerator.status,expression:"newModerator.status"}],staticClass:"moderator-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newModerator.uuid,expression:"newModerator.uuid"}],ref:"moderatorInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newModerator.uuid},on:{input:function(e){e.target.composing||t.$set(t.newModerator,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addModerator}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newModerator.status=!1}}},[s("icon",{attrs:{icon:"close"}})],1)])])],2),s("span",{staticClass:"label"},[t._v("Permissions: ")]),s("div",{staticClass:"datatable-content"},[s("table",{staticClass:"table is-fullwidth"},[s("thead",[s("tr",[s("td",[t._v("Action")]),s("td",[t._v("Type")]),s("td",[t._v("Value")]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-default",on:{click:t.showPermissionInput}},[s("icon",{attrs:{icon:"plus"}})],1)])])]),s("tbody",[t._l(t.roomPermissions,function(e,n){return s("tr",{key:n},[s("td",[t._v(t._s(e.action))]),s("td",[t._v(t._s(e.type))]),s("td",[t._v(t._s(e.value))]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-danger",on:{click:function(s){t.deletePermission(t.selectedRoom.uuid,e,n)}}},[s("icon",{attrs:{icon:"trash-o"}})],1),s("button",{staticClass:"button is-info",on:{click:function(s){t.editPermission(n,e)}}},[s("icon",{attrs:{icon:"edit"}})],1)])])}),s("tr",{directives:[{name:"show",rawName:"v-show",value:t.newPermission.status,expression:"newPermission.status"}]},[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"actionSelector",attrs:{disabled:!t.newPermission.isNew},on:{change:function(e){t.selectAction(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Action")]),t._l(t.actions,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"typeSelector",attrs:{disabled:!t.newPermission.isNew||!t.newPermission.action},on:{change:function(e){t.selectType(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Type")]),t._l(t.selectedActionTypes,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPermission.value,expression:"newPermission.value"}],ref:"permissionInput",staticClass:"input",attrs:{type:"text",placeholder:"value"},domProps:{value:t.newPermission.value},on:{input:function(e){e.target.composing||t.$set(t.newPermission,"value",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.savePermission}},[s("icon",{attrs:{icon:"check"}})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.resetNewPermission}},[s("icon",{attrs:{icon:"close"}})],1)])])])])],2)])])],1),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:t.updateOrder}},[t._v("Save")]),s("button",{staticClass:"button is-danger",on:{click:t.destroyRoom}},[t._v("Destroy")])])]:t._e()],2)],1)},pt=[],ft={mixins:[rt["a"],lt],data:function(){return{rooms:[],selectedRoom:null,roomOwners:[],roomModerators:[],roomPermissions:[],modalOpen:!1,loading:{name:!1,destroying:!1},newOwner:null,newModerator:null,newPermission:null,newRoom:null}},computed:{actions:function(){return this.$store.getters.roomActions},types:function(){return this.$store.getters.roomTypes},channel:function(){return this.$route.params.channel},roomFormNameError:function(){return this.newRoom.errors&&this.newRoom.errors.name},roomFormOwnerError:function(){return this.newRoom.errors&&this.newRoom.errors.owner},selectedActionTypes:function(){return this.types[this.newPermission.action]||[]}},created:function(){this.resetNewRoom(),this.fetchRooms()},mounted:function(){this.resetModal()},methods:{fetchRooms:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["B"],this.channel).then(function(e){t.rooms=e,t.hideGlobalLoading()})},saveRoom:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["e"],{channel:this.channel,room:this.newRoom}).then(function(e){t.rooms.push(e),t.$dialog.show("Create Room successfully."),t.resetNewRoom(),t.hideGlobalLoading()}).catch(function(e){t.newRoom.errors=e,t.hideGlobalLoading()})},updateOrder:function(){var t=this;this.$store.dispatch(a["cb"],{room:this.selectedRoom.uuid,order:this.selectedRoom.sort}).then(function(){var e=t.rooms.find(function(e){return e.uuid===t.selectedRoom.uuid});e.sort=t.selectedRoom.sort,t.$dialog.show("Success.")}).catch(function(){t.$dialog.show("Update room unsuccessfully.")})},resetNewRoom:function(){this.$set(this,"newRoom",{open:!1,name:"",owner:"",errors:{}})},goToUsers:function(t){this.$router.push({name:"userInRoom",params:Object(C["a"])({room:t.uuid},this.$route.params)})},editRoom:function(t){this.selectedRoom=Object(at["cloneDeep"])(this.rooms.find(function(e){return e.uuid===t.uuid})),this.fetchRoomInfo(this.selectedRoom),this.modalOpen=!0},fetchRoomInfo:function(t){var e=this;this.$store.dispatch(a["C"],{channel:this.channel,room:t.uuid}).then(function(t){e.roomOwners=t.owners,e.roomModerators=t.moderators,e.roomPermissions=t.acls})},resetNewOwner:function(){this.newOwner={status:!1,uuid:""}},resetNewModerator:function(){this.newModerator={status:!1,uuid:""}},resetNewPermission:function(){this.newPermission={status:!1,isNew:!0,action:"",type:"",value:""}},resetModal:function(){this.resetDestroying(),this.resetNewOwner(),this.resetNewModerator(),this.resetNewPermission()},onModalClose:function(){this.selectedRoom=null,this.closeModal(),this.resetModal()},closeModal:function(){this.modalOpen=!1},toggleNameFieldVisibility:function(){this.$refs.roomName.classList.toggle("hide"),this.$refs.nameField.classList.toggle("hide")},editRoomName:function(){this.loading.name||(this.toggleNameFieldVisibility(),this.$refs.nameInput.focus())},saveRoomName:function(){var t=this;this.toggleNameFieldVisibility();var e=this.rooms.find(function(e){return e.uuid===t.selectedRoom.uuid});e.name!==this.selectedRoom.name&&(this.loading.name=!0,this.$store.dispatch(a["bb"],{channel:this.channel,room:this.selectedRoom.uuid,name:this.selectedRoom.name}).then(function(){e.name=t.selectedRoom.name,t.loading.name=!1,t.$dialog.show("Update room successfully.")}).catch(function(s){t.selectedRoom.name=e.name,t.loading.name=!1,t.$dialog.show(s,5e3)}))},destroyRoom:function(){var t=this;this.doubleCheckDestroy("room",this.selectedRoom.uuid)&&(this.showGlobalLoading(),this.$store.dispatch(a["q"],{channel:this.channel,room:this.selectedRoom.uuid}).then(function(){t.$dialog.show("Delete Room successfully."),t.rooms.splice(t.rooms.findIndex(function(e){return e.uuid===t.selectedRoom.uuid}),1),t.closeModal(),t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to delete Room.")}))},deleteOwner:function(t,e){var s=this;this.doubleCheckDestroy("ownner",t+e)&&this.$store.dispatch(a["t"],{room:t,owner:e}).then(function(){s.roomOwners.splice(s.roomOwners.findIndex(function(t){return t.id===e}),1),s.$dialog.show("Delete owner successfully.")})},showOwnerInput:function(){var t=this;this.newOwner.status=!0,this.$nextTick(function(){t.$refs.ownerInput.scrollIntoView(),t.$refs.ownerInput.focus()})},addOwner:function(){var t=this;this.roomOwners.find(function(e){return t.newOwner.uuid===e.uuid})?this.$dialog.show("<p>This user has already been owner.</p> <p>Please check and submit again.</p>",5e3):this.$store.dispatch(a["h"],{room:this.selectedRoom.uuid,owner:this.newOwner.uuid}).then(function(e){t.roomOwners.push(e),t.resetNewOwner()}).catch(function(e){t.$dialog.show(e)})},deleteModerator:function(t,e){var s=this;this.doubleCheckDestroy("moderator",t+e)&&this.$store.dispatch(a["s"],{room:t,moderator:e}).then(function(){s.roomModerators.splice(s.roomModerators.findIndex(function(t){return t.id===e}),1),s.$dialog.show("Delete moderator successfully.")})},showModeratorInput:function(){var t=this;this.newModerator.status=!0,this.$nextTick(function(){t.$refs.moderatorInput.scrollIntoView(),t.$refs.moderatorInput.focus()})},addModerator:function(){var t=this;this.roomModerators.find(function(e){return t.newModerator.uuid===e.uuid})?this.$dialog.show("<p>This user has already been moderator.</p><p>Please check and submit again.</p>",5e3):this.$store.dispatch(a["g"],{room:this.selectedRoom.uuid,moderator:this.newModerator.uuid}).then(function(e){t.roomModerators.push(e),t.resetNewModerator()}).catch(function(e){t.$dialog.show(e)})},deletePermission:function(t,e,s){var n=this;this.doubleCheckDestroy("permission",t+e.action+e.type)&&this.$store.dispatch(a["r"],{room:t,action:e.action,type:e.type}).then(function(){n.$dialog.show("Delete room permission successfully."),n.roomPermissions.splice(s,1)})},showPermissionInput:function(){var t=this;this.newPermission.status=!0,this.$nextTick(function(){t.$refs.permissionInput.scrollIntoView(),t.$refs.permissionInput.focus()})},selectAction:function(t){this.newPermission.action=t.target.value,this.newPermission.type="",this.$refs.typeSelector.selectedIndex=0},selectType:function(t){this.newPermission.type=t.target.value},savePermission:function(){this.newPermission.isNew?this.addPermission(this.selectedRoom.uuid,this.newPermission):this.updatePermission(this.selectedRoom.uuid,this.newPermission)},addPermission:function(t,e){var s=this;this.roomPermissions.find(function(t){return t.action===e.action&&t.type===e.type})?this.$dialog.show("Permission with action: '".concat(e.action,"', type: '").concat(e.type,"' exists already."),5e3):this.$store.dispatch(a["f"],Object(C["a"])({room:t},e)).then(function(){s.roomPermissions.push(e),s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},updatePermission:function(t,e){var s=this;this.$store.dispatch(a["ab"],Object(C["a"])({channel:this.channel,room:t},e)).then(function(){s.roomPermissions[e.index].value=e.value,s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},editPermission:function(t,e){this.newPermission=Object.assign({},this.newPermission,e,{status:!0,isNew:!1,index:t}),this.showPermissionInput()},toggleDefaultRoom:function(t){var e=this,s=this.rooms.find(function(t){return t.uuid===e.selectedRoom.uuid});this.$store.dispatch(a["S"],{room:this.selectedRoom.uuid,status:t}).then(function(){s.is_default=t,e.$dialog.show("Toogle default room successfully.")}).catch(function(){s.is_default=!t,e.$dialog.show("Toggle unsuccessfully.")})},toggleTemporaryRoom:function(t){var e=this,s=this.rooms.find(function(t){return t.uuid===e.selectedRoom.uuid});this.$store.dispatch(a["V"],{room:this.selectedRoom.uuid,status:t}).then(function(){s.is_ephemeral=t,e.$dialog.show("Toogle temporary room successfully.")}).catch(function(){s.is_ephemeral=!t,e.$dialog.show("Toggle unsuccessfully.")})},toggleAdminRoom:function(t){var e=this,s=this.rooms.find(function(t){return t.uuid===e.selectedRoom.uuid});this.$store.dispatch(a["R"],{room:this.selectedRoom.uuid,status:t}).then(function(){s.is_admin=t,e.$dialog.show("Toogle admin room successfully.")}).catch(function(){s.is_admin=!t,e.$dialog.show("Toggle unsuccessfully.")})}}},vt=ft,gt=Object(m["a"])(vt,mt,pt,!1,null,null,null);gt.options.__file="Room.vue";var bt=gt.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"users in room "+t.room,data:t.users}},[s("table-column",{attrs:{display:"UUID",field:"uuid",sortable:""}}),s("table-column",{attrs:{display:"Username",field:"name",sortable:""}}),s("table-column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button",on:{click:function(s){t.kickUser(e.row)}}},[s("icon",{attrs:{icon:"minus-square-o"}}),s("span",[t._v("kick")])],1),s("a",{staticClass:"button",on:{click:function(s){t.openBanModal(e.row)}}},[s("icon",{attrs:{icon:"ban"}}),s("span",[t._v("ban")])],1)])]}}])})],1),s("modal",{attrs:{active:t.banModal.open,duration:300},on:{close:t.resetBanModal}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.banUser(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Duratoin")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.banModal.duration,expression:"banModal.duration"}],staticClass:"input",attrs:{type:"text",placeholder:"Duration"},domProps:{value:t.banModal.duration},on:{input:function(e){e.target.composing||t.$set(t.banModal,"duration",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-danger"},[t._v("Ban")])])])])])])],1)},Ct=[],_t={mixins:[rt["a"],lt],data:function(){return{users:[],banModal:{user:null,duration:"",open:!1}}},computed:{channel:function(){return this.$route.params.channel},room:function(){return this.$route.params.room}},created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["F"],this.room).then(function(e){t.hideGlobalLoading(),t.users=e})},removeUserFromTable:function(t){this.users.splice(this.users.findIndex(function(e){return e.uuid===t.uuid}),1)},kickUser:function(t){var e=this;this.doubleCheckDestroy("kick",t.uuid)&&this.$store.dispatch(a["I"],{room:this.room,user:t.uuid}).then(function(){e.$dialog.show("Kick user successfully."),e.removeUserFromTable(t)}).catch(function(t){e.$dialog.show(t,5e3)})},openBanModal:function(t){this.banModal.open=!0,this.banModal.user=t},resetBanModal:function(){this.banModal.open=!1,this.banModal.user=null,this.banModal.duration=""},banUser:function(){var t=this;this.$store.dispatch(a["j"],{target:"room",target_uuid:this.room,user_uuid:this.banModal.user.uuid,duration:this.banModal.duration}).then(function(){t.removeUserFromTable(t.banModal.user),t.$dialog.show("Ban user successfully."),t.resetBanModal()}).catch(function(e){t.$dialog.show(e,5e3)})}}},yt=_t,Ot=Object(m["a"])(yt,wt,Ct,!1,null,null,null);Ot.options.__file="UserInRoom.vue";var kt=Ot.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"superusers",data:t.superusers}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Superusers\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newSuperuser.open=!0}}},[s("icon",{attrs:{icon:"plus"}})],1)]),s("table-column",{attrs:{display:"uuid",field:"uuid",sortable:"",numeric:""}}),s("table-column",{attrs:{display:"Username",field:"name",sortable:""}}),s("table-column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.unsetSuperuser(e.row)}}},[t._v("unset")])}}])})],1),s("modal",{attrs:{active:t.newSuperuser.open,duration:300,"is-card":""},on:{close:t.resetNewSuperuser}},[[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"is-size-5"},[t._v("Add superuser")])]),s("section",{staticClass:"modal-card-body"},[s("label",{staticClass:"label"},[t._v("Create: ")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.createSuperuser(e)}}},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newSuperuser.name,expression:"newSuperuser.name"}],staticClass:"input",class:{"is-danger":t.nameFieldError},attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newSuperuser.name},on:{input:function(e){e.target.composing||t.$set(t.newSuperuser,"name",e.target.value)}}}),t.nameFieldError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.nameFieldError))]):t._e()]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newSuperuser.uuid,expression:"newSuperuser.uuid"}],staticClass:"input",class:{"is-danger":t.UuidFieldError},attrs:{type:"text",placeholder:"ID"},domProps:{value:t.newSuperuser.uuid},on:{input:function(e){e.target.composing||t.$set(t.newSuperuser,"uuid",e.target.value)}}}),t.UuidFieldError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.UuidFieldError))]):t._e()]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[s("icon",{attrs:{icon:"check"}})],1)])]),s("p",{staticClass:"placeholder"})]),s("label",{staticClass:"label"},[t._v("Search: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.search.model,expression:"search.model",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Name or UUID"},domProps:{value:t.search.model},on:{change:function(e){t.$set(t.search,"model",e.target.value)}}})])]),s("datatable",{attrs:{title:"search result",data:t.users,searchable:!1}},[s("table-column",{attrs:{display:"uuid",field:"uuid",sortable:"",numeric:""}}),s("table-column",{attrs:{display:"Username",field:"name"}}),s("table-column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-primary",on:{click:function(s){t.setSuperuser(e.row)}}},[t._v("set")])}}])})],1)],1)]],2)],1)},Mt=[],Pt=(s("386d"),{mixins:[rt["a"],lt],data:function(){return{superusers:[],users:[],newSuperuser:null,search:{loading:!1,model:""}}},computed:{nameFieldError:function(){return this.newSuperuser.errors.name},UuidFieldError:function(){return this.newSuperuser.errors.uuid}},created:function(){this.fetchSuperusers(),this.resetNewSuperuser()},methods:{fetchSuperusers:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["E"]).then(function(e){t.superusers=e,t.hideGlobalLoading()}).catch(function(){t.hideGlobalLoading()})},findSuperuser:function(t){return this.superusers.find(function(e){return e.uuid===t})},createSuperuser:function(){var t=this,e=this.findSuperuser(this.newSuperuser.uuid);e?this.$set(this.newSuperuser.errors,"uuid","User exists."):this.$store.dispatch(a["l"],this.newSuperuser).then(function(){t.superusers.push({uuid:t.newSuperuser.uuid,name:t.newSuperuser.name}),t.resetNewSuperuser()}).catch(function(e){t.newSuperuser.errors=e})},resetNewSuperuser:function(){this.$set(this,"newSuperuser",{open:!1,name:"",uuid:"",errors:{}})},setSuperuser:function(t){var e=this,s=this.findSuperuser(t.uuid);s?this.$dialog.show("This user has already been superuser."):this.$store.dispatch(a["P"],t.uuid).then(function(){e.$dialog.show("Success."),e.superusers.push(t)})},unsetSuperuser:function(t){var e=this;this.doubleCheckDestroy("superuser",t.uuid)&&this.$store.dispatch(a["W"],t.uuid).then(function(){e.superusers.splice(e.superusers.findIndex(function(e){return e.uuid===t.uuid}),1),e.$dialog.show("Success.")})},searchForUsers:function(t){var e=this;this.search.loading=!0,this.$store.dispatch(a["L"],t).then(function(t){e.users=t,e.search.loading=!1}).catch(function(){e.search.loading=!1})}},watch:{"search.model":function(t){t&&this.searchForUsers(t)}}}),xt=Pt,St=Object(m["a"])(xt,$t,Mt,!1,null,null,null);St.options.__file="User.vue";var Nt=St.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"Banned Users",data:t.globalBans}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Global Bans\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newBan.open=!0}}},[s("icon",{attrs:{icon:"plus"}})],1)]),s("table-column",{attrs:{display:"UUID",field:"uuid",sortable:"",numeric:""}}),s("table-column",{attrs:{display:"Username",field:"name",sortable:""}}),s("table-column",{attrs:{display:"Duration",field:"duration"}}),s("table-column",{attrs:{display:"End time",field:t.formatDate}}),s("table-column",{attrs:{display:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.removeBan(e.row)}}},[s("icon",{attrs:{icon:"trash-o"}})],1)}}])})],1),s("datatable",{attrs:{title:"Banned Users",data:t.channelBans}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Channel Bans\n    ")]),s("table-column",{attrs:{display:"UUID",field:"uuid",sortable:"",numeric:""}}),s("table-column",{attrs:{display:"Username",field:"name",sortable:""}}),s("table-column",{attrs:{display:"Duration",field:"duration"}}),s("table-column",{attrs:{display:"End time",field:t.formatDate}}),s("table-column",{attrs:{display:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.removeBan(e.row)}}},[s("icon",{attrs:{icon:"trash-o"}})],1)}}])})],1),s("datatable",{attrs:{title:"Banned Users",data:t.roomBans}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Room Bans\n    ")]),s("table-column",{attrs:{display:"UUID",field:"uuid",sortable:"",numeric:""}}),s("table-column",{attrs:{display:"Username",field:"name",sortable:""}}),s("table-column",{attrs:{display:"Duration",field:"duration"}}),s("table-column",{attrs:{display:"End time",field:t.formatDate}}),s("table-column",{attrs:{display:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.removeBan(e.row)}}},[s("icon",{attrs:{icon:"trash-o"}})],1)}}])})],1),s("modal",{attrs:{active:t.newBan.open,duration:300},on:{close:t.resetNewBan}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createNewBan(e)}}},[s("label",{staticClass:"label"},[t._v("Target: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.newBan.target,expression:"newBan.target"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.newBan,"target",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"global"}},[t._v("Global")]),s("option",{attrs:{value:"channel"}},[t._v("Channel")]),s("option",{attrs:{value:"room"}},[t._v("Room")])])])]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBan.targetUUID,expression:"newBan.targetUUID"}],staticClass:"input",attrs:{type:"text",placeholder:"Target UUID",disabled:"global"===this.newBan.target},domProps:{value:t.newBan.targetUUID},on:{input:function(e){e.target.composing||t.$set(t.newBan,"targetUUID",e.target.value)}}})])]),s("label",{staticClass:"label"},[t._v("User UUID: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBan.userUUID,expression:"newBan.userUUID"}],staticClass:"input",attrs:{type:"text",placeholder:"User UUID"},domProps:{value:t.newBan.userUUID},on:{input:function(e){e.target.composing||t.$set(t.newBan,"userUUID",e.target.value)}}})])]),s("label",{staticClass:"label"},[t._v("Duration: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBan.duration,expression:"newBan.duration"}],staticClass:"input",attrs:{type:"text",placeholder:"Duration"},domProps:{value:t.newBan.duration},on:{input:function(e){e.target.composing||t.$set(t.newBan,"duration",e.target.value)}}})]),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.newBan.durationUnit,expression:"newBan.durationUnit"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.newBan,"durationUnit",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"d"}},[t._v("Days")]),s("option",{attrs:{value:"h"}},[t._v("Hours")]),s("option",{attrs:{value:"m"}},[t._v("Minutes")]),s("option",{attrs:{value:"s"}},[t._v("Seconds")])])])])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-danger"},[t._v("Ban")])])])])])])],1)},Rt=[],Dt=s("340b"),At={mixins:[rt["a"],lt],data:function(){return{bannedUsers:{global:[],channel:[],room:[]},newBan:null,banDuration:{d:86400,h:3600,m:60,s:1}}},computed:{globalBans:function(){return this.bannedUsers.global},channelBans:function(){return this.bannedUsers.channel},roomBans:function(){return this.bannedUsers.room}},created:function(){this.reset(),this.fetchBannedUsers()},methods:{reset:function(){this.resetNewBan()},resetNewBan:function(){this.$set(this,"newBan",{open:!1,userUUID:"",target:"global",targetUUID:"",duration:"",durationUnit:"d"})},fetchBannedUsers:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["v"]).then(function(e){t.bannedUsers=e,t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to fetch banned users."),t.hideGlobalLoading()})},formatDate:function(t){return Object(Dt["format"])(t.timestamp,"YYYY-MM-DD HH:mm:ss")},removeBan:function(t){t.channel?this.removeChannelBan(t):t.room?this.removeRoomBan(t):this.removeGlobalBan(t)},removeChannelBan:function(t){var e=this;this.doubleCheckDestroy("ban","Channel-".concat(t.uuid))&&this.$store.dispatch(a["J"],{user:t.uuid,target:"channel",targetUUID:t.channel.uuid}).then(function(){e.bannedUsers.channel.splice(e.bannedUsers.channel.findIndex(function(e){return e.uuid===t.uuid}),1)})},removeRoomBan:function(t){var e=this;this.doubleCheckDestroy("ban","Room-".concat(t.uuid))&&this.$store.dispatch(a["J"],{user:t.uuid,target:"room",targetUUID:t.room.uuid}).then(function(){e.bannedUsers.room.splice(e.bannedUsers.room.findIndex(function(e){return e.uuid===t.uuid}),1)})},removeGlobalBan:function(t){var e=this;this.doubleCheckDestroy("ban","Global-".concat(t.uuid))&&this.$store.dispatch(a["J"],{user:t.uuid,target:"global",targetUUID:""}).then(function(){e.bannedUsers.global.splice(e.bannedUsers.global.findIndex(function(e){return e.uuid===t.uuid}),1)})},createNewBan:function(){var t=this,e=this.newBan.duration,s=this.newBan.durationUnit,n={target:this.newBan.target,target_uuid:this.newBan.targetUUID,user_uuid:this.newBan.userUUID,duration:e+s};this.$store.dispatch(a["j"],n).then(function(i){t.bannedUsers[n.target].push(Object(C["a"])({},i,{timestamp:Object(Dt["addSeconds"])(new Date,(t.banDuration[s]||0)*e)})),t.resetNewBan(),t.$dialog.show("Ban user successfully.")})}}},It=At,Tt=Object(m["a"])(It,Et,Rt,!1,null,null,null);Tt.options.__file="Ban.vue";var Ut=Tt.exports,jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("p",{staticClass:"is-size-5",style:{"margin-bottom":"1rem"}},[t._v("\n    Blocked Words\n    "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newBlock.open=!0}}},[s("icon",{attrs:{icon:"plus"}})],1)]),s("div",{staticClass:"tags"},t._l(t.words,function(e){return s("div",{key:e.id,staticClass:"tag is-medium is-rounded is-danger"},[t._v("\n      "+t._s(e.word)+"\n      "),s("span",{staticClass:"delete is-small",on:{click:function(s){t.deleteWord(e)}}})])})),s("modal",{attrs:{duration:300,active:t.newBlock.open},on:{close:t.resetNewBlock}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createNewBlock(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Add words to black list: ")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newBlock.words,expression:"newBlock.words"}],staticClass:"textarea",attrs:{type:"text",placeholder:"Workds separated by new line"},domProps:{value:t.newBlock.words},on:{input:function(e){e.target.composing||t.$set(t.newBlock,"words",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[t._v("Block")])])])])])])],1)},Lt=[],Bt={mixins:[rt["a"],lt],data:function(){return{words:[],newBlock:null}},created:function(){this.fetchBlacklist(),this.resetNewBlock()},methods:{fetchBlacklist:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["w"]).then(function(e){t.words=e,t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to fetch blacklist."),t.hideGlobalLoading()})},resetNewBlock:function(){this.$set(this,"newBlock",{open:!1,words:""})},createNewBlock:function(){var t=this,e=this.newBlock.words;this.$store.dispatch(a["k"],e).then(function(){t.fetchBlacklist(),t.resetNewBlock()})},deleteWord:function(t){var e=this;this.doubleCheckDestroy("remove",t.id)&&this.$store.dispatch(a["K"],t.id).then(function(){e.words.splice(e.words.findIndex(function(e){return e.id===t.id}),1)}).catch(function(){e.$dialog.show("Fail to delete word from blacklist.")})}}},Ft=Bt,Gt=Object(m["a"])(Ft,jt,Lt,!1,null,null,null);Gt.options.__file="Blacklist.vue";var Ht=Gt.exports,zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"history"}},[s("label",{staticClass:"label"},[t._v("Search for history: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.room,expression:"searchModel.room"}],staticClass:"input",attrs:{type:"text",placeholder:"Room UUID"},domProps:{value:t.searchModel.room},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"room",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.user,expression:"searchModel.user"}],staticClass:"input",attrs:{type:"text",placeholder:"User UUID"},domProps:{value:t.searchModel.user},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"user",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.from,expression:"searchModel.from"}],ref:"fromInput",staticClass:"input",attrs:{type:"text",placeholder:"From"},domProps:{value:t.searchModel.from},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"from",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.to,expression:"searchModel.to"}],ref:"toInput",staticClass:"input",attrs:{type:"text",placeholder:"To"},domProps:{value:t.searchModel.to},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"to",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-primary",on:{click:t.search}},[s("icon",{attrs:{icon:"search"}})],1)])]),s("datatable",{staticClass:"compact",attrs:{data:t.messages,title:"Messages","per-page":[100,300,500],"default-per-page":100,"pagination-place":"both"}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[s("a",{staticClass:"button is-small",on:{click:t.downloadMessages}},[s("icon",{attrs:{icon:"download"}})],1),t._v("\n      "+t._s(t.title)+"\n    ")]),s("table-column",{attrs:{field:t.formatDate,display:"Time",sortable:!0,width:"150px"}}),s("table-column",{attrs:{field:"from_user_id",display:"UUID",width:"80px"}}),s("table-column",{attrs:{field:"from_user_name",display:"Username",width:"120px"}}),s("table-column",{attrs:{field:"body",display:"Content",width:"400px","hidden-overflow":""},on:{click:t.showMessageDetail}}),s("table-column",{attrs:{field:"domain",display:"Type",width:"80px"}}),s("table-column",{attrs:{display:"Actions",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("a",{staticClass:"button is-small is-success",on:{click:function(s){t.showConversion(e.row)}}},[t._v("Conversation")])]}}])})],1),s("modal",{attrs:{duration:300,active:t.modalOpen},on:{close:t.closeModal}},[t.selectedMessage?s("div",{staticClass:"box"},[s("p",{staticClass:"is-size-6"},[t._v("Time: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.formatDate(t.selectedMessage.timestamp)))]),s("p",{staticClass:"is-size-6"},[t._v("Channel: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.channel_name)+" ("+t._s(t.selectedMessage.channel_id)+")")]),s("p",{staticClass:"is-size-6"},[t._v("Target: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.target_name)+" ("+t._s(t.selectedMessage.target_id)+")")]),s("p",{staticClass:"is-size-6"},[t._v("User:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.from_user_name)+" ("+t._s(t.selectedMessage.from_user_id)+")")]),s("p",{staticClass:"is-size-6"},[t._v("Message ID:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.message_id))]),s("p",{staticClass:"is-size-6"},[t._v("Content: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.body))]),s("span",{staticClass:"is-size-6"},[t._v(" Delete: ")]),s("br"),s("p",{staticClass:"label"},[s("i-switch",{on:{switch:t.toggleDelete},model:{value:t.selectedMessage.deleted,callback:function(e){t.$set(t.selectedMessage,"deleted",e)},expression:"selectedMessage.deleted"}})],1)]):t._e()])],1)},Vt=[],qt=s("cf06"),Yt=s.n(qt),Wt={mixins:[rt["a"]],data:function(){return{messages:[],currentRoom:"",currentUser:"",fromPicker:null,toPicker:null,pickerConfig:{enableTime:!0,enableSeconds:!0,time_24hr:!0},searchModel:{room:"",user:"",from:"",to:""},modalOpen:!1,selectedMessage:null}},computed:{title:function(){var t=["History"];return""!==this.currentRoom&&t.push("for","room: ".concat(this.currentRoom)),""!==this.currentUser&&(t.includes("for")?t.push("and"):t.push("for"),t.push("user: ".concat(this.currentUser))),t.join(" ")}},created:function(){this.$route.query.search&&(this.searchModel=this.$route.query,this.sendSearchRequest())},mounted:function(){this.initPicker()},watch:{$route:function(){this.$route.query.search&&(this.searchModel=this.$route.query,this.sendSearchRequest())}},methods:{initPicker:function(){this.fromPicker=Yt()(this.$refs.fromInput,this.pickerConfig),this.toPicker=Yt()(this.$refs.toInput,this.pickerConfig)},sendSearchRequest:function(){var t=this;this.showGlobalLoading();var e=Object.assign({},this.searchModel);e.from=e.from?new Date(e.from).toISOString():"",e.to=e.to?new Date(e.to).toISOString():"",this.$store.dispatch(a["M"],e).then(function(e){t.messages=e.message,t.fromPicker.setDate(t.formatDate(e.real_from_time),!0),t.toPicker.setDate(t.formatDate(e.real_to_time),!0),t.currentRoom=e.room,t.currentUser=e.username,t.hideGlobalLoading()}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,5e3)})},search:function(){this.$router.push({name:"history",query:Object(C["a"])({},this.searchModel,{search:1,r:Math.random()})})},formatDate:function(t){var e=null;return e="string"===typeof t?t:t.timestamp,Object(Dt["format"])(e,"YYYY-MM-DD HH:mm:ss")},showMessageDetail:function(t){this.selectedMessage=t,this.modalOpen=!0},showConversion:function(t){var e=new Date(t.timestamp),s=new Date(t.timestamp);e.setMinutes(e.getMinutes()-1),s.setHours(s.getHours()+1),this.searchModel={room:t.target_id,user:"",from:e.toISOString(),to:s.toISOString()},this.search()},closeModal:function(){this.modalOpen=!1,this.selectedMessage=null},toggleDelete:function(t){var e=this,s=this.messages.find(function(t){return t.message_id===e.selectedMessage.message_id});this.$store.dispatch(a["T"],{message:s.message_id,status:t}).then(function(){s.deleted=t,e.$dialog.show("Done.")}).catch(function(){e.selectedMessage.deleted=!t,e.$dialog.show("Failed.")})},downloadMessages:function(){if(Array.isArray(this.messages)&&0!==this.messages.length){var t=Object.keys(this.messages[0]),e="data:text/csv;charset=utf-8,",s="".concat(t.join(","),"\n"),n=this.messages.map(function(t){return Object.values(t).join(",")}).join("\n"),i=document.createElement("a");i.setAttribute("href",e+encodeURIComponent(s+n)),i.setAttribute("download","history.csv"),document.body.appendChild(i),i.click()}else this.$dialog.show("There is nothing to export.")}}},Kt=Wt,Jt=Object(m["a"])(Kt,zt,Vt,!1,null,null,null);Jt.options.__file="History.vue";var Qt=Jt.exports,Xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"history"}},[s("label",{staticClass:"label"},[t._v("Search for spam: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.room,expression:"searchModel.room"}],staticClass:"input",attrs:{type:"text",placeholder:"Room UUID"},domProps:{value:t.searchModel.room},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"room",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.user,expression:"searchModel.user"}],staticClass:"input",attrs:{type:"text",placeholder:"User UUID"},domProps:{value:t.searchModel.user},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"user",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.from,expression:"searchModel.from"}],ref:"fromInput",staticClass:"input",attrs:{type:"text",placeholder:"From"},domProps:{value:t.searchModel.from},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"from",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.to,expression:"searchModel.to"}],ref:"toInput",staticClass:"input",attrs:{type:"text",placeholder:"To"},domProps:{value:t.searchModel.to},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"to",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-primary",on:{click:t.search}},[s("icon",{attrs:{icon:"search"}})],1)])]),s("datatable",{staticClass:"compact",attrs:{data:t.spams,title:"Spams","per-page":[100,300,500],"default-per-page":100,"pagination-place":"both"}},[s("div",{staticClass:"field has-addons flex flex-v-center",attrs:{slot:"header"},slot:"header"},[s("p",{staticClass:"control"},[s("a",{staticClass:"button",on:{click:t.downloadSpams}},[s("icon",{attrs:{icon:"download"}})],1)]),s("p",{staticClass:"control"},[s("a",{staticClass:"button",on:{click:t.openSettingModal}},[s("icon",{attrs:{icon:"cog"}})],1)]),s("span",{staticClass:"label",style:{"padding-left":".5rem"}},[t._v(t._s(t.title))])]),s("table-column",{attrs:{display:"Time",sortable:!0,width:"150px","sort-method":t.sortByTimestamp},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.formatDate(e.row.time_stamp))+"\n      ")]}}])}),s("table-column",{attrs:{field:"from_id",display:"UUID",width:"80px"}}),s("table-column",{attrs:{field:"from_name",display:"Username",width:"120px"}}),s("table-column",{attrs:{field:"message",display:"Content",width:"300px","hidden-overflow":""},on:{click:t.showSpamDetail}}),s("table-column",{attrs:{display:"probability",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return s("tooltip",{attrs:{content:e.row.probability,position:"right"}},[t._v("\n        "+t._s(t.probabilityAverage(e.row.probability))+"\n      ")])}}])}),s("table-column",{attrs:{display:"Actions",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button is-small is-success",on:{click:function(s){t.showConversion(e.row)}}},[t._v("Conversation")]),s("a",{staticClass:"button is-small",attrs:{disabled:""}},[t._v("User overview")])])]}}])})],1),s("modal",{attrs:{duration:300,"is-card":!0,active:t.spamModal.open},on:{close:t.closeSpamModal}},[t.selectedSpam?s("div",{staticClass:"box"},[s("p",{staticClass:"flex flex-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("is spam?")]),s("i-switch",{on:{switch:t.toggleCorrect},model:{value:t.selectedSpam.correct,callback:function(e){t.$set(t.selectedSpam,"correct",e)},expression:"selectedSpam.correct"}})],1),s("p",[t._v("Time: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.formatDate(t.selectedSpam.time_stamp)))]),s("p",[t._v(t._s(t.selectedSpam.object_type)+": ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedSpam.to_name)+" ("+t._s(t.selectedSpam.to_id)+")")]),s("p",[t._v("User:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedSpam.from_name)+" ("+t._s(t.selectedSpam.from_id)+")")]),s("p",[t._v("Message ID:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedSpam.message_id))]),s("p",[t._v("Content: ")]),s("pre",[t._v(t._s(t.selectedSpam.message))])]):t._e()]),s("modal",{attrs:{durations:300,active:t.settingModal.open},on:{close:t.closeSettingModal}},[t.settingModal.settings?[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"is-size-5"},[t._v("Spam settings")]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeSettingModal}})]),s("section",{staticClass:"modal-card-body"},[s("p",{staticClass:"flex flex-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("Enabled:")]),s("i-switch",{model:{value:t.settingModal.settings.enabled,callback:function(e){t.$set(t.settingModal.settings,"enabled",e)},expression:"settingModal.settings.enabled"}})],1),s("span",{staticClass:"label"},[t._v("threshold(percentage):")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settingModal.settings.threshold,expression:"settingModal.settings.threshold"}],staticClass:"input",attrs:{type:"text",placeholder:"Threshold"},domProps:{value:t.settingModal.settings.threshold},on:{input:function(e){e.target.composing||t.$set(t.settingModal.settings,"threshold",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v("Max Length:")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settingModal.settings.max_length,expression:"settingModal.settings.max_length"}],staticClass:"input",attrs:{type:"text",placeholder:"Max length"},domProps:{value:t.settingModal.settings.max_length},on:{input:function(e){e.target.composing||t.$set(t.settingModal.settings,"max_length",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v("Min Length:")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settingModal.settings.min_length,expression:"settingModal.settings.min_length"}],staticClass:"input",attrs:{type:"text",placeholder:"Min length"},domProps:{value:t.settingModal.settings.min_length},on:{input:function(e){e.target.composing||t.$set(t.settingModal.settings,"min_length",e.target.value)}}})])]),s("p",{staticClass:"flex flex-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("Ignore emoji:")]),s("i-switch",{model:{value:t.settingModal.settings.ignore_emoji,callback:function(e){t.$set(t.settingModal.settings,"ignore_emoji",e)},expression:"settingModal.settings.ignore_emoji"}})],1),s("p",{staticClass:"flex flex-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("\n            Save\n            "),s("tooltip",{attrs:{position:"right",content:"Whether saving spam messages to separate 'spams' table."}},[s("icon",{attrs:{icon:"question-circle-o"}})],1),t._v(":\n          ")],1),s("i-switch",{model:{value:t.settingModal.settings.should_save,callback:function(e){t.$set(t.settingModal.settings,"should_save",e)},expression:"settingModal.settings.should_save"}})],1),s("p",{staticClass:"flex flex-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("\n            Delete\n            "),s("tooltip",{attrs:{position:"right",content:"Enable deletion of spam messages from storage backend."}},[s("icon",{attrs:{icon:"question-circle-o"}})],1),t._v(":\n          ")],1),s("i-switch",{model:{value:t.settingModal.settings.should_delete,callback:function(e){t.$set(t.settingModal.settings,"should_delete",e)},expression:"settingModal.settings.should_delete"}})],1)]),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-primary",on:{click:t.updateSpamSettings}},[t._v("Save")]),s("button",{staticClass:"button",on:{click:t.closeSettingModal}},[t._v("Close")])])]:t._e()],2)],1)},Zt=[],te=(s("5df2"),s("c5f6"),{mixins:[rt["a"]],data:function(){return{spams:[],currentRoom:"",currentUser:"",fromPicker:null,toPicker:null,pickerConfig:{enableTime:!0,enableSeconds:!0,time_24hr:!0},searchModel:{room:"",user:"",from:"",to:""},spamModal:{open:!1,spam:null},settingModal:{open:!1,settings:null}}},computed:{title:function(){var t=["Spams"];return""!==this.currentRoom&&t.push("for","room: ".concat(this.currentRoom)),""!==this.currentUser&&(t.includes("for")?t.push("and"):t.push("for"),t.push("user: ".concat(this.currentUser))),t.join(" ")},selectedSpam:function(){return this.spamModal.spam}},created:function(){this.$route.query.search&&(this.searchModel=this.$route.query),this.actionFromQuery(this.$route)},mounted:function(){this.initPicker()},watch:{$route:"actionFromQuery"},methods:{actionFromQuery:function(t){t.query.search?this.sendSearchRequest():this.getLatestSpams()},initPicker:function(){this.fromPicker=Yt()(this.$refs.fromInput,this.pickerConfig),this.toPicker=Yt()(this.$refs.toInput,this.pickerConfig)},getLatestSpams:function(){var t=this;this.showGlobalLoading(!0),this.$store.dispatch(a["A"]).then(function(e){t.spams=e,t.hideGlobalLoading()}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,500)})},search:function(){this.$router.push({name:"spam",query:Object(C["a"])({},this.searchModel,{search:1,r:Math.random()})})},sendSearchRequest:function(){var t=this;this.showGlobalLoading();var e=Object.assign({},this.searchModel);e.from=e.from?new Date(e.from).toISOString():"",e.to=e.to?new Date(e.to).toISOString():"",this.$store.dispatch(a["N"],e).then(function(e){t.spams=e.message,t.fromPicker.setDate(e.real_from_time,!0),t.toPicker.setDate(e.real_to_time,!0),t.currentRoom=e.room_name,t.currentUser=e.user_name,t.hideGlobalLoading()}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,5e3)})},sortByTimestamp:function(t,e){return Object(Dt["compareAsc"])(t.time_stamp,e.time_stamp)},probabilityAverage:function(t){var e=t.split(",").filter(Number).map(Number.parseFloat);return"".concat((e.reduce(function(t,e){return t+e},0)/e.length*100).toFixed(2),"%")},formatDate:function(t){return Object(Dt["format"])(1e3*t,"YYYY-MM-DD HH:mm:ss")},showSpamDetail:function(t){this.spamModal.spam=t,this.spamModal.open=!0},showConversion:function(t){var e=new Date(1e3*t.time_stamp),s=new Date(1e3*t.time_stamp);e.setMinutes(e.getMinutes()-1),s.setHours(s.getHours()+1),this.searchModel={room:t.to_id,user:"",from:e.toISOString(),to:s.toISOString()},this.$router.push({name:"history",query:Object(C["a"])({},this.searchModel,{search:1})})},closeSpamModal:function(){this.spamModal.open=!1,this.spamModal.spam=null},toggleCorrect:function(t){var e=this,s=this.spams.find(function(t){return t.id===e.selectedSpam.id});this.$store.dispatch(a["U"],{id:s.id,status:t}).then(function(){s.correct=t,e.$dialog.show("Done.")}).catch(function(){e.selectedSpam.correct=!t,e.$dialog.show("Failed.")})},downloadSpams:function(){if(Array.isArray(this.spams)&&0!==this.spams.length){var t=Object.keys(this.spams[0]),e="data:text/csv;charset=utf-8,",s="".concat(t.join(","),"\n"),n=this.spams.map(function(t){return Object.values(t).map(function(t){return t.toString().replace(/,/g,";")}).join(",")}).join("\n"),i=document.createElement("a");i.setAttribute("href",e+encodeURIComponent(s+n)),i.setAttribute("download","spams.csv"),document.body.appendChild(i),i.click()}else this.$dialog.show("There is nothing to export.")},openSettingModal:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(a["D"]).then(function(e){t.hideGlobalLoading(),t.settingModal.settings=e,t.settingModal.open=!0}).catch(function(){t.hideGlobalLoading(),t.$dislog.show("Failed to get spam settings.")})},updateSpamSettings:function(){var t=this;this.showGlobalLoading(!0),this.$store.dispatch(a["db"],this.settingModal.settings).then(function(){t.hideGlobalLoading(),t.$dialog.show("Update settings successfully.")}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,5e3)})},closeSettingModal:function(){this.settingModal.open=!1}}}),ee=te,se=Object(m["a"])(ee,Xt,Zt,!1,null,null,null);se.options.__file="Spam.vue";var ne=se.exports,ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Verb: ")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.model.verb,expression:"model.verb"}],staticClass:"input",class:{"is-danger":t.verbError},attrs:{type:"text",placeholder:"Verb to use"},domProps:{value:t.model.verb},on:{input:function(e){e.target.composing||t.$set(t.model,"verb",e.target.value)}}}),s("p",{staticClass:"help is-danger"},[t._v(t._s(t.verbError))])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Content: ")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.content,expression:"model.content"}],staticClass:"textarea",class:{"is-danger":t.contentError},attrs:{placeholder:"Message to broadcast"},domProps:{value:t.model.content},on:{input:function(e){e.target.composing||t.$set(t.model,"content",e.target.value)}}}),s("p",{staticClass:"help is-danger"},[t._v(t._s(t.contentError))])])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary",on:{click:t.broadcast}},[t._v("Broadcast")])])])])},oe=[],ae={data:function(){return{model:{verb:"",content:""},errors:{}}},computed:{verbError:function(){return this.errors.verb},contentError:function(){return this.errors.content}},methods:{resetModel:function(){this.model.verb="",this.model.content="",this.errors={}},broadcast:function(){var t=this;this.$store.dispatch(a["O"],this.model).then(function(){t.$dialog.show("Send broadcast successfully."),t.resetModel()}).catch(function(e){"string"===typeof e?t.$dialog.show(e,3e3):t.errors=e})}}},re=ae,le=Object(m["a"])(re,ie,oe,!1,null,null,null);le.options.__file="Broadcast.vue";var ce=le.exports;n["a"].use(nt["a"]);var ue=new nt["a"]({mode:"history",base:$.base,routes:[{path:"/",name:"home",component:ht},{path:"/channels/:channel/rooms",name:"room",component:bt},{path:"/channels/:channel/rooms/:room",name:"userInRoom",component:kt},{path:"/users",name:"user",component:Nt},{path:"/bans",name:"ban",component:Ut},{path:"/blacklist",name:"blacklist",component:Ht},{path:"/history",name:"history",component:Qt},{path:"/spam",name:"spam",component:ne},{path:"/broadcast",name:"broadcast",component:ce},{path:"*",redirect:{name:"home"}}]}),de=ue,he=s("c665"),me=s("aa9a"),pe=s("5a72"),fe=s.n(pe),ve=function(){function t(){Object(he["a"])(this,t),this.container=null}return Object(me["a"])(t,[{key:"getOrCreateContainer",value:function(){if(this.container)return this.container;var t=document.createElement("div");return t.classList.add("dialog-container"),document.body.appendChild(t),this.container=t,t}},{key:"appendDialog",value:function(t){var e=document.createElement("div");return e.classList.add("dialog"),e.innerHTML=t,this.getOrCreateContainer().appendChild(e),e}},{key:"removeDialog",value:function(t){this.container.removeChild(t)}},{key:"show",value:function(t,e){var s=this,n=this.appendDialog(t);fe()({targets:n,opacity:[0,1],top:[35,0],duration:500}),setTimeout(function(){fe()({targets:n,opacity:[1,0],"margin-top":[0,-35],duration:200,easing:"linear",complete:function(){s.removeDialog(n)}})},e||3e3)}}]),t}(),ge={install:function(t){Object.defineProperty(t.prototype,"$dialog",{value:new ve})}},be=(s("7e7d"),s("f400"),s("ccc2")),we=["IFooter","Navigator","HeroHeader","SideNav","Icon","Collapse","CollapseItem","Datatable","TableBody","TableColumn","GlobalLoading","Loading","Modal","ISwitch","Tooltip"],Ce=new Map(be.keys().map(function(t){return[t.replace(/^\.(.*)\//,"").replace(/\.\w+$/,""),t]}));we.forEach(function(t){var e=Ce.get(t);if(e){var s=be(Ce.get(t));n["a"].component(t,s.default||s)}}),n["a"].config.productionTip=!1,n["a"].prototype.$appConfig=$,n["a"].use(ge),new n["a"]({el:"#app",router:de,store:st,render:function(t){return t(f)}}).$mount()},"56ea":function(t,e,s){"use strict";function n(t,e){var s=e.row,n=e.column,i=n.field,o="";return"function"===typeof i?o=i(s):(o=s[i],n.numeric&&"string"===typeof o&&(o=-1!==o.indexOf(".")?parseFloat(o):parseInt(o,10),o=o.toLocaleString())),n&&n.formatter?n.formatter(s,n,o):o}s.r(e);var i,o,a={props:{display:{required:!0,type:String},field:[String,Function],sortable:[Boolean],numeric:[Boolean],sortMethod:[Function],width:[String],hiddenOverflow:[Boolean]},data:function(){return{columnConfig:{}}},inject:["table"],created:function(){var t=this;this.$createElement;this.$options.render=function(e){return e("div",t.$slots.default)};var e={display:this.display,field:this.field,sortable:this.sortable,numeric:this.numeric,renderCell:null,sortMethod:this.sortMethod,width:this.width,click:this.handleClick.bind(this)};this.columnConfig=e;var s=e.renderCell,i=this;e.renderCell=function(t,e){return i.$scopedSlots.default&&(s=function(){return i.$scopedSlots.default(e)}),s||(s=n),i.hiddenOverflow?t("div",{class:"table-cell overflow",style:{width:e.column.width||"100px"}},[" ",s(t,e)," "]):t("div",{class:"table-cell"},[" ",s(t,e)," "])}},mounted:function(){this.table.columns.push(this.columnConfig)},methods:{handleClick:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.$emit.apply(this,["click"].concat(e))}}},r=a,l=s("2877"),c=Object(l["a"])(r,i,o,!1,null,null,null);c.options.__file="TableColumn.vue";e["default"]=c.exports},"608e":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"content has-text-centered footer"},[s("p",[s("strong",[t._v("Unified Admin")]),t._v(" by TNC Service Team")])])}],o={},a=o,r=s("2877"),l=Object(r["a"])(a,n,i,!1,null,null,null);l.options.__file="IFooter.vue";e["default"]=l.exports},"63e0":function(t,e,s){"use strict";s.d(e,"i",function(){return n}),s.d(e,"Q",function(){return i}),s.d(e,"H",function(){return o}),s.d(e,"x",function(){return a}),s.d(e,"a",function(){return r}),s.d(e,"z",function(){return l}),s.d(e,"m",function(){return c}),s.d(e,"p",function(){return u}),s.d(e,"d",function(){return d}),s.d(e,"o",function(){return h}),s.d(e,"c",function(){return m}),s.d(e,"Y",function(){return p}),s.d(e,"Z",function(){return f}),s.d(e,"n",function(){return v}),s.d(e,"b",function(){return g}),s.d(e,"X",function(){return b}),s.d(e,"y",function(){return w}),s.d(e,"e",function(){return C}),s.d(e,"B",function(){return _}),s.d(e,"C",function(){return y}),s.d(e,"bb",function(){return O}),s.d(e,"cb",function(){return k}),s.d(e,"q",function(){return $}),s.d(e,"h",function(){return M}),s.d(e,"t",function(){return P}),s.d(e,"g",function(){return x}),s.d(e,"s",function(){return S}),s.d(e,"f",function(){return N}),s.d(e,"r",function(){return E}),s.d(e,"ab",function(){return R}),s.d(e,"S",function(){return D}),s.d(e,"R",function(){return A}),s.d(e,"V",function(){return I}),s.d(e,"F",function(){return T}),s.d(e,"I",function(){return U}),s.d(e,"j",function(){return j}),s.d(e,"E",function(){return L}),s.d(e,"L",function(){return B}),s.d(e,"P",function(){return F}),s.d(e,"W",function(){return G}),s.d(e,"l",function(){return H}),s.d(e,"v",function(){return z}),s.d(e,"J",function(){return V}),s.d(e,"w",function(){return q}),s.d(e,"k",function(){return Y}),s.d(e,"K",function(){return W}),s.d(e,"M",function(){return K}),s.d(e,"T",function(){return J}),s.d(e,"O",function(){return Q}),s.d(e,"u",function(){return X}),s.d(e,"N",function(){return Z}),s.d(e,"A",function(){return tt}),s.d(e,"G",function(){return et}),s.d(e,"U",function(){return st}),s.d(e,"D",function(){return nt}),s.d(e,"db",function(){return it});var n="AUTHENTICATE",i="SHOW_GLOBAL_LOADING",o="HIDE_GLOBAL_LOADING",a="FETCH_CHANNELS",r="ADD_CHANNEL",l="FETCH_CHANNEL_INFO",c="DELETE_CHANNEL",u="DELETE_CHANNEL_OWNER",d="ADD_CHANNEL_OWNER",h="DELETE_CHANNEL_ADMIN",m="ADD_CHANNEL_ADMIN",p="UPDATE_CHANNEL_NAME",f="UPDATE_CHANNEL_ORDER",v="DELETE_CHANNEL_ACL",g="ADD_CHANNEL_ACL",b="UPDATE_CHANNEL_ACL",w="FETCH_CHANNEL_ACL_TYPES",C="ADD_ROOM",_="FETCH_ROOMS",y="FETCH_ROOM_INFO",O="UPDATE_ROOM_NAME",k="UPDATE_ROOM_ORDER",$="DELETE_ROOM",M="ADD_ROOM_OWNER",P="DELETE_ROOM_OWNER",x="ADD_ROOM_MODERATOR",S="DELETE_ROOM_MODERATOR",N="ADD_ROOM_ACL",E="DELETE_ROOM_ACL",R="UPDATE_ROOM_ACL",D="TOGGLE_DEFAULT_ROOM",A="TOGGLE_ADMIN_ROOM",I="TOGGLE_TEMPORARY_ROOM",T="FETCH_USERS_IN_ROOM",U="KICK_USER",j="BAN_USER",L="FETCH_SUPERUSERS",B="SEARCH_FOR_USERS",F="SET_SUPERUSER",G="UNSET_SUPERUSER",H="CREATE_SUPERUSER",z="FETCH_BANNED_USERS",V="REMOVE_BANNED_USER",q="FETCH_BLACKLIST",Y="CREATE_BLOCKED_WORDS",W="REMOVE_BLOCKED_WORD",K="SEARCH_HISTORY",J="TOGGLE_MESSAGE_DELETE",Q="SEND_BROADCAST",X="FETCH_ACLS",Z="SEARCH_SPAMS",tt="FETCH_LATEST_SPAMS",et="GET_SPAM",st="TOGGLE_SPAM_CORRECTION",nt="FETCH_SPAM_SETTINGS",it="UPDATE_SPAM_SETTINGS"},"714b":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"modal",staticClass:"modal"},[s("div",{ref:"background",staticClass:"modal-background",on:{click:t.dismiss}}),s("div",{ref:"content",class:t.isCard?"modal-card":"modal-content",style:{width:t.relativeSize?"unset":""}},[t._t("default")],2)])},i=[],o=(s("c5f6"),s("5a72")),a=s.n(o),r={props:{active:{type:Boolean,required:!0},dismissable:{type:Boolean,default:!0},isCard:{type:Boolean,default:!1},duration:{type:Number,default:500},relativeSize:{type:Boolean,default:!1}},data:function(){return{open:!1}},methods:{dismiss:function(){this.open&&this.dismissable&&this.hide()},show:function(){var t=this;this.open||(this.open=!0,a()({targets:this.$refs.background,opacity:[0,.5],duration:this.duration,easing:"linear",begin:function(){document.body.style.overflow="hidden",t.$refs.modal.style.display="flex"}}),a()({targets:this.$refs.content,scale:[0,1],easing:"easeInOutSine",duration:this.duration}))},hide:function(){var t=this;this.open&&(this.open=!1,a()({targets:this.$refs.background,opacity:[.5,0],duration:300,easing:"linear"}),a()({targets:this.$refs.content,scale:[1,0],easing:"easeInBack",duration:300,complete:function(){document.body.style.removeProperty("overflow"),t.$refs.modal.style.display="none",t.$emit("close")}}))}},watch:{active:function(t){t?this.show():this.hide()}}},l=r,c=s("2877"),u=Object(c["a"])(l,n,i,!1,null,null,null);u.options.__file="Modal.vue";e["default"]=u.exports},"7e7d":function(t,e,s){},"89ce":function(t,e,s){"use strict";var n=s("63e0");e["a"]={methods:{showGlobalLoading:function(t){this.$store.dispatch(n["Q"],t)},hideGlobalLoading:function(){this.$store.dispatch(n["H"])}}}},"96db":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isGlobalLoadingShowing,expression:"isGlobalLoadingShowing"}],staticClass:"global-loading"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoadingMuskShowing,expression:"isLoadingMuskShowing"}],staticClass:"global-loading__musk"}),s("loading",{staticClass:"global-loading__loading",attrs:{size:"3rem"}})],1)},i=[],o=s("c93e"),a=s("2f62"),r=s("89ce"),l={mixins:[r["a"]],computed:Object(o["a"])({},Object(a["b"])(["isGlobalLoadingShowing","isLoadingMuskShowing"]))},c=l,u=s("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);d.options.__file="GlobalLoading.vue";e["default"]=d.exports},"99b8":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{ref:"menu",staticClass:"aside",on:{click:t.closeMenuOnMobile}},[s("a",{staticClass:"aside__burger",on:{click:function(e){return e.stopPropagation(),t.openMenuOnMobile(e)}}},[s("icon",{attrs:{icon:"bars"}})],1),s("nav",{on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"aside__logo"},[t._v(t._s(t.$appConfig.shortTitle))]),s("div",{staticClass:"aside__nav-item"},[s("collapse",{attrs:{accordion:""}},t._l(t.menu.items,function(e){return s("collapse-item",{key:e.label,attrs:{title:e.label},on:{click:function(s){t.itemClicked(e)}}},[e.children?t._l(e.children,function(n){return s("a",{key:n.label,staticClass:"nav-item__subitem",on:{click:function(s){t.itemClicked(n,e)}}},[t._v("\n              "+t._s(n.label)+"\n            ")])}):t._e()],2)}))],1)])])},i=[],o=s("b047c"),a=s.n(o),r={props:{menu:{type:Object,default:function(){return{items:[]}}},fixed:{type:Boolean,default:!1}},data:function(){return{active:!1,onResize:null,isMobileView:!1,shortTitle:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SHORT_TITLE}},mounted:function(){this.onResize=a()(this.adapt,150,{maxWait:1e3}),window.addEventListener("resize",this.onResize),this.adapt()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{closeMenuOnMobile:function(){var t=this;this.active&&(this.active=!1,document.body.style.removeProperty("overflow"),this.$refs.menu.classList.remove("is-active"),setTimeout(function(){t.$refs.menu.classList.remove("is-animating")},330))},openMenuOnMobile:function(){this.active||(this.active=!0,document.body.style.setProperty("overflow","hidden"),this.$refs.menu.classList.add("is-animating","is-active"))},adapt:function(){window.innerWidth<769?(this.isMobileView=!0,this.fixed&&(this.$refs.menu.classList.remove("fixed"),document.querySelector("#app").classList.remove("has-fixed-side-nav"))):(this.isMobileView=!1,this.fixed&&(this.$refs.menu.classList.add("fixed"),document.querySelector("#app").classList.add("has-fixed-side-nav")))},itemClicked:function(t,e){t.children||(this.isMobileView&&this.closeMenuOnMobile(),this.$emit("item-click",t,e))}}},l=r,c=s("2877"),u=Object(c["a"])(l,n,i,!1,null,null,null);u.options.__file="SideNav.vue";e["default"]=u.exports},ccc2:function(t,e,s){var n={"./Collapse.vue":"f48b","./CollapseItem.vue":"0ed9","./GlobalLoading.vue":"96db","./HeroHeader.vue":"11d3","./IFooter.vue":"608e","./ISwitch.vue":"0db3","./Icon.vue":"cdae","./Loading.vue":"3a5e","./Modal.vue":"714b","./Navigator.vue":"4c60","./SideNav.vue":"99b8","./Tooltip.vue":"1f24","./datatable/Datatable.vue":"ff6a","./datatable/TableBody.vue":"24aa","./datatable/TableColumn.vue":"56ea"};function i(t){var e=o(t);return s(e)}function o(t){var e=n[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id="ccc2"},cdae:function(t,e,s){"use strict";s.r(e);var n=function(t,e){var s=e._c;return s("span",{class:"icon is-"+e.props.size+" "+(e.data.staticClass||"")},[s("i",{class:"fa fa-"+e.props.icon+" is-"+e.props.size})])},i=[],o={props:{icon:{type:String,required:!0},size:{type:String,default:"normal"}}},a=o,r=s("2877"),l=Object(r["a"])(a,n,i,!0,null,null,null);l.options.__file="Icon.vue";e["default"]=l.exports},f48b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"collapse"},[t._t("default")],2)},i=[],o=(s("6762"),s("2fdb"),{componentName:"Collapse",props:{accordion:Boolean},provide:function(){return{collapse:this}},data:function(){return{activeItems:[]}},created:function(){this.$on("collapse-item-clicked",this.handleItemClick)},methods:{handleItemClick:function(t){if(this.accordion){var e=this.activeItems.includes(t.name)?[]:[t.name];this.setActiveItems(e)}else{var s=this.activeItems.slice(0),n=s.indexOf(t.name);n>-1?s.splice(n,1):s.push(t.name),this.setActiveItems(s)}},setActiveItems:function(t){this.activeItems=t}}}),a=o,r=s("2877"),l=Object(r["a"])(a,n,i,!1,null,null,null);l.options.__file="Collapse.vue";e["default"]=l.exports},ff6a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"datatable"},[s("div",{staticStyle:{display:"none"}},[t._t("default")],2),s("div",{staticClass:"datatable-header"},[s("div",{staticClass:"datatable-header__content"},[t._t("header",[t._v(t._s(t.title))])],2),t.showTopPagination?s("div",{staticClass:"pagination is-hidden-mobile"},[s("span",[t._v("Rows per page: ")]),s("div",{staticClass:"select is-small"},[s("select",{on:{change:t.perPageChanged}},t._l(t.perPageOptions,function(e,n){return s("option",{key:n,domProps:{value:e,selected:e===t.currentPerPage}},[t._v("\n              "+t._s(-1===e?"All":e)+"\n          ")])}))]),s("div",{staticClass:"pagination__itemcount",class:{hide:0===t.processedRows.length}},[s("span",[t._v(t._s(t.pageStart+1)+" - ")]),s("span",[t._v(t._s(t.pageEnd+1))]),s("span",[t._v(" of "+t._s(t.processedRows.length))])]),s("div",{staticClass:"pagination__nav"},[s("a",{staticClass:"pagination-button prev",on:{click:t.prevPage}},[s("icon",{attrs:{icon:"chevron-left",size:"small"}})],1),s("a",{staticClass:"pagination-button next",on:{click:t.nextPage}},[s("icon",{attrs:{icon:"chevron-right",size:"small"}})],1)])]):t._e(),t.searchable?s("div",{staticClass:"datatable-header__search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"input",attrs:{type:"text",placeholder:"search"},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),s("icon",{staticClass:"is-right",attrs:{icon:"search",size:"small"}})],1):t._e()]),s("div",{staticClass:"datatable-content"},[s("table",{staticClass:"table is-fullwidth"},[s("thead",[s("tr",t._l(t.columns,function(e,n){return s("td",{key:n,class:(e.sortable?"sortable ":"")+(t.sortedColumn===n?"desc"===t.sortType?"sorting-desc":"sorting-asc":""),style:{width:e.width||"auto"},on:{click:function(e){t.setSortedColumn(n)}}},[t._v("\n            "+t._s(e.display)+"\n            "),e.sortable?s("icon",{attrs:{icon:"chevron-down",size:"tiny"}}):t._e()],1)}))]),t.processedRows.length?s("table-body",{attrs:{columns:t.columns,data:t.paginated}}):s("tbody",[s("tr",[s("td",{staticClass:"has-text-centered",attrs:{colspan:t.columns.length}},[t._v("No "+t._s(t.title))])])])],1)]),s("div",{staticClass:"datatable-footer"},[t.showBottomPagination?s("div",{staticClass:"pagination"},[s("span",[t._v("Rows per page: ")]),s("div",{staticClass:"select is-small"},[s("select",{on:{change:t.perPageChanged}},t._l(t.perPageOptions,function(e,n){return s("option",{key:n,domProps:{value:e,selected:e===t.currentPerPage}},[t._v("\n              "+t._s(-1===e?"All":e)+"\n          ")])}))]),s("div",{staticClass:"pagination__itemcount",class:{hide:0===t.processedRows.length}},[s("span",[t._v(t._s(t.pageStart+1)+" - ")]),s("span",[t._v(t._s(t.pageEnd+1))]),s("span",[t._v(" of "+t._s(t.processedRows.length))])]),s("div",{staticClass:"pagination__nav"},[s("a",{staticClass:"pagination-button prev",on:{click:t.prevPage}},[s("icon",{attrs:{icon:"chevron-left",size:"small"}})],1),s("a",{staticClass:"pagination-button next",on:{click:t.nextPage}},[s("icon",{attrs:{icon:"chevron-right",size:"small"}})],1)])]):t._e()])])},i=[],o=(s("28a5"),s("7cdf"),s("ac6a"),s("456d"),s("386d"),s("55dd"),s("c5f6"),s("ffe7")),a=s.n(o),r=s("0644"),l=s.n(r),c=s("0cd6"),u={props:{title:{required:!0,type:String},data:{required:!0,type:Array},perPage:{type:Array,default:function(){return[10,20,30,40,50]}},defaultPerPage:{type:Number,default:10},paginate:{type:Boolean,default:!0},paginationPlace:{type:String,default:"bottom"},searchable:{type:Boolean,default:!0}},data:function(){return{currentPage:1,currentPerPage:this.defaultPerPage,sortedColumn:-1,sortType:"desc",searchInput:"",columns:[],tableData:[]}},provide:function(){return{table:this}},created:function(){this.tableData=l()(this.data)},computed:{showTopPagination:function(){return this.paginate&&("both"===this.paginationPlace||"top"===this.paginationPlace)},showBottomPagination:function(){return this.paginate&&("both"===this.paginationPlace||"bottom"===this.paginationPlace)},perPageOptions:function(){var t=this.perPage||[10,20,30,40,50];return t=t.map(function(t){return parseInt(t,10)}),t.sort(function(t,e){return t-e}),t.push(-1),t},pageStart:function(){return(this.currentPage-1)*this.currentPerPage},pageEnd:function(){return-1===this.currentPerPage?this.processedRows.length-1:Math.min(this.processedRows.length,this.currentPerPage*this.currentPage)-1},paginated:function(){var t=this.processedRows;return this.paginate&&(t=t.slice(this.pageStart,this.pageEnd+1)),t},processedRows:function(){if(0===this.data.length)return[];var t=this.tableData;return this.searchable&&this.searchInput&&(t=this.search(this.searchInput,t)),-1!==this.sortedColumn&&(t=this.sort(this.sortedColumn,t)),t}},methods:{search:function(t,e){if(!Array.isArray(e)||0===e.length)return e;var s={keys:Object.keys(Object(c["head"])(e)),shouldSort:!1,minMatchCharLength:2,threshold:0,distance:0,location:0,getFn:function(t,e){return Number.isInteger(t[e])?JSON.stringify(t[e]):t[e]}};return new a.a(e,s).search(t)},perPageChanged:function(t){this.currentPerPage=parseInt(t.target.value,10),this.currentPage=1},prevPage:function(){this.currentPage>1&&(this.currentPage-=1)},nextPage:function(){-1!==this.currentPerPage&&this.processedRows.length>this.currentPerPage*this.currentPage&&(this.currentPage+=1)},getColumnData:function(t,e){return"function"===typeof e?e(t):"string"===typeof e?this.dig(t,e):""},dig:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!s)return t[e];var n=t,i=e.split(".");return i.forEach(function(t){void 0!==n&&(n=n[t])}),n},setSortedColumn:function(t){this.sortedColumn===t?this.sortType="desc"===this.sortType?"asc":"desc":(this.sortedColumn=t,this.sortType="desc")},sort:function(t,e){var s=this;if(!Array.isArray(e)||0===e.length||-1===t)return e;var n=this.columns[t];if(!n||!this.columns[t].sortable)return e;var i=n.sortMethod,o="desc"===this.sortType?-1:1;return i||(i=function(t,e){var i=function(t){var e=s.getColumnData(t,n.field);return"string"===typeof e&&(e=e.toLowerCase(),n.numeric&&(e=-1!==e.indexOf(".")?parseFloat(e):parseInt(e,10))),e},o=i(t),a=i(e);return o<a?-1:1}),this.tableData.map(function(t,e){return{value:t,index:e}}).sort(function(t,e){var s=i(t.value,e.value);return s||(s=t.index-e.index),s*o}).map(function(t){return t.value})}},watch:{data:function(t){this.tableData=l()(t)},currentPerPage:function(){this.currentPage=1}}},d=u,h=s("2877"),m=Object(h["a"])(d,n,i,!1,null,null,null);m.options.__file="Datatable.vue";e["default"]=m.exports}});