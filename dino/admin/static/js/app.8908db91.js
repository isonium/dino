(function(t){function e(e){for(var n,o,r=e[0],l=e[1],c=e[2],d=0,h=[];d<r.length;d++)o=r[d],a[o]&&h.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,r=1;r<s.length;r++){var l=s[r];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0fb9":function(t,e,s){"use strict";var n=s("58e3"),a=s.n(n);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isGlobalLoadingShowing,expression:"isGlobalLoadingShowing"}],staticClass:"global-loading"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoadingMuskShowing,expression:"isLoadingMuskShowing"}],staticClass:"global-loading__musk"}),s("loading",{staticClass:"global-loading__loading",attrs:{size:"3rem"}})],1),s("navigator"),s("main",{staticClass:"container is-fullhd",class:{home:t.isHome}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("router-view")],1)],1),s("i-footer")],1)},i=[],o=s("c93e"),r=s("2f62"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-wrapper",style:{width:t.size,height:t.size}},[s("svg",{staticClass:"triangle-loading",attrs:{viewBox:"0 0 100 100"}},[s("path",{attrs:{d:"M 50,16 L 96,96","stroke-width":"8","fill-opacity":"0","stroke-dasharray":"100","stroke-linecap":"round","stroke-linejoin":"round"}}),s("path",{attrs:{id:t.bottomID,d:"M 96,96 L 4,96","stroke-width":"8","fill-opacity":"0","stroke-dasharray":"100","stroke-linecap":"round","stroke-linejoin":"round"}}),s("path",{attrs:{d:"M 4,96 L 50,16","stroke-width":"8","fill-opacity":"0","stroke-dasharray":"100","stroke-linecap":"round","stroke-linejoin":"round"}}),s("animate",{attrs:{attributeName:"stroke-dashoffset",dur:"1.5s",d:"fill",repeatCount:"indefinite",keyTimes:"0; 0.6; 0.6; 0.8;1",values:"100; 0; 190; 108; 108"}}),s("animate",{attrs:{"xlink:href":"#"+t.bottomID,attributeName:"stroke-dashoffset",dur:"1.5s",d:"fill",repeatCount:"indefinite",keyTimes:"0; 0.6; 0.6; 0.8;1",values:"100; 0; 190; 109; 109"}})])])},c=[];s("6b54");function u(){return Math.random().toString().substring(2)}var d={props:{size:{type:String,default:"2rem"}},data:function(){return{bottomID:"bottom-".concat(u())}}},h=d,m=s("2877"),p=Object(m["a"])(h,l,c,!1,null,null,null);p.options.__file="Loading.vue";var f=p.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{class:{"has-fixed-aside":t.hasFixedAside}},[s("hero",{attrs:{menu:t.menu,fixed:t.hasFixedAside},on:{"item-click":t.tryNavigate}}),s("side-nav",{attrs:{menu:t.menu,fixed:t.hasFixedAside},on:{"item-click":t.tryNavigate}})],1)},g=[],C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"hero-header",class:{snap:t.isOverThreshold,"tall-header":t.isTallHeader}},[s("div",{staticClass:"header-content container"},[s("div",{staticClass:"header-content__logo-large",class:{hide:!t.isTallHeader}},[s("p",{staticClass:"is-size-2"},[t._v("Dino Admin "),s("span",{staticClass:"is-size-5"},[t._v(t._s(t.env))])])]),s("div",{staticClass:"header-content__logo",class:{transparent:t.isTallHeader&&!t.isOverThreshold},on:{click:function(e){t.itemClicked({name:"home",id:1})}}},[t._v("\n         Dino Admin - "+t._s(t.env)+"\n    ")]),s("div",{ref:"menu",staticClass:"header-content__menu"},t._l(t.menu.items,function(e){return s("div",{key:e.label,staticClass:"menu-item",class:{"is-active":t.activeId===e.id}},[s("div",{staticClass:"menu-item__label",class:{"has-children":e.children},on:{click:function(s){t.itemClicked(e)}}},[t._v("\n          "+t._s(e.label)+"\n        ")]),e.children?s("ul",{staticClass:"menu-item__children"},t._l(e.children,function(n){return s("li",{key:n.label,staticClass:"menu-item__child-item",on:{click:function(s){t.itemClicked(n,e)}}},[t._v(t._s(n.label))])})):t._e()])}))])])},w=[],b=(s("a481"),s("ac6a"),{});function _(t){return"string"===typeof t?"True"===t:"boolean"===typeof t&&t}document.querySelectorAll("meta").forEach(function(t){t.name&&(b[t.name]=t.content)}),b.base="/".concat(b.base,"/").replace(/\/+/g,"/");var y=_(b.floatingmenu)&&"/static/js/rhum.js",O=Object(o["a"])({serviceName:"DinoAdmin",servicesBaseAPI:"/sso-oauth/rest/v1/oauth",rhum:y},b),k={props:{menu:{type:Object,default:function(){return{items:[]}}},fixed:{type:Boolean,default:!1}},data:function(){return{scrollY:0,activeId:0}},computed:{isOverThreshold:function(){return this.scrollY>128},isHome:function(){return this.$route&&"home"===this.$route.name},isTallHeader:function(){return this.isHome&&!this.fixed},env:function(){return O.environment}},mounted:function(){this.listeningOnScroll()},methods:{listeningOnScroll:function(){window.addEventListener("scroll",this.manipulateScrollY)},manipulateScrollY:function(){this.scrollY=window.scrollY},itemClicked:function(t,e){this.activeId=e?e.id:t.id,this.$emit("item-click",t,e)}}},$=k,M=Object(m["a"])($,C,w,!1,null,null,null);M.options.__file="HeroHeader.vue";var x=M.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{ref:"menu",staticClass:"aside",on:{click:t.closeMenuOnMobile}},[s("a",{staticClass:"aside__burger",on:{click:function(e){return e.stopPropagation(),t.openMenuOnMobile(e)}}},[t._m(0)]),s("nav",{on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"aside__logo"}),s("div",{staticClass:"aside__nav-item"},[s("collapse",{attrs:{accordion:""}},t._l(t.menu.items,function(e){return s("collapse-item",{key:e.label,attrs:{title:e.label},on:{click:function(s){t.itemClicked(e)}}},[e.children?t._l(e.children,function(n){return s("a",{key:n.label,staticClass:"nav-item__subitem",on:{click:function(s){t.itemClicked(n,e)}}},[t._v("\n              "+t._s(n.label)+"\n            ")])}):t._e()],2)}))],1)])])},S=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-bars"})])}],N=s("b047c"),D=s.n(N),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"collapse"},[t._t("default")],2)},R=[],A=(s("6762"),s("2fdb"),{componentName:"Collapse",props:{accordion:Boolean},provide:function(){return{collapse:this}},data:function(){return{activeItems:[]}},created:function(){this.$on("collapse-item-clicked",this.handleItemClick)},methods:{handleItemClick:function(t){if(this.accordion){var e=this.activeItems.includes(t.name)?[]:[t.name];this.setActiveItems(e)}else{var s=this.activeItems.slice(0),n=s.indexOf(t.name);n>-1?this.activeItems.splice(n,1):s.push(t.name),this.setActiveItems(s)}},setActiveItems:function(t){this.activeItems=t}}}),I=A,U=Object(m["a"])(I,E,R,!1,null,null,null);U.options.__file="Collapse.vue";var T=U.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"collapse-item",class:{"is-active":t.isActive}},[s("header",{staticClass:"collapse-item__header",on:{click:t.handleHeaderClick}},[s("p",[t._v(t._s(t.title))]),t.hasChildren?s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-chevron-right"})]):t._e()]),s("transition",{on:{beforeEnter:t.beforeEnter,enter:t.enter,afterEnter:t.afterEnter,beforeLeave:t.beforeLeave,leave:t.leave,afterLeave:t.afterLeave}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],ref:"body",staticClass:"collapse-item__body"},[t._t("default")],2)])],1)},L=[],B=s("8afe"),F=(s("c5f6"),{props:{selected:Boolean,title:{type:String,required:!0},name:{type:[String,Number],default:function(){return this._uid}}},inject:["collapse"],computed:{isActive:function(){return this.collapse.activeItems.includes(this.name)},hasChildren:function(){return this.$slots.default&&0!==this.$slots.default.length}},mounted:function(){this.selected&&this.handleHeaderClick()},methods:{dispatch:function(t,e,s){var n,a=this.$parent||this.$root,i=a.$options.componentName;while(a&&(!i||i!==t))a=a.$parent,a&&(i=a.$options.componentName);a&&(n=a).$emit.apply(n,Object(B["a"])([e].concat(s)))},handleHeaderClick:function(){this.dispatch("Collapse","collapse-item-clicked",this),this.$emit("click")},beforeEnter:function(t){t.style.setProperty("height","0")},enter:function(t){t.style.setProperty("height","".concat(t.scrollHeight,"px"))},afterEnter:function(t){t.style.setProperty("height","")},beforeLeave:function(t){t.style.setProperty("height","".concat(t.scrollHeight,"px"))},leave:function(t){0!==t.scrollHeight&&t.style.setProperty("height","0")},afterLeave:function(t){t.style.setProperty("height","")}}}),G=F,H=Object(m["a"])(G,j,L,!1,null,null,null);H.options.__file="CollapseItem.vue";var z=H.exports,V={components:{Collapse:T,CollapseItem:z},props:{menu:{type:Object,default:function(){return{items:[]}}},fixed:{type:Boolean,default:!1}},data:function(){return{active:!1,onResize:null,isMobileView:!1}},mounted:function(){this.onResize=D()(this.adapt,150,{maxWait:1e3}),window.addEventListener("resize",this.onResize),this.adapt()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{closeMenuOnMobile:function(){var t=this;this.active&&(this.active=!1,document.body.style.removeProperty("overflow"),this.$refs.menu.classList.remove("is-active"),setTimeout(function(){t.$refs.menu.classList.remove("is-animating")},330))},openMenuOnMobile:function(){this.active||(this.active=!0,document.body.style.setProperty("overflow","hidden"),this.$refs.menu.classList.add("is-animating","is-active"))},adapt:function(){window.innerWidth<769?(this.isMobileView=!0,this.fixed&&(this.$refs.menu.classList.remove("fixed"),document.querySelector("#app").classList.remove("has-fixed-side-nav"))):(this.isMobileView=!1,this.fixed&&(this.$refs.menu.classList.add("fixed"),document.querySelector("#app").classList.add("has-fixed-side-nav")))},itemClicked:function(t,e){t.children||(this.isMobileView&&this.closeMenuOnMobile(),this.$emit("item-click",t,e))}}},Y=V,q=Object(m["a"])(Y,P,S,!1,null,null,null);q.options.__file="SideNav.vue";var W=q.exports,K={items:[{id:1,label:"Chat",children:[{name:"home",label:"Channels"},{name:"user",label:"Users"},{name:"ban",label:"Banned Users"},{name:"blacklist",label:"Blocked Words"},{name:"history",label:"History"},{name:"spam",label:"Spam"}]},{id:2,label:"Notification",children:[{name:"broadcast",label:"Broadcast"}]}]},J={components:{Hero:x,SideNav:W},data:function(){return{menu:K,hasFixedAside:!1}},methods:{tryNavigate:function(t,e){t.link?window.location.href=t.link:(this.activeId=e?e.id:t.id,this.$router.push({name:t.name,params:t.params}))}}},Q=J,X=Object(m["a"])(Q,v,g,!1,null,null,null);X.options.__file="Navigator.vue";var Z=X.exports,tt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},et=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"content has-text-centered footer"},[s("p",[s("strong",[t._v("Unified Admin")]),t._v(" by TNC Service Team")])])}],st={},nt=st,at=Object(m["a"])(nt,tt,et,!1,null,null,null);at.options.__file="Footer.vue";var it=at.exports,ot="AUTHENTICATE",rt="SHOW_GLOBAL_LOADING",lt="HIDE_GLOBAL_LOADING",ct="FETCH_CHANNELS",ut="ADD_CHANNEL",dt="FETCH_CHANNEL_INFO",ht="DELETE_CHANNEL",mt="DELETE_CHANNEL_OWNER",pt="ADD_CHANNEL_OWNER",ft="DELETE_CHANNEL_ADMIN",vt="ADD_CHANNEL_ADMIN",gt="UPDATE_CHANNEL_NAME",Ct="UPDATE_CHANNEL_ORDER",wt="DELETE_CHANNEL_ACL",bt="ADD_CHANNEL_ACL",_t="UPDATE_CHANNEL_ACL",yt="FETCH_CHANNEL_ACL_TYPES",Ot="ADD_ROOM",kt="FETCH_ROOMS",$t="FETCH_ROOM_INFO",Mt="UPDATE_ROOM_NAME",xt="UPDATE_ROOM_ORDER",Pt="DELETE_ROOM",St="ADD_ROOM_OWNER",Nt="DELETE_ROOM_OWNER",Dt="ADD_ROOM_MODERATOR",Et="DELETE_ROOM_MODERATOR",Rt="ADD_ROOM_ACL",At="DELETE_ROOM_ACL",It="UPDATE_ROOM_ACL",Ut="TOGGLE_DEFAULT_ROOM",Tt="TOGGLE_ADMIN_ROOM",jt="TOGGLE_TEMPORARY_ROOM",Lt="FETCH_USERS_IN_ROOM",Bt="KICK_USER",Ft="BAN_USER",Gt="FETCH_SUPERUSERS",Ht="SEARCH_FOR_USERS",zt="SET_SUPERUSER",Vt="UNSET_SUPERUSER",Yt="CREATE_SUPERUSER",qt="FETCH_BANNED_USERS",Wt="REMOVE_BANNED_USER",Kt="FETCH_BLACKLIST",Jt="CREATE_BLOCKED_WORDS",Qt="REMOVE_BLOCKED_WORD",Xt="SEARCH_HISTORY",Zt="TOGGLE_MESSAGE_DELETE",te="SEND_BROADCAST",ee="FETCH_ACLS",se="SEARCH_SPAMS",ne="FETCH_LATEST_SPAMS",ae="GET_SPAM",ie="TOGGLE_SPAM_CORRECTION",oe="FETCH_SPAM_SETTINGS",re="UPDATE_SPAM_SETTINGS",le={methods:{showGlobalLoading:function(t){this.$store.dispatch(rt,t)},hideGlobalLoading:function(){this.$store.dispatch(lt)}}};s("28a5");function ce(t){return Array.isArray(t)?t[0]:null}function ue(t){var e=ce(t.split(","));return e&&e.includes("=")?e.split("=")[1]:null}function de(t){var e=[];return t.forEach(function(t){var s=ue(t.name);s&&e.push({name:s,children:de(t.children),icon:t.description.iconPath,image:t.description.imgPath,url:t.urlStr})}),e}function he(t){return new Promise(function(e,s){var n=document.createElement("script");n.src=t,n.async=!0,n.defer=!0,n.addEventListener("load",e);try{document.body.appendChild(n)}catch(t){s(t)}})}var me={components:{Loading:f,Navigator:Z,IFooter:it},mixins:[le],computed:Object(o["a"])({},Object(r["b"])(["isGlobalLoadingShowing","isLoadingMuskShowing"]),{isHome:function(){return"home"===this.$route.name}}),mounted:function(){this.installFloatingMenu()},methods:{fetchServices:function(){return this.$store.dispatch(ot)},installFloatingMenu:function(){var t=this;if(O.rhum){var e=function(){t.$dialog.show("Fail to install floating menu.")};he(O.rhum).then(function(){window.Rhum&&t.fetchServices().then(function(t){window.Rhum.install(O.serviceName,t)}).catch(e)}).catch(e)}}}},pe=me,fe=Object(m["a"])(pe,a,i,!1,null,null,null);fe.options.__file="App.vue";var ve,ge=fe.exports,Ce=s("a322"),we=s("bc3a"),be=s.n(we),_e={services:[],user:""},ye={services:function(t){return t.services}},Oe=Object(Ce["a"])({},ot,function(t){var e=t.state;return be.a.get("".concat(O.servicesBaseAPI,"/auth/services")).then(function(t){var s=t.data;return e.services=de(s.scopes),e.user=s.username,e.services})}),ke={state:_e,getters:ye,actions:Oe},$e="UPDATE_GLOBAL_LOADING_STATUS",Me={isGlobalLoadingShowing:!1,isLoadingMuskShowing:!1},xe={isGlobalLoadingShowing:function(t){return t.isGlobalLoadingShowing},isLoadingMuskShowing:function(t){return t.isLoadingMuskShowing}},Pe=Object(Ce["a"])({},$e,function(t,e){var s=e.status,n=e.withMusk;t.isGlobalLoadingShowing=s,t.isLoadingMuskShowing=n||!1}),Se=(ve={},Object(Ce["a"])(ve,rt,function(t,e){var s=t.commit;s($e,{status:!0,withMusk:e})}),Object(Ce["a"])(ve,lt,function(t){var e=t.commit;e($e,{status:!1})}),ve),Ne={state:Me,getters:xe,mutations:Pe,actions:Se},De=be.a.create({baseURL:"".concat(O.base,"/api/").replace("//","/"),headers:{"Content-type":"Application/json"}});De.interceptors.response.use(function(t){return t.status>=200&&t.status<300?t.data.status_code>=200&&t.data.status_code<300?t.data.data:Promise.reject(t.data.message):Promise.reject(t)},function(t){return Promise.reject(t)});var Ee,Re,Ae,Ie,Ue,Te=De,je=(Ee={},Object(Ce["a"])(Ee,ct,function(){return Te.get("/channels")}),Object(Ce["a"])(Ee,ut,function(t,e){return Te.post("/channels",e)}),Object(Ce["a"])(Ee,dt,function(t,e){return Te.get("/channels/".concat(e))}),Object(Ce["a"])(Ee,ht,function(t,e){return Te.delete("/channels/".concat(e))}),Object(Ce["a"])(Ee,gt,function(t,e){var s=e.channel,n=e.name;return Te.put("/channels/".concat(s,"/name"),{name:n})}),Object(Ce["a"])(Ee,Ct,function(t,e){var s=e.channel,n=e.order;return Te.put("/channels/".concat(s,"/order"),{order:n})}),Object(Ce["a"])(Ee,vt,function(t,e){var s=e.channel,n=e.admin;return Te.post("/channels/".concat(s,"/admins"),{admin:n})}),Object(Ce["a"])(Ee,ft,function(t,e){var s=e.channel,n=e.admin;return Te.delete("/channels/".concat(s,"/admins/").concat(n))}),Object(Ce["a"])(Ee,pt,function(t,e){var s=e.channel,n=e.owner;return Te.post("/channels/".concat(s,"/owners"),{owner:n})}),Object(Ce["a"])(Ee,mt,function(t,e){var s=e.channel,n=e.owner;return Te.delete("/channels/".concat(s,"/owners/").concat(n))}),Object(Ce["a"])(Ee,wt,function(t,e){var s=e.channel,n=e.action,a=e.type;return Te.delete("/channels/".concat(s,"/acls/").concat(n,"/").concat(a))}),Object(Ce["a"])(Ee,bt,function(t,e){var s=e.channel,n=e.action,a=e.type,i=e.value;return Te.post("/channels/".concat(s,"/acls"),{action:n,type:a,value:i})}),Object(Ce["a"])(Ee,_t,function(t,e){var s=e.channel,n=e.action,a=e.type,i=e.value;return Te.put("/channels/".concat(s,"/acls/").concat(n,"/").concat(a),{value:i})}),Object(Ce["a"])(Ee,yt,function(t,e){return Te.get("/acls/channel/actions/".concat(e,"/types"))}),Ee),Le={actions:je},Be=(Re={},Object(Ce["a"])(Re,kt,function(t,e){return Te.get("/channels/".concat(e,"/rooms"))}),Object(Ce["a"])(Re,Ot,function(t,e){var s=e.channel,n=e.room;return Te.post("/channels/".concat(s,"/rooms"),n)}),Object(Ce["a"])(Re,$t,function(t,e){var s=e.channel,n=e.room;return Te.get("/channels/".concat(s,"/rooms/").concat(n))}),Object(Ce["a"])(Re,Mt,function(t,e){var s=e.channel,n=e.room,a=e.name;return Te.put("/channels/".concat(s,"/rooms/").concat(n,"/name"),{name:a})}),Object(Ce["a"])(Re,xt,function(t,e){var s=e.room,n=e.order;return Te.put("/rooms/".concat(s,"/order"),{order:n})}),Object(Ce["a"])(Re,Pt,function(t,e){var s=e.channel,n=e.room;return Te.delete("/channels/".concat(s,"/rooms/").concat(n))}),Object(Ce["a"])(Re,St,function(t,e){var s=e.room,n=e.owner;return Te.post("/rooms/".concat(s,"/owners"),{owner:n})}),Object(Ce["a"])(Re,Nt,function(t,e){var s=e.room,n=e.owner;return Te.delete("/rooms/".concat(s,"/owners/").concat(n))}),Object(Ce["a"])(Re,Dt,function(t,e){var s=e.room,n=e.moderator;return Te.post("/rooms/".concat(s,"/moderators"),{moderator:n})}),Object(Ce["a"])(Re,Et,function(t,e){var s=e.room,n=e.moderator;return Te.delete("/rooms/".concat(s,"/moderators/").concat(n))}),Object(Ce["a"])(Re,At,function(t,e){var s=e.room,n=e.action,a=e.type;return Te.delete("/rooms/".concat(s,"/acls/").concat(n,"/").concat(a))}),Object(Ce["a"])(Re,Rt,function(t,e){var s=e.room,n=e.action,a=e.type,i=e.value;return Te.post("/rooms/".concat(s,"/acls"),{action:n,type:a,value:i})}),Object(Ce["a"])(Re,It,function(t,e){var s=e.channel,n=e.room,a=e.action,i=e.type,o=e.value;return Te.put("/channels/".concat(s,"/rooms/").concat(n,"/acls/").concat(a,"/").concat(i),{value:o})}),Object(Ce["a"])(Re,Ut,function(t,e){var s=e.room,n=e.status;return n?Te.put("/rooms/".concat(s,"/set-default")):Te.put("/rooms/".concat(s,"/unset-default"))}),Object(Ce["a"])(Re,jt,function(t,e){var s=e.room,n=e.status;return n?Te.put("/rooms/".concat(s,"/set-ephemeral")):Te.put("/rooms/".concat(s,"/unset-ephemeral"))}),Object(Ce["a"])(Re,Tt,function(t,e){var s=e.room,n=e.status;return n?Te.put("/rooms/".concat(s,"/set-admin")):Te.put("/rooms/".concat(s,"/unset-admin"))}),Re),Fe={actions:Be},Ge=(Ae={},Object(Ce["a"])(Ae,Lt,function(t,e){return Te.get("/rooms/".concat(e,"/users"))}),Object(Ce["a"])(Ae,Bt,function(t,e){var s=e.room,n=e.user;return Te.post("/rooms/".concat(s,"/users/").concat(n,"/kick"))}),Object(Ce["a"])(Ae,Ft,function(t,e){return Te.post("/bans",e)}),Object(Ce["a"])(Ae,Gt,function(){return Te.get("/super-users")}),Object(Ce["a"])(Ae,Ht,function(t,e){return Te.get("/users/search/".concat(e))}),Object(Ce["a"])(Ae,zt,function(t,e){return Te.post("/super-users/".concat(e))}),Object(Ce["a"])(Ae,Vt,function(t,e){return Te.delete("/super-users/".concat(e))}),Object(Ce["a"])(Ae,Yt,function(t,e){return Te.post("/super-users",e)}),Object(Ce["a"])(Ae,qt,function(){return Te.get("/bans")}),Object(Ce["a"])(Ae,Wt,function(t,e){var s=e.user,n=e.target,a=e.targetUUID;return Te.post("/bans/".concat(s,"/delete"),{target:n,target_uuid:a})}),Ae),He={actions:Ge},ze=(Ie={},Object(Ce["a"])(Ie,Kt,function(){return Te.get("/blacklist")}),Object(Ce["a"])(Ie,Jt,function(t,e){return Te.post("/blacklist",{words:e})}),Object(Ce["a"])(Ie,Qt,function(t,e){return Te.delete("/blacklist/".concat(e))}),Object(Ce["a"])(Ie,Xt,function(t,e){return Te.post("/history",e)}),Object(Ce["a"])(Ie,Zt,function(t,e){var s=e.message,n=e.status;return n?Te.delete("/history/".concat(s)):Te.put("/history/".concat(s,"/undelete"))}),Object(Ce["a"])(Ie,te,function(t,e){return Te.post("/broadcast",e)}),Ie),Ve={actions:ze},Ye=(s("456d"),{channel:{},room:{}}),qe={channelActions:function(t){return Object.keys(t.channel)},channelTypes:function(t){return t.channel},roomActions:function(t){return Object.keys(t.room)},roomTypes:function(t){return t.room}},We=Object(Ce["a"])({},ee,function(t){var e=t.state;Te.get("/acls").then(function(t){n["a"].set(e,"channel",t.channel),n["a"].set(e,"room",t.room)})}),Ke={state:Ye,actions:We,getters:qe},Je={actions:(Ue={},Object(Ce["a"])(Ue,ne,function(){return Te.get("/spam")}),Object(Ce["a"])(Ue,se,function(t,e){return Te.post("/spam/search",e)}),Object(Ce["a"])(Ue,ae,function(t,e){return Te.get("/spam/".concat(e))}),Object(Ce["a"])(Ue,ie,function(t,e){var s=e.id,n=e.status;return n?Te.post("/spam/".concat(s,"/correct")):Te.post("/spam/".concat(s,"/incorrect"))}),Object(Ce["a"])(Ue,oe,function(){return Te.get("/spam/settings")}),Object(Ce["a"])(Ue,re,function(t,e){return Te.post("/spam/settings",e)}),Ue)};n["a"].use(r["a"]);var Qe=new r["a"].Store({modules:{service:ke,loading:Ne,channel:Le,room:Fe,user:He,message:Ve,permission:Ke,spam:Je}}),Xe=s("8c4f"),Ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"Channels",data:t.channels}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v(" Channels\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newChannel.open=!0}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])])]),s("column",{attrs:{display:"Sort Order",field:"sort"}}),s("column",{attrs:{display:"name",field:"name"}}),s("column",{attrs:{display:"UUID",field:"uuid"}}),s("column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button is-info",on:{click:function(s){t.goToRooms(e.row)}}},[t._v("Rooms")]),s("a",{staticClass:"button",on:{click:function(s){t.editChannel(e.row)}}},[t._v("Edit")])])]}}])})],1),s("modal",{attrs:{active:t.newChannel.open,duration:300},on:{close:t.resetNewChannel}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.saveChannel(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Channel Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newChannel.name,expression:"newChannel.name"}],staticClass:"input",class:{"is-danger":t.channelFormNameError},attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newChannel.name},on:{input:function(e){e.target.composing||t.$set(t.newChannel,"name",e.target.value)}}})]),t.channelFormNameError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.channelFormNameError))]):t._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Owner UUID")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newChannel.owner,expression:"newChannel.owner"}],staticClass:"input",class:{"is-danger":t.channelFormOwnerError},attrs:{type:"text",placeholder:"Owner"},domProps:{value:t.newChannel.owner},on:{input:function(e){e.target.composing||t.$set(t.newChannel,"owner",e.target.value)}}})]),t.channelFormOwnerError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.channelFormOwnerError))]):t._e()]),s("div",{staticClass:"field is-grouped"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[t._v("Submit")])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-link",on:{click:function(e){t.newChannel.open=!1}}},[t._v("Cancel")])])])])])]),s("modal",{attrs:{active:t.modalOpen,"is-card":!0,duration:300},on:{close:t.onModalClose}},[t.selectedChannel?[s("header",{staticClass:"modal-card-head"},[s("div",{ref:"channelName",staticClass:"modal-card-title",on:{click:t.editChannelName}},[s("p",{staticClass:"name"},[t._v("\n            "+t._s(t.selectedChannel.name)+"\n            "),s("span",{staticClass:"icon is-small is-size-6 has-text-info"},[t.loading.name?s("i",{staticClass:"fa fa-refresh keep rotate"}):s("i",{staticClass:"fa fa-edit"})])]),s("span",{staticClass:"label uuid"},[t._v(t._s(t.selectedChannel.uuid))])]),s("div",{ref:"nameField",staticClass:"name-field field has-addons hide"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedChannel.name,expression:"selectedChannel.name"}],ref:"nameInput",staticClass:"input",attrs:{type:"text",name:"name"},domProps:{value:t.selectedChannel.name},on:{input:function(e){e.target.composing||t.$set(t.selectedChannel,"name",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.saveChannelName}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.toggleNameFieldVisibility}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),s("section",{staticClass:"modal-card-body"},[s("span",{staticClass:"label"},[t._v("Order: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedChannel.sort,expression:"selectedChannel.sort"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.selectedChannel.sort},on:{input:function(e){e.target.composing||t.$set(t.selectedChannel,"sort",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v("Owners: ")]),s("div",{staticClass:"tags"},[t._l(t.channelOwners,function(e){return s("tooltip",{key:e.id,staticClass:"tag is-medium",attrs:{content:"uuid: "+e.uuid+", name: "+e.name,position:"top"}},[t._v("\n            "+t._s(e.name)+"\n            "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteOwner(t.selectedChannel.uuid,e.uuid)}}})])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newOwner.status,expression:"!newOwner.status"}],staticClass:"adding tag is-medium",on:{click:t.showOwnerInput}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newOwner.status,expression:"newOwner.status"}],staticClass:"owner-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newOwner.uuid,expression:"newOwner.uuid"}],ref:"ownerInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newOwner.uuid},on:{input:function(e){e.target.composing||t.$set(t.newOwner,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addOwner}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newOwner.status=!1}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])])],2),s("span",{staticClass:"label"},[t._v("Admins: ")]),s("div",{staticClass:"tags"},[t._l(t.channelAdmins,function(e){return s("tooltip",{key:e.id,staticClass:"tag is-medium",attrs:{content:"uuid: "+e.uuid+", name: "+e.name,position:"top"}},[t._v("\n            "+t._s(e.name)+"\n            "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteAdmin(t.selectedChannel.uuid,e.uuid)}}})])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newAdmin.status,expression:"!newAdmin.status"}],staticClass:"adding tag is-medium",on:{click:t.showAdminInput}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newAdmin.status,expression:"newAdmin.status"}],staticClass:"admin-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newAdmin.uuid,expression:"newAdmin.uuid"}],ref:"adminInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newAdmin.uuid},on:{input:function(e){e.target.composing||t.$set(t.newAdmin,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addAdmin}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newAdmin.status=!1}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])])],2),s("span",{staticClass:"label"},[t._v("Permissions: ")]),s("div",{staticClass:"datatable-content"},[s("table",{staticClass:"table is-fullwidth"},[s("thead",[s("tr",[s("td",[t._v("Action")]),s("td",[t._v("Type")]),s("td",[t._v("Value")]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-default",on:{click:t.showPermissionInput}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])])])])]),s("tbody",[t._l(t.channelPermissions,function(e,n){return s("tr",{key:n},[s("td",[t._v(t._s(e.action))]),s("td",[t._v(t._s(e.type))]),s("td",[t._v(t._s(e.value))]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-danger",on:{click:function(s){t.deletePermission(t.selectedChannel.uuid,e,n)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])]),s("button",{staticClass:"button is-info",on:{click:function(s){t.editPermission(n,e)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-edit"})])])])])}),s("tr",{directives:[{name:"show",rawName:"v-show",value:t.newPermission.status,expression:"newPermission.status"}]},[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"actionSelector",attrs:{disabled:!t.newPermission.isNew},on:{change:function(e){t.selectAction(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Action")]),t._l(t.actions,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"typeSelector",attrs:{disabled:!t.newPermission.isNew||!t.newPermission.action},on:{change:function(e){t.selectType(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Type")]),t._l(t.selectedActionTypes,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPermission.value,expression:"newPermission.value"}],ref:"permissionInput",staticClass:"input",attrs:{type:"text",placeholder:"value"},domProps:{value:t.newPermission.value},on:{input:function(e){e.target.composing||t.$set(t.newPermission,"value",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.savePermission}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.resetNewPermission}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])])])])],2)])])]),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:t.updateOrder}},[t._v("Save")]),s("button",{staticClass:"button is-danger",on:{click:t.destroyChannel}},[t._v("Destroy")])])]:t._e()],2)],1)},ts=[],es=(s("f751"),s("8615"),s("20d6"),s("7514"),s("55dd"),s("4d4a")),ss=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"datatable"},[s("div",{staticStyle:{display:"none"}},[t._t("default")],2),s("div",{staticClass:"datatable-header"},[s("div",{staticClass:"datatable-header__content"},[t._t("header",[t._v(t._s(t.title))])],2),t.showTopPagination?s("div",{staticClass:"pagination is-hidden-mobile"},[s("span",[t._v("Rows per page: ")]),s("div",{staticClass:"select is-small"},[s("select",{on:{change:t.perPageChanged}},t._l(t.perPageOptions,function(e,n){return s("option",{key:n,domProps:{value:e,selected:e===t.currentPerPage}},[t._v("\n              "+t._s(-1===e?"All":e)+"\n          ")])}))]),s("div",{staticClass:"pagination__itemcount",class:{hide:0===t.processedRows.length}},[s("span",[t._v(t._s(t.pageStart+1)+" - ")]),s("span",[t._v(t._s(t.pageEnd+1))]),s("span",[t._v(" of "+t._s(t.processedRows.length))])]),s("div",{staticClass:"pagination__nav"},[s("a",{staticClass:"pagination-button prev",on:{click:t.prevPage}},[t._m(0)]),s("a",{staticClass:"pagination-button next",on:{click:t.nextPage}},[t._m(1)])])]):t._e(),t.searchable?s("div",{staticClass:"datatable-header__search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"input",attrs:{type:"text",placeholder:"search"},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),t._m(2)]):t._e()]),s("div",{staticClass:"datatable-content"},[s("table",{staticClass:"table is-fullwidth"},[s("thead",[s("tr",t._l(t.columns,function(e,n){return s("td",{key:n,class:(e.sortable?"sortable ":"")+(t.sortedColumn===n?"desc"===t.sortType?"sorting-desc":"sorting-asc":""),style:{width:e.width||"auto"},on:{click:function(e){t.setSortedColumn(n)}}},[t._v("\n            "+t._s(e.display)+"\n            "),e.sortable?s("span",{staticClass:"icon is-tiny"},[s("i",{staticClass:"fa fa-chevron-down"})]):t._e()])}))]),t.processedRows.length?s("table-body",{attrs:{columns:t.columns,data:t.paginated}}):s("tbody",[s("tr",[s("td",{staticClass:"has-text-centered",attrs:{colspan:t.columns.length}},[t._v("No "+t._s(t.title))])])])],1)]),s("div",{staticClass:"datatable-footer"},[t.showBottomPagination?s("div",{staticClass:"pagination"},[s("span",[t._v("Rows per page: ")]),s("div",{staticClass:"select is-small"},[s("select",{on:{change:t.perPageChanged}},t._l(t.perPageOptions,function(e,n){return s("option",{key:n,domProps:{value:e,selected:e===t.currentPerPage}},[t._v("\n              "+t._s(-1===e?"All":e)+"\n          ")])}))]),s("div",{staticClass:"pagination__itemcount",class:{hide:0===t.processedRows.length}},[s("span",[t._v(t._s(t.pageStart+1)+" - ")]),s("span",[t._v(t._s(t.pageEnd+1))]),s("span",[t._v(" of "+t._s(t.processedRows.length))])]),s("div",{staticClass:"pagination__nav"},[s("a",{staticClass:"pagination-button prev",on:{click:t.prevPage}},[t._m(3)]),s("a",{staticClass:"pagination-button next",on:{click:t.nextPage}},[t._m(4)])])]):t._e()])])},ns=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-chevron-left"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-chevron-right"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fa fa-search"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-chevron-left"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-chevron-right"})])}],as=(s("7cdf"),s("386d"),s("ffe7")),is=s.n(as),os=s("0644"),rs=s.n(os),ls=s("0cd6"),cs={props:{columns:[Array],data:[Array]},inject:["table"],render:function(t){var e=this;return t("tbody",[this._l(this.data,function(s,n){return[t("tr",{key:n,class:"row-".concat(n),on:{click:function(t){e.handleRowClick(t,s)}}},[e._l(e.columns,function(a,i){return a?t("td",{class:"column-".concat(i),on:{click:function(t){e.handleColumnClick(t,s,a)}}},[a.renderCell.call(e._renderProxy,t,{row:s,column:a,$index:n,cellIndex:i})]):""})])]})])},methods:{handleRowClick:function(t,e){this.table.$emit("row-click",e,t)},handleColumnClick:function(t,e,s){t.stopPropagation(),s.click(e,s,t)}}},us={components:{TableBody:cs},props:{title:{required:!0,type:String},data:{required:!0,type:Array},perPage:{type:Array,default:function(){return[10,20,30,40,50]}},defaultPerPage:{type:Number,default:10},paginate:{type:Boolean,default:!0},paginationPlace:{type:String,default:"bottom"},searchable:{type:Boolean,default:!0}},data:function(){return{currentPage:1,currentPerPage:this.defaultPerPage,sortedColumn:-1,sortType:"desc",searchInput:"",columns:[],tableData:[]}},provide:function(){return{table:this}},created:function(){this.tableData=rs()(this.data)},computed:{showTopPagination:function(){return this.paginate&&("both"===this.paginationPlace||"top"===this.paginationPlace)},showBottomPagination:function(){return this.paginate&&("both"===this.paginationPlace||"bottom"===this.paginationPlace)},perPageOptions:function(){var t=this.perPage||[10,20,30,40,50];return t=t.map(function(t){return parseInt(t,10)}),t.sort(function(t,e){return t-e}),t.push(-1),t},pageStart:function(){return(this.currentPage-1)*this.currentPerPage},pageEnd:function(){return-1===this.currentPerPage?this.processedRows.length-1:Math.min(this.processedRows.length,this.currentPerPage*this.currentPage)-1},paginated:function(){var t=this.processedRows;return this.paginate&&(t=t.slice(this.pageStart,this.pageEnd+1)),t},processedRows:function(){if(0===this.data.length)return[];var t=this.tableData;return this.searchable&&this.searchInput&&(t=this.search(this.searchInput,t)),-1!==this.sortedColumn&&(t=this.sort(this.sortedColumn,t)),t}},methods:{search:function(t,e){if(!Array.isArray(e)||0===e.length)return e;var s={keys:Object.keys(Object(ls["head"])(e)),shouldSort:!1,minMatchCharLength:2,threshold:0,distance:0,location:0,getFn:function(t,e){return Number.isInteger(t[e])?JSON.stringify(t[e]):t[e]}};return new is.a(e,s).search(t)},perPageChanged:function(t){this.currentPerPage=parseInt(t.target.value,10),this.currentPage=1},prevPage:function(){this.currentPage>1&&(this.currentPage-=1)},nextPage:function(){-1!==this.currentPerPage&&this.processedRows.length>this.currentPerPage*this.currentPage&&(this.currentPage+=1)},getColumnData:function(t,e){return"function"===typeof e?e(t):"string"===typeof e?this.dig(t,e):""},dig:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!s)return t[e];var n=t,a=e.split(".");return a.forEach(function(t){void 0!==n&&(n=n[t])}),n},setSortedColumn:function(t){this.sortedColumn===t?this.sortType="desc"===this.sortType?"asc":"desc":(this.sortedColumn=t,this.sortType="desc")},sort:function(t,e){var s=this;if(!Array.isArray(e)||0===e.length||-1===t)return e;var n=this.columns[t];if(!n||!this.columns[t].sortable)return e;var a=n.sortMethod,i="desc"===this.sortType?-1:1;return a||(a=function(t,e){var a=function(t){var e=s.getColumnData(t,n.field);return"string"===typeof e&&(e=e.toLowerCase(),n.numeric&&(e=-1!==e.indexOf(".")?parseFloat(e):parseInt(e,10))),e},i=a(t),o=a(e);return i<o?-1:1}),this.tableData.map(function(t,e){return{value:t,index:e}}).sort(function(t,e){var s=a(t.value,e.value);return s||(s=t.index-e.index),s*i}).map(function(t){return t.value})}},watch:{data:function(t){this.tableData=rs()(t)},currentPerPage:function(){this.currentPage=1}}},ds=us,hs=Object(m["a"])(ds,ss,ns,!1,null,null,null);hs.options.__file="Datatable.vue";var ms=hs.exports;function ps(t,e){var s=e.row,n=e.column,a=n.field,i="";return"function"===typeof a?i=a(s):(i=s[a],n.numeric&&"string"===typeof i&&(i=-1!==i.indexOf(".")?parseFloat(i):parseInt(i,10),i=i.toLocaleString())),n&&n.formatter?n.formatter(s,n,i):i}var fs={props:{display:{required:!0,type:String},field:[String,Function],sortable:[Boolean],numeric:[Boolean],sortMethod:[Function],width:[String],hiddenOverflow:[Boolean]},data:function(){return{columnConfig:{}}},inject:["table"],created:function(){var t=this;this.$createElement;this.$options.render=function(e){return e("div",t.$slots.default)};var e={display:this.display,field:this.field,sortable:this.sortable,numeric:this.numeric,renderCell:null,sortMethod:this.sortMethod,width:this.width,click:this.handleClick.bind(this)};this.columnConfig=e;var s=e.renderCell,n=this;e.renderCell=function(t,e){return n.$scopedSlots.default&&(s=function(){return n.$scopedSlots.default(e)}),s||(s=ps),n.hiddenOverflow?t("div",{class:"table-cell overflow",style:{width:e.column.width||"100px"}},[" ",s(t,e)," "]):t("div",{class:"table-cell"},[" ",s(t,e)," "])}},mounted:function(){this.table.columns.push(this.columnConfig)},methods:{handleClick:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.$emit.apply(this,["click"].concat(e))}}},vs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"modal",staticClass:"modal"},[s("div",{ref:"background",staticClass:"modal-background",on:{click:t.dismiss}}),s("div",{ref:"content",class:t.isCard?"modal-card":"modal-content",style:{width:t.relativeSize?"unset":""}},[t._t("default")],2)])},gs=[],Cs=s("5a72"),ws=s.n(Cs),bs={props:{active:{type:Boolean,required:!0},dismissable:{type:Boolean,default:!0},isCard:{type:Boolean,default:!1},duration:{type:Number,default:500},relativeSize:{type:Boolean,default:!1}},data:function(){return{open:!1}},methods:{dismiss:function(){this.open&&this.dismissable&&this.hide()},show:function(){var t=this;this.open||(this.open=!0,ws()({targets:this.$refs.background,opacity:[0,.5],duration:this.duration,easing:"linear",begin:function(){document.body.style.overflow="hidden",t.$refs.modal.style.display="flex"}}),ws()({targets:this.$refs.content,scale:[0,1],easing:"easeInOutSine",duration:this.duration}))},hide:function(){var t=this;this.open&&(this.open=!1,ws()({targets:this.$refs.background,opacity:[.5,0],duration:300,easing:"linear"}),ws()({targets:this.$refs.content,scale:[1,0],easing:"easeInBack",duration:300,complete:function(){document.body.style.removeProperty("overflow"),t.$refs.modal.style.display="none",t.$emit("close")}}))}},watch:{active:function(t){t?this.show():this.hide()}}},_s=bs,ys=Object(m["a"])(_s,vs,gs,!1,null,null,null);ys.options.__file="Modal.vue";var Os=ys.exports,ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wrapper",staticClass:"has-tooltip",on:{mouseover:t.show,mouseout:t.hide}},[t._t("default"),s("span",{ref:"tooltip",staticClass:"tooltip"},[t._v(t._s(t.content))])],2)},$s=[],Ms={props:{position:{type:String,default:"bottom"},content:{type:String,required:!0},delay:{type:Number,default:200}},data:function(){return{isOpen:!1,isHovered:!1,enterDelayTimeout:null,leaveDelayTimeout:null}},computed:{tooltip:function(){return this.$refs.tooltip}},methods:{setPosition:function(){var t=this.$refs.wrapper.getBoundingClientRect(),e=this[this.position](t);this.tooltip.style.top="".concat(e.top,"px"),this.tooltip.style.left="".concat(e.left,"px")},top:function(t){return{left:(t.width-this.tooltip.getBoundingClientRect().width)/2,top:-this.tooltip.getBoundingClientRect().height-10}},bottom:function(t){var e=this.top(t);return e.top=-e.top,e},left:function(t){return{left:-this.tooltip.getBoundingClientRect().width-10,top:(t.height-this.tooltip.getBoundingClientRect().height)/2}},right:function(t){return{left:t.width+10,top:(t.height-this.tooltip.getBoundingClientRect().height)/2}},show:function(){var t=this;this.isHovered=!0,this.isOpen||(this.isOpen=!0,this.setPosition(),clearTimeout(this.enterDelayTimeout),this.enterDelayTimeout=setTimeout(function(){t.isHovered&&(t.anime&&t.anime.pause(),t.anime=ws()({targets:t.tooltip,opacity:1,easing:"easeOutQuart",begin:function(){t.tooltip.style.visibility="visible"},duration:500}))},this.delay))},hide:function(){var t=this;this.isHovered=!1,this.isOpen&&(this.isOpen=!1,clearTimeout(this.leaveDelayTimeout),this.leaveDelayTimeout=setTimeout(function(){t.isHovered||(t.anime&&t.anime.pause(),t.anime=ws()({targets:t.tooltip,opacity:0,easing:"easeInOutQuart",complete:function(){t.tooltip.style.visibility="hidden"},duration:300}))},this.delay))}}},xs=Ms,Ps=(s("0fb9"),Object(m["a"])(xs,ks,$s,!1,null,null,null));Ps.options.__file="Tooltip.vue";var Ss=Ps.exports,Ns={data:function(){return{destroying:null}},created:function(){this.resetDestroying()},methods:{resetDestroying:function(){this.destroying={item:"",id:null}},doubleCheckDestroy:function(t,e){return this.destroying&&this.destroying.id===e&&this.destroying.item===t?(this.resetDestroying(),!0):(this.destroying.id=e,this.destroying.item=t,this.$dialog.show("Click again to destroy!"),!1)}}},Ds={mixins:[le,Ns],components:{Datatable:ms,Column:fs,Modal:Os,Loading:f,Tooltip:Ss},data:function(){return{channels:[],selectedChannel:null,channelOwners:[],channelAdmins:[],channelPermissions:[],modalOpen:!1,loading:{name:!1,destroying:!1},newChannel:null,newOwner:null,newAdmin:null,newPermission:null}},computed:{actions:function(){return this.$store.getters.channelActions},types:function(){return this.$store.getters.channelTypes},channelFormNameError:function(){return this.newChannel.errors&&this.newChannel.errors.name},channelFormOwnerError:function(){return this.newChannel.errors&&this.newChannel.errors.owner},selectedActionTypes:function(){return this.types[this.newPermission.action]||[]}},created:function(){this.resetNewChannel(),this.fetchChannels()},mounted:function(){this.resetModal()},methods:{fetchChannels:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(ct).then(function(e){t.channels=e,t.hideGlobalLoading()}).catch(function(e){t.$dialog.show(e,3e3),t.hideGlobalLoading()})},saveChannel:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(ut,this.newChannel).then(function(e){t.channels.push(e),t.$dialog.show("Create channel successfully."),t.resetNewChannel(),t.hideGlobalLoading()}).catch(function(e){t.newChannel.errors=e,t.hideGlobalLoading()})},updateOrder:function(){var t=this;this.$store.dispatch(Ct,{channel:this.selectedChannel.uuid,order:this.selectedChannel.sort}).then(function(){var e=t.channels.find(function(e){return e.uuid===t.selectedChannel.uuid});e.sort=t.selectedChannel.sort,t.$dialog.show("Success.")}).catch(function(){t.$dialog.show("Update channel unsuccessfully.")})},resetNewChannel:function(){this.$set(this,"newChannel",{open:!1,name:"",owner:"",errors:{}})},fetchChannelInfo:function(t){var e=this;this.loading.info=!0,this.$store.dispatch(dt,t).then(function(t){e.channelOwners=t.owners,e.channelPermissions=t.acls,e.channelAdmins=t.admins,e.loading.info=!1})},editChannel:function(t){this.selectedChannel=Object(es["cloneDeep"])(this.channels.find(function(e){return e.uuid===t.uuid})),this.fetchChannelInfo(this.selectedChannel.uuid),this.modalOpen=!0},goToRooms:function(t){this.$router.push({name:"room",params:{channel:t.uuid}})},resetNewOwner:function(){this.newOwner={status:!1,uuid:""}},resetNewAdmin:function(){this.newAdmin={status:!1,uuid:""}},resetNewPermission:function(){this.newPermission={status:!1,isNew:!0,action:"",type:"",value:""}},resetModal:function(){this.resetDestroying(),this.resetNewOwner(),this.resetNewAdmin(),this.resetNewPermission()},onModalClose:function(){this.selectedChannel=null,this.closeModal(),this.resetModal()},closeModal:function(){this.modalOpen=!1},toggleNameFieldVisibility:function(){this.$refs.channelName.classList.toggle("hide"),this.$refs.nameField.classList.toggle("hide")},editChannelName:function(){this.toggleNameFieldVisibility(),this.$refs.nameInput.focus()},saveChannelName:function(){var t=this;this.toggleNameFieldVisibility();var e=this.channels.find(function(e){return e.uuid===t.selectedChannel.uuid});e.name!==this.selectedChannel.name&&(this.loading.name=!0,this.$store.dispatch(gt,{channel:this.selectedChannel.uuid,name:this.selectedChannel.name}).then(function(){e.name=t.selectedChannel.name,t.loading.name=!1,t.$dialog.show("Update channel name successfully.")}))},destroyChannel:function(){var t=this;this.doubleCheckDestroy("channel",this.selectedChannel.uuid)&&(this.showGlobalLoading(),this.$store.dispatch(ht,this.selectedChannel.uuid).then(function(){t.$dialog.show("Delete channel successfully."),t.channels.splice(t.channels.findIndex(function(e){return e.uuid===t.selectedChannel.uuid}),1),t.closeModal(),t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to delete channel.")}))},deleteOwner:function(t,e){var s=this;this.doubleCheckDestroy("owner",t+e)&&this.$store.dispatch(mt,{channel:t,owner:e}).then(function(){s.channelOwners.splice(s.channelOwners.findIndex(function(t){return t.uuid===e}),1),s.$dialog.show("Delete owner successfully.")})},showOwnerInput:function(){var t=this;this.newOwner.status=!0,this.$nextTick(function(){t.$refs.ownerInput.scrollIntoView(),t.$refs.ownerInput.focus()})},addOwner:function(){var t=this;this.channelOwners.find(function(e){return t.newOwner.uuid===e.uuid})?this.$dialog.show("<p>This user has already been owner.</p> <p>Please check and submit again.</p>",5e3):this.$store.dispatch(pt,{channel:this.selectedChannel.uuid,owner:this.newOwner.uuid}).then(function(e){t.channelOwners.push(e),t.resetNewOwner()}).catch(function(e){t.$dialog.show(e)})},deleteAdmin:function(t,e){var s=this;this.doubleCheckDestroy("admin",t+e)&&this.$store.dispatch(ft,{channel:t,admin:e}).then(function(){s.channelAdmins.splice(s.channelOwners.findIndex(function(t){return t.uuid===e}),1),s.$dialog.show("Delete admin successfully.")})},showAdminInput:function(){var t=this;this.newAdmin.status=!0,this.$nextTick(function(){t.$refs.adminInput.scrollIntoView(),t.$refs.adminInput.focus()})},addAdmin:function(){var t=this;this.channelAdmins.find(function(e){return t.newAdmin.uuid===e.uuid})?this.$dialog.show("<p>This user has already been admin.</p> <p>Please check and submit again.</p>",5e3):this.$store.dispatch(vt,{channel:this.selectedChannel.uuid,admin:this.newAdmin.uuid}).then(function(e){t.channelAdmins.push(e),t.resetNewAdmin()}).catch(function(e){t.$dialog.show(e)})},deletePermission:function(t,e,s){var n=this;this.doubleCheckDestroy("permission",t+e.action+e.type)&&this.$store.dispatch(wt,{channel:t,action:e.action,type:e.type}).then(function(){n.$dialog.show("Delete channel permission successfully."),n.channelPermissions.splice(s,1)})},showPermissionInput:function(){var t=this;this.newPermission.status=!0,this.$nextTick(function(){t.$refs.permissionInput.scrollIntoView(),t.$refs.permissionInput.focus()})},savePermission:function(){this.newPermission.isNew?this.addPermission(this.selectedChannel.uuid,this.newPermission):this.updatePermission(this.selectedChannel.uuid,this.newPermission)},selectAction:function(t){this.newPermission.action=t.target.value,this.newPermission.type="",this.$refs.typeSelector.selectedIndex=0},selectType:function(t){this.newPermission.type=t.target.value},addPermission:function(t,e){var s=this;this.channelPermissions.find(function(t){return t.action===e.action&&t.type===e.type})?this.$dialog.show("Permission with action: '".concat(e.action,"', type: '").concat(e.type,"' exists."),5e3):this.$store.dispatch(bt,Object(o["a"])({channel:t},e)).then(function(){s.channelPermissions.push(e),s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},updatePermission:function(t,e){var s=this;this.$store.dispatch(_t,Object(o["a"])({channel:t},e)).then(function(){s.channelPermissions[e.index].value=e.value,s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},editPermission:function(t,e){this.newPermission=Object.assign({},this.newPermission,e,{status:!0,isNew:!1,index:t}),this.showPermissionInput()}}},Es=Ds,Rs=Object(m["a"])(Es,Ze,ts,!1,null,null,null);Rs.options.__file="Channel.vue";var As=Rs.exports,Is=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"Rooms",data:t.rooms}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Rooms\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newRoom.open=!0}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])])]),s("column",{attrs:{display:"Sort Order",field:"sort",sortable:""}}),s("column",{attrs:{display:"Name",field:"name",sortable:""}}),s("column",{attrs:{display:"UUID",field:"uuid"}}),s("column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button is-info",on:{click:function(s){t.goToUsers(e.row)}}},[t._v("Users")]),s("a",{staticClass:"button",on:{click:function(s){t.editRoom(e.row)}}},[t._v("Edit")])])]}}])})],1),s("modal",{attrs:{active:t.newRoom.open,duration:300},on:{close:t.resetNewRoom}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.saveRoom(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Room Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newRoom.name,expression:"newRoom.name"}],staticClass:"input",class:{"is-danger":t.roomFormNameError},attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newRoom.name},on:{input:function(e){e.target.composing||t.$set(t.newRoom,"name",e.target.value)}}})]),t.roomFormNameError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.roomFormNameError))]):t._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Owner UUID")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newRoom.owner,expression:"newRoom.owner"}],staticClass:"input",class:{"is-danger":t.roomFormOwnerError},attrs:{type:"text",placeholder:"Owner"},domProps:{value:t.newRoom.owner},on:{input:function(e){e.target.composing||t.$set(t.newRoom,"owner",e.target.value)}}})]),t.roomFormOwnerError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.roomFormOwnerError))]):t._e()]),s("div",{staticClass:"field is-grouped"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[t._v("Submit")])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-link",on:{click:function(e){t.newRoom.open=!1}}},[t._v("Cancel")])])])])])]),s("modal",{attrs:{active:t.modalOpen,"is-card":!0,duration:300},on:{close:t.onModalClose}},[t.selectedRoom?[s("header",{staticClass:"modal-card-head"},[s("div",{ref:"roomName",staticClass:"modal-card-title",on:{click:t.editRoomName}},[s("p",{staticClass:"name"},[t._v("\n            "+t._s(t.selectedRoom.name)+"\n            "),s("span",{staticClass:"icon is-small is-size-6 has-text-info"},[t.loading.name?s("i",{staticClass:"fa fa-refresh keep rotate"}):s("i",{staticClass:"fa fa-edit"})])]),s("span",{staticClass:"label uuid"},[t._v(t._s(t.selectedRoom.uuid))])]),s("div",{ref:"nameField",staticClass:"name-field hide field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedRoom.name,expression:"selectedRoom.name"}],ref:"nameInput",staticClass:"input",attrs:{type:"text",name:"name"},domProps:{value:t.selectedRoom.name},on:{input:function(e){e.target.composing||t.$set(t.selectedRoom,"name",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.saveRoomName}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.toggleNameFieldVisibility}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),s("section",{staticClass:"modal-card-body"},[s("span",{staticClass:"label"},[t._v("Order: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedRoom.sort,expression:"selectedRoom.sort"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.selectedRoom.sort},on:{input:function(e){e.target.composing||t.$set(t.selectedRoom,"sort",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v(" Default\n          "),s("tooltip",{staticClass:"icon",attrs:{content:"Auto-join",position:"right"}},[s("i",{staticClass:"fa fa-question-circle-o"})]),t._v(":\n        ")],1),s("i-switch",{on:{switch:t.toggleDefaultRoom},model:{value:t.selectedRoom.is_default,callback:function(e){t.$set(t.selectedRoom,"is_default",e)},expression:"selectedRoom.is_default"}}),s("span",{staticClass:"label"},[t._v("Temporary\n          "),s("tooltip",{staticClass:"icon",attrs:{content:"Deleted when owner leaves.",position:"right"}},[s("i",{staticClass:"fa fa-question-circle-o"})]),t._v(":\n        ")],1),s("i-switch",{on:{switch:t.toggleTemporaryRoom},model:{value:t.selectedRoom.is_ephemeral,callback:function(e){t.$set(t.selectedRoom,"is_ephemeral",e)},expression:"selectedRoom.is_ephemeral"}}),s("span",{staticClass:"label"},[t._v("Admin\n          "),s("tooltip",{staticClass:"icon",attrs:{content:"Request admin events sent here.",position:"right"}},[s("i",{staticClass:"fa fa-question-circle-o"})]),t._v(":\n        ")],1),s("i-switch",{on:{switch:t.toggleAdminRoom},model:{value:t.selectedRoom.is_admin,callback:function(e){t.$set(t.selectedRoom,"is_admin",e)},expression:"selectedRoom.is_admin"}}),s("span",{staticClass:"label"},[t._v("Owners: ")]),s("div",{staticClass:"tags"},[t._l(t.roomOwners,function(e){return s("tooltip",{key:e.id,staticClass:"tag is-medium",attrs:{content:"id: "+e.uuid+", name: "+e.name,position:"top"}},[t._v("\n            "+t._s(e.name)+"\n            "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteOwner(t.selectedRoom.uuid,e.uuid)}}})])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newOwner.status,expression:"!newOwner.status"}],staticClass:"adding tag is-medium",on:{click:t.showOwnerInput}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newOwner.status,expression:"newOwner.status"}],staticClass:"owner-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newOwner.uuid,expression:"newOwner.uuid"}],ref:"ownerInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newOwner.uuid},on:{input:function(e){e.target.composing||t.$set(t.newOwner,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addOwner}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newOwner.status=!1}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])])],2),s("span",{staticClass:"label"},[t._v("Moderator: ")]),s("div",{staticClass:"tags"},[t._l(t.roomModerators,function(e){return s("tooltip",{key:e.id,staticClass:"tag is-medium",attrs:{content:"id: "+e.uuid+", name: "+e.name,position:"top"}},[t._v("\n            "+t._s(e.name)+"\n            "),s("button",{staticClass:"delete is-small",on:{click:function(s){t.deleteModerator(t.selectedRoom.uuid,e.uuid)}}})])}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.newModerator.status,expression:"!newModerator.status"}],staticClass:"adding tag is-medium",on:{click:t.showModeratorInput}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newModerator.status,expression:"newModerator.status"}],staticClass:"moderator-field field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newModerator.uuid,expression:"newModerator.uuid"}],ref:"moderatorInput",staticClass:"input",attrs:{type:"text",placeholder:"ID of user"},domProps:{value:t.newModerator.uuid},on:{input:function(e){e.target.composing||t.$set(t.newModerator,"uuid",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.addModerator}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:function(e){t.newModerator.status=!1}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])])],2),s("span",{staticClass:"label"},[t._v("Permissions: ")]),s("div",{staticClass:"datatable-content"},[s("table",{staticClass:"table is-fullwidth"},[s("thead",[s("tr",[s("td",[t._v("Action")]),s("td",[t._v("Type")]),s("td",[t._v("Value")]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-default",on:{click:t.showPermissionInput}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])])])])]),s("tbody",[t._l(t.roomPermissions,function(e,n){return s("tr",{key:n},[s("td",[t._v(t._s(e.action))]),s("td",[t._v(t._s(e.type))]),s("td",[t._v(t._s(e.value))]),s("td",{staticClass:"actions-column"},[s("button",{staticClass:"button is-danger",on:{click:function(s){t.deletePermission(t.selectedRoom.uuid,e,n)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])]),s("button",{staticClass:"button is-info",on:{click:function(s){t.editPermission(n,e)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-edit"})])])])])}),s("tr",{directives:[{name:"show",rawName:"v-show",value:t.newPermission.status,expression:"newPermission.status"}]},[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"actionSelector",attrs:{disabled:!t.newPermission.isNew},on:{change:function(e){t.selectAction(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Action")]),t._l(t.actions,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"typeSelector",attrs:{disabled:!t.newPermission.isNew||!t.newPermission.action},on:{change:function(e){t.selectType(e)}}},[s("option",{attrs:{disabled:"",selected:""}},[t._v("Type")]),t._l(t.selectedActionTypes,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPermission.value,expression:"newPermission.value"}],ref:"permissionInput",staticClass:"input",attrs:{type:"text",placeholder:"value"},domProps:{value:t.newPermission.value},on:{input:function(e){e.target.composing||t.$set(t.newPermission,"value",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-success",on:{click:t.savePermission}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.resetNewPermission}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-close"})])])])])])])],2)])])],1),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:t.updateOrder}},[t._v("Save")]),s("button",{staticClass:"button is-danger",on:{click:t.destroyRoom}},[t._v("Destroy")])])]:t._e()],2)],1)},Us=[],Ts=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"switch"},[s("input",{ref:"input",attrs:{type:"checkbox",disabled:t.disabled},on:{click:t.switchValue}}),s("span",{staticClass:"slider"})])},js=[],Ls={model:{prop:"checked",event:"change"},props:{checked:{type:[Boolean,Number],default:!1},disabled:{type:Boolean,default:!1}},mounted:function(){this.$refs.input.checked=this.checked},computed:{isChecked:function(){return this.checked}},methods:{switchValue:function(){this.disabled||this.handleChange()},handleChange:function(){var t=this;this.$emit("change",!this.isChecked),this.$emit("switch",!this.isChecked),this.$nextTick(function(){t.$refs.input.checked=t.isChecked})}},watch:{isChecked:function(){this.$refs.input.checked=this.isChecked}}},Bs=Ls,Fs=Object(m["a"])(Bs,Ts,js,!1,null,null,null);Fs.options.__file="Switch.vue";var Gs=Fs.exports,Hs={mixins:[le,Ns],components:{Datatable:ms,Column:fs,Modal:Os,Loading:f,Tooltip:Ss,ISwitch:Gs},data:function(){return{rooms:[],selectedRoom:null,roomOwners:[],roomModerators:[],roomPermissions:[],modalOpen:!1,loading:{name:!1,destroying:!1},newOwner:null,newModerator:null,newPermission:null,newRoom:null}},computed:{actions:function(){return this.$store.getters.roomActions},types:function(){return this.$store.getters.roomTypes},channel:function(){return this.$route.params.channel},roomFormNameError:function(){return this.newRoom.errors&&this.newRoom.errors.name},roomFormOwnerError:function(){return this.newRoom.errors&&this.newRoom.errors.owner},selectedActionTypes:function(){return this.types[this.newPermission.action]||[]}},created:function(){this.resetNewRoom(),this.fetchRooms()},mounted:function(){this.resetModal()},methods:{fetchRooms:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(kt,this.channel).then(function(e){t.rooms=e,t.hideGlobalLoading()})},saveRoom:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(Ot,{channel:this.channel,room:this.newRoom}).then(function(e){t.rooms.push(e),t.$dialog.show("Create Room successfully."),t.resetNewRoom(),t.hideGlobalLoading()}).catch(function(e){t.newRoom.errors=e,t.hideGlobalLoading()})},updateOrder:function(){var t=this;this.$store.dispatch(xt,{room:this.selectedRoom.uuid,order:this.selectedRoom.sort}).then(function(){var e=t.rooms.find(function(e){return e.uuid===t.selectedRoom.uuid});e.sort=t.selectedRoom.sort,t.$dialog.show("Success.")}).catch(function(){t.$dialog.show("Update room unsuccessfully.")})},resetNewRoom:function(){this.$set(this,"newRoom",{open:!1,name:"",owner:"",errors:{}})},goToUsers:function(t){this.$router.push({name:"userInRoom",params:Object(o["a"])({room:t.uuid},this.$route.params)})},editRoom:function(t){this.selectedRoom=Object(es["cloneDeep"])(this.rooms.find(function(e){return e.uuid===t.uuid})),this.fetchRoomInfo(this.selectedRoom),this.modalOpen=!0},fetchRoomInfo:function(t){var e=this;this.$store.dispatch($t,{channel:this.channel,room:t.uuid}).then(function(t){e.roomOwners=t.owners,e.roomModerators=t.moderators,e.roomPermissions=t.acls})},resetNewOwner:function(){this.newOwner={status:!1,uuid:""}},resetNewModerator:function(){this.newModerator={status:!1,uuid:""}},resetNewPermission:function(){this.newPermission={status:!1,isNew:!0,action:"",type:"",value:""}},resetModal:function(){this.resetDestroying(),this.resetNewOwner(),this.resetNewModerator(),this.resetNewPermission()},onModalClose:function(){this.selectedRoom=null,this.closeModal(),this.resetModal()},closeModal:function(){this.modalOpen=!1},toggleNameFieldVisibility:function(){this.$refs.roomName.classList.toggle("hide"),this.$refs.nameField.classList.toggle("hide")},editRoomName:function(){this.loading.name||(this.toggleNameFieldVisibility(),this.$refs.nameInput.focus())},saveRoomName:function(){var t=this;this.toggleNameFieldVisibility();var e=this.rooms.find(function(e){return e.uuid===t.selectedRoom.uuid});e.name!==this.selectedRoom.name&&(this.loading.name=!0,this.$store.dispatch(Mt,{channel:this.channel,room:this.selectedRoom.uuid,name:this.selectedRoom.name}).then(function(){e.name=t.selectedRoom.name,t.loading.name=!1,t.$dialog.show("Update room successfully.")}).catch(function(s){t.selectedRoom.name=e.name,t.loading.name=!1,t.$dialog.show(s,5e3)}))},destroyRoom:function(){var t=this;this.doubleCheckDestroy("room",this.selectedRoom.uuid)&&(this.showGlobalLoading(),this.$store.dispatch(Pt,{channel:this.channel,room:this.selectedRoom.uuid}).then(function(){t.$dialog.show("Delete Room successfully."),t.rooms.splice(t.rooms.findIndex(function(e){return e.uuid===t.selectedRoom.uuid}),1),t.closeModal(),t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to delete Room.")}))},deleteOwner:function(t,e){var s=this;this.doubleCheckDestroy("ownner",t+e)&&this.$store.dispatch(Nt,{room:t,owner:e}).then(function(){s.roomOwners.splice(s.roomOwners.findIndex(function(t){return t.id===e}),1),s.$dialog.show("Delete owner successfully.")})},showOwnerInput:function(){var t=this;this.newOwner.status=!0,this.$nextTick(function(){t.$refs.ownerInput.scrollIntoView(),t.$refs.ownerInput.focus()})},addOwner:function(){var t=this;this.roomOwners.find(function(e){return t.newOwner.uuid===e.uuid})?this.$dialog.show("<p>This user has already been owner.</p> <p>Please check and submit again.</p>",5e3):this.$store.dispatch(St,{room:this.selectedRoom.uuid,owner:this.newOwner.uuid}).then(function(e){t.roomOwners.push(e),t.resetNewOwner()}).catch(function(e){t.$dialog.show(e)})},deleteModerator:function(t,e){var s=this;this.doubleCheckDestroy("moderator",t+e)&&this.$store.dispatch(Et,{room:t,moderator:e}).then(function(){s.roomModerators.splice(s.roomModerators.findIndex(function(t){return t.id===e}),1),s.$dialog.show("Delete moderator successfully.")})},showModeratorInput:function(){var t=this;this.newModerator.status=!0,this.$nextTick(function(){t.$refs.moderatorInput.scrollIntoView(),t.$refs.moderatorInput.focus()})},addModerator:function(){var t=this;this.roomModerators.find(function(e){return t.newModerator.uuid===e.uuid})?this.$dialog.show("<p>This user has already been moderator.</p><p>Please check and submit again.</p>",5e3):this.$store.dispatch(Dt,{room:this.selectedRoom.uuid,moderator:this.newModerator.uuid}).then(function(e){t.roomModerators.push(e),t.resetNewModerator()}).catch(function(e){t.$dialog.show(e)})},deletePermission:function(t,e,s){var n=this;this.doubleCheckDestroy("permission",t+e.action+e.type)&&this.$store.dispatch(At,{room:t,action:e.action,type:e.type}).then(function(){n.$dialog.show("Delete room permission successfully."),n.roomPermissions.splice(s,1)})},showPermissionInput:function(){var t=this;this.newPermission.status=!0,this.$nextTick(function(){t.$refs.permissionInput.scrollIntoView(),t.$refs.permissionInput.focus()})},selectAction:function(t){this.newPermission.action=t.target.value,this.newPermission.type="",this.$refs.typeSelector.selectedIndex=0},selectType:function(t){this.newPermission.type=t.target.value},savePermission:function(){this.newPermission.isNew?this.addPermission(this.selectedRoom.uuid,this.newPermission):this.updatePermission(this.selectedRoom.uuid,this.newPermission)},addPermission:function(t,e){var s=this;this.roomPermissions.find(function(t){return t.action===e.action&&t.type===e.type})?this.$dialog.show("Permission with action: '".concat(e.action,"', type: '").concat(e.type,"' exists already."),5e3):this.$store.dispatch(Rt,Object(o["a"])({room:t},e)).then(function(){s.roomPermissions.push(e),s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},updatePermission:function(t,e){var s=this;this.$store.dispatch(It,Object(o["a"])({channel:this.channel,room:t},e)).then(function(){s.roomPermissions[e.index].value=e.value,s.resetNewPermission()}).catch(function(t){"string"===typeof t?s.$dialog.show(t):s.$dialog.show(Object.values(t).map(function(t){return"<p>".concat(t,"</p>")}).join(""))})},editPermission:function(t,e){this.newPermission=Object.assign({},this.newPermission,e,{status:!0,isNew:!1,index:t}),this.showPermissionInput()},toggleDefaultRoom:function(t){var e=this,s=this.rooms.find(function(t){return t.uuid===e.selectedRoom.uuid});this.$store.dispatch(Ut,{room:this.selectedRoom.uuid,status:t}).then(function(){s.is_default=t,e.$dialog.show("Toogle default room successfully.")}).catch(function(){s.is_default=!t,e.$dialog.show("Toggle unsuccessfully.")})},toggleTemporaryRoom:function(t){var e=this,s=this.rooms.find(function(t){return t.uuid===e.selectedRoom.uuid});this.$store.dispatch(jt,{room:this.selectedRoom.uuid,status:t}).then(function(){s.is_ephemeral=t,e.$dialog.show("Toogle temporary room successfully.")}).catch(function(){s.is_ephemeral=!t,e.$dialog.show("Toggle unsuccessfully.")})},toggleAdminRoom:function(t){var e=this,s=this.rooms.find(function(t){return t.uuid===e.selectedRoom.uuid});this.$store.dispatch(Tt,{room:this.selectedRoom.uuid,status:t}).then(function(){s.is_admin=t,e.$dialog.show("Toogle admin room successfully.")}).catch(function(){s.is_admin=!t,e.$dialog.show("Toggle unsuccessfully.")})}}},zs=Hs,Vs=Object(m["a"])(zs,Is,Us,!1,null,null,null);Vs.options.__file="Room.vue";var Ys=Vs.exports,qs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"users in room "+t.room,data:t.users}},[s("column",{attrs:{display:"UUID",field:"uuid",sortable:""}}),s("column",{attrs:{display:"Username",field:"name",sortable:""}}),s("column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button",on:{click:function(s){t.kickUser(e.row)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-minus-square-o"})]),s("span",[t._v("kick")])]),s("a",{staticClass:"button",on:{click:function(s){t.openBanModal(e.row)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-ban"})]),s("span",[t._v("ban")])])])]}}])})],1),s("modal",{attrs:{active:t.banModal.open,duration:300},on:{close:t.resetBanModal}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.banUser(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Duratoin")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.banModal.duration,expression:"banModal.duration"}],staticClass:"input",attrs:{type:"text",placeholder:"Duration"},domProps:{value:t.banModal.duration},on:{input:function(e){e.target.composing||t.$set(t.banModal,"duration",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-danger"},[t._v("Ban")])])])])])])],1)},Ws=[],Ks={mixins:[le,Ns],components:{Datatable:ms,Column:fs,Modal:Os},data:function(){return{users:[],banModal:{user:null,duration:"",open:!1}}},computed:{channel:function(){return this.$route.params.channel},room:function(){return this.$route.params.room}},created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(Lt,this.room).then(function(e){t.hideGlobalLoading(),t.users=e})},removeUserFromTable:function(t){this.users.splice(this.users.findIndex(function(e){return e.uuid===t.uuid}),1)},kickUser:function(t){var e=this;this.doubleCheckDestroy("kick",t.uuid)&&this.$store.dispatch(Bt,{room:this.room,user:t.uuid}).then(function(){e.$dialog.show("Kick user successfully."),e.removeUserFromTable(t)}).catch(function(t){e.$dialog.show(t,5e3)})},openBanModal:function(t){this.banModal.open=!0,this.banModal.user=t},resetBanModal:function(){this.banModal.open=!1,this.banModal.user=null,this.banModal.duration=""},banUser:function(){var t=this;this.$store.dispatch(Ft,{target:"room",target_uuid:this.room,user_uuid:this.banModal.user.uuid,duration:this.banModal.duration}).then(function(){t.removeUserFromTable(t.banModal.user),t.$dialog.show("Ban user successfully."),t.resetBanModal()}).catch(function(e){t.$dialog.show(e,5e3)})}}},Js=Ks,Qs=Object(m["a"])(Js,qs,Ws,!1,null,null,null);Qs.options.__file="UserInRoom.vue";var Xs=Qs.exports,Zs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"superusers",data:t.superusers}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Superusers\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newSuperuser.open=!0}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])])]),s("column",{attrs:{display:"uuid",field:"uuid",sortable:"",numeric:""}}),s("column",{attrs:{display:"Username",field:"name",sortable:""}}),s("column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.unsetSuperuser(e.row)}}},[t._v("unset")])}}])})],1),s("modal",{attrs:{active:t.newSuperuser.open,duration:300,"is-card":""},on:{close:t.resetNewSuperuser}},[[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"is-size-5"},[t._v("Add superuser")])]),s("section",{staticClass:"modal-card-body"},[s("label",{staticClass:"label"},[t._v("Create: ")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.createSuperuser(e)}}},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newSuperuser.name,expression:"newSuperuser.name"}],staticClass:"input",class:{"is-danger":t.nameFieldError},attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newSuperuser.name},on:{input:function(e){e.target.composing||t.$set(t.newSuperuser,"name",e.target.value)}}}),t.nameFieldError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.nameFieldError))]):t._e()]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newSuperuser.uuid,expression:"newSuperuser.uuid"}],staticClass:"input",class:{"is-danger":t.UuidFieldError},attrs:{type:"text",placeholder:"ID"},domProps:{value:t.newSuperuser.uuid},on:{input:function(e){e.target.composing||t.$set(t.newSuperuser,"uuid",e.target.value)}}}),t.UuidFieldError?s("p",{staticClass:"help is-danger"},[t._v(t._s(t.UuidFieldError))]):t._e()]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])])])]),s("p",{staticClass:"placeholder"})]),s("label",{staticClass:"label"},[t._v("Search: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.search.model,expression:"search.model",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Name or UUID"},domProps:{value:t.search.model},on:{change:function(e){t.$set(t.search,"model",e.target.value)}}})])]),s("datatable",{attrs:{title:"search result",data:t.users,searchable:!1}},[s("column",{attrs:{display:"uuid",field:"uuid",sortable:"",numeric:""}}),s("column",{attrs:{display:"Username",field:"name"}}),s("column",{attrs:{display:"Actions"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-primary",on:{click:function(s){t.setSuperuser(e.row)}}},[t._v("set")])}}])})],1)],1)]],2)],1)},tn=[],en={mixins:[le,Ns],components:{Datatable:ms,Column:fs,Modal:Os},data:function(){return{superusers:[],users:[],newSuperuser:null,search:{loading:!1,model:""}}},computed:{nameFieldError:function(){return this.newSuperuser.errors.name},UuidFieldError:function(){return this.newSuperuser.errors.uuid}},created:function(){this.fetchSuperusers(),this.resetNewSuperuser()},methods:{fetchSuperusers:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(Gt).then(function(e){t.superusers=e,t.hideGlobalLoading()}).catch(function(){t.hideGlobalLoading()})},findSuperuser:function(t){return this.superusers.find(function(e){return e.uuid===t})},createSuperuser:function(){var t=this,e=this.findSuperuser(this.newSuperuser.uuid);e?this.$set(this.newSuperuser.errors,"uuid","User exists."):this.$store.dispatch(Yt,this.newSuperuser).then(function(){t.superusers.push({uuid:t.newSuperuser.uuid,name:t.newSuperuser.name}),t.resetNewSuperuser()}).catch(function(e){t.newSuperuser.errors=e})},resetNewSuperuser:function(){this.$set(this,"newSuperuser",{open:!1,name:"",uuid:"",errors:{}})},setSuperuser:function(t){var e=this,s=this.findSuperuser(t.uuid);s?this.$dialog.show("This user has already been superuser."):this.$store.dispatch(zt,t.uuid).then(function(){e.$dialog.show("Success."),e.superusers.push(t)})},unsetSuperuser:function(t){var e=this;this.doubleCheckDestroy("superuser",t.uuid)&&this.$store.dispatch(Vt,t.uuid).then(function(){e.superusers.splice(e.superusers.findIndex(function(e){return e.uuid===t.uuid}),1),e.$dialog.show("Success.")})},searchForUsers:function(t){var e=this;this.search.loading=!0,this.$store.dispatch(Ht,t).then(function(t){e.users=t,e.search.loading=!1}).catch(function(){e.search.loading=!1})}},watch:{"search.model":function(t){t&&this.searchForUsers(t)}}},sn=en,nn=Object(m["a"])(sn,Zs,tn,!1,null,null,null);nn.options.__file="User.vue";var an=nn.exports,on=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("datatable",{attrs:{title:"Banned Users",data:t.globalBans}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Global Bans\n      "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newBan.open=!0}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])])]),s("column",{attrs:{display:"UUID",field:"uuid",sortable:"",numeric:""}}),s("column",{attrs:{display:"Username",field:"name",sortable:""}}),s("column",{attrs:{display:"Duration",field:"duration"}}),s("column",{attrs:{display:"End time",field:t.formatDate}}),s("column",{attrs:{display:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.removeBan(e.row)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])])}}])})],1),s("datatable",{attrs:{title:"Banned Users",data:t.channelBans}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Channel Bans\n    ")]),s("column",{attrs:{display:"UUID",field:"uuid",sortable:"",numeric:""}}),s("column",{attrs:{display:"Username",field:"name",sortable:""}}),s("column",{attrs:{display:"Duration",field:"duration"}}),s("column",{attrs:{display:"End time",field:t.formatDate}}),s("column",{attrs:{display:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.removeBan(e.row)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])])}}])})],1),s("datatable",{attrs:{title:"Banned Users",data:t.roomBans}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[t._v("\n      Room Bans\n    ")]),s("column",{attrs:{display:"UUID",field:"uuid",sortable:"",numeric:""}}),s("column",{attrs:{display:"Username",field:"name",sortable:""}}),s("column",{attrs:{display:"Duration",field:"duration"}}),s("column",{attrs:{display:"End time",field:t.formatDate}}),s("column",{attrs:{display:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return s("a",{staticClass:"button is-danger",on:{click:function(s){t.removeBan(e.row)}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])])}}])})],1),s("modal",{attrs:{active:t.newBan.open,duration:300},on:{close:t.resetNewBan}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createNewBan(e)}}},[s("label",{staticClass:"label"},[t._v("Target: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.newBan.target,expression:"newBan.target"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.newBan,"target",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"global"}},[t._v("Global")]),s("option",{attrs:{value:"channel"}},[t._v("Channel")]),s("option",{attrs:{value:"room"}},[t._v("Room")])])])]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBan.targetUUID,expression:"newBan.targetUUID"}],staticClass:"input",attrs:{type:"text",placeholder:"Target UUID",disabled:"global"===this.newBan.target},domProps:{value:t.newBan.targetUUID},on:{input:function(e){e.target.composing||t.$set(t.newBan,"targetUUID",e.target.value)}}})])]),s("label",{staticClass:"label"},[t._v("User UUID: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBan.userUUID,expression:"newBan.userUUID"}],staticClass:"input",attrs:{type:"text",placeholder:"User UUID"},domProps:{value:t.newBan.userUUID},on:{input:function(e){e.target.composing||t.$set(t.newBan,"userUUID",e.target.value)}}})])]),s("label",{staticClass:"label"},[t._v("Duration: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBan.duration,expression:"newBan.duration"}],staticClass:"input",attrs:{type:"text",placeholder:"Duration"},domProps:{value:t.newBan.duration},on:{input:function(e){e.target.composing||t.$set(t.newBan,"duration",e.target.value)}}})]),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.newBan.durationUnit,expression:"newBan.durationUnit"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.newBan,"durationUnit",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"d"}},[t._v("Days")]),s("option",{attrs:{value:"h"}},[t._v("Hours")]),s("option",{attrs:{value:"m"}},[t._v("Minutes")]),s("option",{attrs:{value:"s"}},[t._v("Seconds")])])])])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-danger"},[t._v("Ban")])])])])])])],1)},rn=[],ln=s("340b"),cn={mixins:[le,Ns],components:{Datatable:ms,Column:fs,Modal:Os},data:function(){return{bannedUsers:{global:[],channel:[],room:[]},newBan:null,banDuration:{d:86400,h:3600,m:60,s:1}}},computed:{globalBans:function(){return this.bannedUsers.global},channelBans:function(){return this.bannedUsers.channel},roomBans:function(){return this.bannedUsers.room}},created:function(){this.reset(),this.fetchBannedUsers()},methods:{reset:function(){this.resetNewBan()},resetNewBan:function(){this.$set(this,"newBan",{open:!1,userUUID:"",target:"global",targetUUID:"",duration:"",durationUnit:"d"})},fetchBannedUsers:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(qt).then(function(e){t.bannedUsers=e,t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to fetch banned users."),t.hideGlobalLoading()})},formatDate:function(t){return Object(ln["format"])(t.timestamp,"YYYY-MM-DD HH:mm:ss")},removeBan:function(t){t.channel?this.removeChannelBan(t):t.room?this.removeRoomBan(t):this.removeGlobalBan(t)},removeChannelBan:function(t){var e=this;this.doubleCheckDestroy("ban","Channel-".concat(t.uuid))&&this.$store.dispatch(Wt,{user:t.uuid,target:"channel",targetUUID:t.channel.uuid}).then(function(){e.bannedUsers.channel.splice(e.bannedUsers.channel.findIndex(function(e){return e.uuid===t.uuid}),1)})},removeRoomBan:function(t){var e=this;this.doubleCheckDestroy("ban","Room-".concat(t.uuid))&&this.$store.dispatch(Wt,{user:t.uuid,target:"room",targetUUID:t.room.uuid}).then(function(){e.bannedUsers.room.splice(e.bannedUsers.room.findIndex(function(e){return e.uuid===t.uuid}),1)})},removeGlobalBan:function(t){var e=this;this.doubleCheckDestroy("ban","Global-".concat(t.uuid))&&this.$store.dispatch(Wt,{user:t.uuid,target:"global",targetUUID:""}).then(function(){e.bannedUsers.global.splice(e.bannedUsers.global.findIndex(function(e){return e.uuid===t.uuid}),1)})},createNewBan:function(){var t=this,e=this.newBan.duration,s=this.newBan.durationUnit,n={target:this.newBan.target,target_uuid:this.newBan.targetUUID,user_uuid:this.newBan.userUUID,duration:e+s};this.$store.dispatch(Ft,n).then(function(a){t.bannedUsers[n.target].push(Object(o["a"])({},a,{timestamp:Object(ln["addSeconds"])(new Date,(t.banDuration[s]||0)*e)})),t.resetNewBan(),t.$dialog.show("Ban user successfully.")})}}},un=cn,dn=Object(m["a"])(un,on,rn,!1,null,null,null);dn.options.__file="Ban.vue";var hn=dn.exports,mn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("p",{staticClass:"is-size-5",style:{"margin-bottom":"1rem"}},[t._v("\n    Blocked Words\n    "),s("a",{staticClass:"button is-primary is-small",on:{click:function(e){t.newBlock.open=!0}}},[t._m(0)])]),s("div",{staticClass:"tags"},t._l(t.words,function(e){return s("div",{key:e.id,staticClass:"tag is-medium is-rounded is-danger"},[t._v("\n      "+t._s(e.word)+"\n      "),s("span",{staticClass:"delete is-small",on:{click:function(s){t.deleteWord(e)}}})])})),s("modal",{attrs:{duration:300,active:t.newBlock.open},on:{close:t.resetNewBlock}},[s("div",{staticClass:"box"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createNewBlock(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Add words to black list: ")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newBlock.words,expression:"newBlock.words"}],staticClass:"textarea",attrs:{type:"text",placeholder:"Workds separated by new line"},domProps:{value:t.newBlock.words},on:{input:function(e){e.target.composing||t.$set(t.newBlock,"words",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary"},[t._v("Block")])])])])])])],1)},pn=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])}],fn={components:{Datatable:ms,Modal:Os,Column:fs},mixins:[le,Ns],data:function(){return{words:[],newBlock:null}},created:function(){this.fetchBlacklist(),this.resetNewBlock()},methods:{fetchBlacklist:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(Kt).then(function(e){t.words=e,t.hideGlobalLoading()}).catch(function(){t.$dialog.show("Fail to fetch blacklist."),t.hideGlobalLoading()})},resetNewBlock:function(){this.$set(this,"newBlock",{open:!1,words:""})},createNewBlock:function(){var t=this,e=this.newBlock.words;this.$store.dispatch(Jt,e).then(function(){t.fetchBlacklist(),t.resetNewBlock()})},deleteWord:function(t){var e=this;this.doubleCheckDestroy("remove",t.id)&&this.$store.dispatch(Qt,t.id).then(function(){e.words.splice(e.words.findIndex(function(e){return e.id===t.id}),1)}).catch(function(){e.$dialog.show("Fail to delete word from blacklist.")})}}},vn=fn,gn=Object(m["a"])(vn,mn,pn,!1,null,null,null);gn.options.__file="Blacklist.vue";var Cn=gn.exports,wn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"history"}},[s("label",{staticClass:"label"},[t._v("Search for history: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.room,expression:"searchModel.room"}],staticClass:"input",attrs:{type:"text",placeholder:"Room UUID"},domProps:{value:t.searchModel.room},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"room",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.user,expression:"searchModel.user"}],staticClass:"input",attrs:{type:"text",placeholder:"User UUID"},domProps:{value:t.searchModel.user},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"user",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.from,expression:"searchModel.from"}],ref:"fromInput",staticClass:"input",attrs:{type:"text",placeholder:"From"},domProps:{value:t.searchModel.from},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"from",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.to,expression:"searchModel.to"}],ref:"toInput",staticClass:"input",attrs:{type:"text",placeholder:"To"},domProps:{value:t.searchModel.to},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"to",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-primary",on:{click:t.search}},[s("i",{staticClass:"fa fa-search"})])])]),s("datatable",{staticClass:"compact",attrs:{data:t.messages,title:"Messages","per-page":[100,300,500],"default-per-page":100,"pagination-place":"both"}},[s("p",{staticClass:"is-size-5",attrs:{slot:"header"},slot:"header"},[s("a",{staticClass:"button is-small",on:{click:t.downloadMessages}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-download"})])]),t._v("\n      "+t._s(t.title)+"\n    ")]),s("column",{attrs:{field:t.formatDate,display:"Time",sortable:!0,width:"150px"}}),s("column",{attrs:{field:"from_user_id",display:"UUID",width:"80px"}}),s("column",{attrs:{field:"from_user_name",display:"Username",width:"120px"}}),s("column",{attrs:{field:"body",display:"Content",width:"400px","hidden-overflow":""},on:{click:t.showMessageDetail}}),s("column",{attrs:{field:"domain",display:"Type",width:"80px"}}),s("column",{attrs:{display:"Actions",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("a",{staticClass:"button is-small is-success",on:{click:function(s){t.showConversion(e.row)}}},[t._v("Conversation")])]}}])})],1),s("modal",{attrs:{duration:300,active:t.modalOpen},on:{close:t.closeModal}},[t.selectedMessage?s("div",{staticClass:"box"},[s("p",{staticClass:"is-size-6"},[t._v("Time: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.formatDate(t.selectedMessage.timestamp)))]),s("p",{staticClass:"is-size-6"},[t._v("Channel: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.channel_name)+" ("+t._s(t.selectedMessage.channel_id)+")")]),s("p",{staticClass:"is-size-6"},[t._v("Target: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.target_name)+" ("+t._s(t.selectedMessage.target_id)+")")]),s("p",{staticClass:"is-size-6"},[t._v("User:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.from_user_name)+" ("+t._s(t.selectedMessage.from_user_id)+")")]),s("p",{staticClass:"is-size-6"},[t._v("Message ID:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.message_id))]),s("p",{staticClass:"is-size-6"},[t._v("Content: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedMessage.body))]),s("span",{staticClass:"is-size-6"},[t._v(" Delete: ")]),s("br"),s("p",{staticClass:"label"},[s("i-switch",{on:{switch:t.toggleDelete},model:{value:t.selectedMessage.deleted,callback:function(e){t.$set(t.selectedMessage,"deleted",e)},expression:"selectedMessage.deleted"}})],1)]):t._e()])],1)},bn=[],_n=s("cf06"),yn=s.n(_n),On={components:{Datatable:ms,Column:fs,Modal:Os,ISwitch:Gs},mixins:[le],data:function(){return{messages:[],currentRoom:"",currentUser:"",fromPicker:null,toPicker:null,pickerConfig:{enableTime:!0,enableSeconds:!0,time_24hr:!0},searchModel:{room:"",user:"",from:"",to:""},modalOpen:!1,selectedMessage:null}},computed:{title:function(){var t=["History"];return""!==this.currentRoom&&t.push("for","room: ".concat(this.currentRoom)),""!==this.currentUser&&(t.includes("for")?t.push("and"):t.push("for"),t.push("user: ".concat(this.currentUser))),t.join(" ")}},mounted:function(){this.initPicker()},methods:{initPicker:function(){this.fromPicker=yn()(this.$refs.fromInput,this.pickerConfig),this.toPicker=yn()(this.$refs.toInput,this.pickerConfig)},search:function(){var t=this;this.showGlobalLoading();var e=Object.assign({},this.searchModel);e.from=e.from?new Date(e.from).toISOString():"",e.to=e.to?new Date(e.to).toISOString():"",this.$store.dispatch(Xt,e).then(function(e){t.messages=e.message,t.fromPicker.setDate(t.formatDate(e.real_from_time),!0),t.toPicker.setDate(t.formatDate(e.real_to_time),!0),t.currentRoom=e.room,t.currentUser=e.username,t.hideGlobalLoading()}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,5e3)})},formatDate:function(t){var e=null;return e="string"===typeof t?t:t.timestamp,Object(ln["format"])(e,"YYYY-MM-DD HH:mm:ss")},showMessageDetail:function(t){this.selectedMessage=t,this.modalOpen=!0},showConversion:function(t){var e=new Date(t.timestamp),s=new Date(t.timestamp);e.setMinutes(e.getMinutes()-1),s.setHours(s.getHours()+1),this.searchModel={room:t.target_id,user:"",from:e.toISOString(),to:s.toISOString()},this.search()},closeModal:function(){this.modalOpen=!1,this.selectedMessage=null},toggleDelete:function(t){var e=this,s=this.messages.find(function(t){return t.message_id===e.selectedMessage.message_id});this.$store.dispatch(Zt,{message:s.message_id,status:t}).then(function(){s.deleted=t,e.$dialog.show("Done.")}).catch(function(){e.selectedMessage.deleted=!t,e.$dialog.show("Failed.")})},downloadMessages:function(){if(Array.isArray(this.messages)&&0!==this.messages.length){var t=Object.keys(this.messages[0]),e="data:text/csv;charset=utf-8,",s="".concat(t.join(","),"\n"),n=this.messages.map(function(t){return Object.values(t).join(",")}).join("\n"),a=document.createElement("a");a.setAttribute("href",e+encodeURIComponent(s+n)),a.setAttribute("download","history.csv"),document.body.appendChild(a),a.click()}else this.$dialog.show("There is nothing to export.")}}},kn=On,$n=Object(m["a"])(kn,wn,bn,!1,null,null,null);$n.options.__file="History.vue";var Mn=$n.exports,xn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"history"}},[s("label",{staticClass:"label"},[t._v("Search for spam: ")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.room,expression:"searchModel.room"}],staticClass:"input",attrs:{type:"text",placeholder:"Room UUID"},domProps:{value:t.searchModel.room},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"room",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.user,expression:"searchModel.user"}],staticClass:"input",attrs:{type:"text",placeholder:"User UUID"},domProps:{value:t.searchModel.user},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"user",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.from,expression:"searchModel.from"}],ref:"fromInput",staticClass:"input",attrs:{type:"text",placeholder:"From"},domProps:{value:t.searchModel.from},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"from",e.target.value)}}})]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchModel.to,expression:"searchModel.to"}],ref:"toInput",staticClass:"input",attrs:{type:"text",placeholder:"To"},domProps:{value:t.searchModel.to},on:{input:function(e){e.target.composing||t.$set(t.searchModel,"to",e.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-primary",on:{click:t.search}},[s("i",{staticClass:"fa fa-search"})])])]),s("datatable",{staticClass:"compact",attrs:{data:t.spams,title:"Spams","per-page":[100,300,500],"default-per-page":100,"pagination-place":"both"}},[s("div",{staticClass:"field has-addons flexbox flexbox-v-center",attrs:{slot:"header"},slot:"header"},[s("p",{staticClass:"control"},[s("a",{staticClass:"button",on:{click:t.downloadSpams}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-download"})])])]),s("p",{staticClass:"control"},[s("a",{staticClass:"button",on:{click:t.openSettingModal}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-cog"})])])]),s("span",{staticClass:"label",style:{"padding-left":".5rem"}},[t._v(t._s(t.title))])]),s("column",{attrs:{display:"Time",sortable:!0,width:"150px","sort-method":t.sortByTimestamp},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.formatDate(e.row.time_stamp))+"\n      ")]}}])}),s("column",{attrs:{field:"from_id",display:"UUID",width:"80px"}}),s("column",{attrs:{field:"from_name",display:"Username",width:"120px"}}),s("column",{attrs:{field:"message",display:"Content",width:"300px","hidden-overflow":""},on:{click:t.showSpamDetail}}),s("column",{attrs:{display:"probability",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return s("tooltip",{attrs:{content:e.row.probability,position:"right"}},[t._v("\n        "+t._s(t.probabilityAverage(e.row.probability))+"\n      ")])}}])}),s("column",{attrs:{display:"Actions",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button is-small is-success",on:{click:function(s){t.showConversion(e.row)}}},[t._v("Conversation")]),s("a",{staticClass:"button is-small",attrs:{disabled:""}},[t._v("User overview")])])]}}])})],1),s("modal",{attrs:{duration:300,"is-card":!0,active:t.spamModal.open},on:{close:t.closeSpamModal}},[t.selectedSpam?s("div",{staticClass:"box"},[s("p",{staticClass:"flexbox flexbox-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("is spam?")]),s("i-switch",{on:{switch:t.toggleCorrect},model:{value:t.selectedSpam.correct,callback:function(e){t.$set(t.selectedSpam,"correct",e)},expression:"selectedSpam.correct"}})],1),s("p",[t._v("Time: ")]),s("p",{staticClass:"label"},[t._v(t._s(t.formatDate(t.selectedSpam.time_stamp)))]),s("p",[t._v(t._s(t.selectedSpam.object_type)+": ")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedSpam.to_name)+" ("+t._s(t.selectedSpam.to_id)+")")]),s("p",[t._v("User:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedSpam.from_name)+" ("+t._s(t.selectedSpam.from_id)+")")]),s("p",[t._v("Message ID:")]),s("p",{staticClass:"label"},[t._v(t._s(t.selectedSpam.message_id))]),s("p",[t._v("Content: ")]),s("pre",[t._v(t._s(t.selectedSpam.message))])]):t._e()]),s("modal",{attrs:{durations:300,active:t.settingModal.open},on:{close:t.closeSettingModal}},[t.settingModal.settings?[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"is-size-5"},[t._v("Spam settings")]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeSettingModal}})]),s("section",{staticClass:"modal-card-body"},[s("p",{staticClass:"flexbox flexbox-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("Enabled:")]),s("i-switch",{model:{value:t.settingModal.settings.enabled,callback:function(e){t.$set(t.settingModal.settings,"enabled",e)},expression:"settingModal.settings.enabled"}})],1),s("span",{staticClass:"label"},[t._v("threshold(percentage):")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settingModal.settings.threshold,expression:"settingModal.settings.threshold"}],staticClass:"input",attrs:{type:"text",placeholder:"Threshold"},domProps:{value:t.settingModal.settings.threshold},on:{input:function(e){e.target.composing||t.$set(t.settingModal.settings,"threshold",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v("Max Length:")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settingModal.settings.max_length,expression:"settingModal.settings.max_length"}],staticClass:"input",attrs:{type:"text",placeholder:"Max length"},domProps:{value:t.settingModal.settings.max_length},on:{input:function(e){e.target.composing||t.$set(t.settingModal.settings,"max_length",e.target.value)}}})])]),s("span",{staticClass:"label"},[t._v("Min Length:")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settingModal.settings.min_length,expression:"settingModal.settings.min_length"}],staticClass:"input",attrs:{type:"text",placeholder:"Min length"},domProps:{value:t.settingModal.settings.min_length},on:{input:function(e){e.target.composing||t.$set(t.settingModal.settings,"min_length",e.target.value)}}})])]),s("p",{staticClass:"flexbox flexbox-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("Ignore emoji:")]),s("i-switch",{model:{value:t.settingModal.settings.ignore_emoji,callback:function(e){t.$set(t.settingModal.settings,"ignore_emoji",e)},expression:"settingModal.settings.ignore_emoji"}})],1),s("p",{staticClass:"flexbox flexbox-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("\n            Save\n            "),s("tooltip",{staticClass:"icon",attrs:{position:"right",content:"Whether saving spam messages to separate 'spams' table."}},[s("i",{staticClass:"fa fa-question-circle-o"})]),t._v("\n            :\n          ")],1),s("i-switch",{model:{value:t.settingModal.settings.should_save,callback:function(e){t.$set(t.settingModal.settings,"should_save",e)},expression:"settingModal.settings.should_save"}})],1),s("p",{staticClass:"flexbox flexbox-v-center label"},[s("span",{style:{"padding-right":".5rem"}},[t._v("\n            Delete\n            "),s("tooltip",{staticClass:"icon",attrs:{position:"right",content:"Enable deletion of spam messages from storage backend."}},[s("i",{staticClass:"fa fa-question-circle-o"})]),t._v("\n            :\n          ")],1),s("i-switch",{model:{value:t.settingModal.settings.should_delete,callback:function(e){t.$set(t.settingModal.settings,"should_delete",e)},expression:"settingModal.settings.should_delete"}})],1)]),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:t.updateSpamSettings}},[t._v("Save")]),s("button",{staticClass:"button",on:{click:t.closeSettingModal}},[t._v("Close")])])]:t._e()],2)],1)},Pn=[],Sn=(s("5df2"),{components:{Datatable:ms,Column:fs,Modal:Os,ISwitch:Gs,Tooltip:Ss},mixins:[le],data:function(){return{spams:[],currentRoom:"",currentUser:"",fromPicker:null,toPicker:null,pickerConfig:{enableTime:!0,enableSeconds:!0,time_24hr:!0},searchModel:{room:"",user:"",from:"",to:""},spamModal:{open:!1,spam:null},settingModal:{open:!1,settings:null}}},computed:{title:function(){var t=["Spams"];return""!==this.currentRoom&&t.push("for","room: ".concat(this.currentRoom)),""!==this.currentUser&&(t.includes("for")?t.push("and"):t.push("for"),t.push("user: ".concat(this.currentUser))),t.join(" ")},selectedSpam:function(){return this.spamModal.spam}},mounted:function(){this.initPicker(),this.getLatestSpams()},methods:{initPicker:function(){this.fromPicker=yn()(this.$refs.fromInput,this.pickerConfig),this.toPicker=yn()(this.$refs.toInput,this.pickerConfig)},getLatestSpams:function(){var t=this;this.showGlobalLoading(!0),this.$store.dispatch(ne).then(function(e){t.spams=e,t.hideGlobalLoading()}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,500)})},search:function(){var t=this;this.showGlobalLoading();var e=Object.assign({},this.searchModel);e.from=e.from?new Date(e.from).toISOString():"",e.to=e.to?new Date(e.to).toISOString():"",this.$store.dispatch(se,e).then(function(e){t.spams=e.message,t.fromPicker.setDate(e.real_from_time,!0),t.toPicker.setDate(e.real_to_time,!0),t.currentRoom=e.room_name,t.currentUser=e.user_name,t.hideGlobalLoading()}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,5e3)})},sortByTimestamp:function(t,e){return Object(ln["compareAsc"])(t.time_stamp,e.time_stamp)},probabilityAverage:function(t){var e=t.split(",").filter(Number).map(Number.parseFloat);return"".concat((e.reduce(function(t,e){return t+e},0)/e.length*100).toFixed(2),"%")},formatDate:function(t){return Object(ln["format"])(1e3*t,"YYYY-MM-DD HH:mm:ss")},showSpamDetail:function(t){this.spamModal.spam=t,this.spamModal.open=!0},showConversion:function(t){var e=new Date(1e3*t.time_stamp),s=new Date(1e3*t.time_stamp);e.setMinutes(e.getMinutes()-1),s.setHours(s.getHours()+1),this.searchModel={room:t.to_id,user:"",from:e.toISOString(),to:s.toISOString()},this.search()},closeSpamModal:function(){this.spamModal.open=!1,this.spamModal.spam=null},toggleCorrect:function(t){var e=this,s=this.spams.find(function(t){return t.id===e.selectedSpam.id});this.$store.dispatch(ie,{id:s.id,status:t}).then(function(){s.correct=t,e.$dialog.show("Done.")}).catch(function(){e.selectedSpam.correct=!t,e.$dialog.show("Failed.")})},downloadSpams:function(){if(Array.isArray(this.spams)&&0!==this.spams.length){var t=Object.keys(this.spams[0]),e="data:text/csv;charset=utf-8,",s="".concat(t.join(","),"\n"),n=this.spams.map(function(t){return Object.values(t).map(function(t){return t.toString().replace(/,/g,";")}).join(",")}).join("\n"),a=document.createElement("a");a.setAttribute("href",e+encodeURIComponent(s+n)),a.setAttribute("download","spams.csv"),document.body.appendChild(a),a.click()}else this.$dialog.show("There is nothing to export.")},openSettingModal:function(){var t=this;this.showGlobalLoading(),this.$store.dispatch(oe).then(function(e){t.hideGlobalLoading(),t.settingModal.settings=e,t.settingModal.open=!0}).catch(function(){t.hideGlobalLoading(),t.$dislog.show("Failed to get spam settings.")})},updateSpamSettings:function(){var t=this;this.showGlobalLoading(!0),this.$store.dispatch(re,this.settingModal.settings).then(function(){t.hideGlobalLoading(),t.$dialog.show("Update settings successfully.")}).catch(function(e){t.hideGlobalLoading(),t.$dialog.show(e,5e3)})},closeSettingModal:function(){this.settingModal.open=!1}}}),Nn=Sn,Dn=Object(m["a"])(Nn,xn,Pn,!1,null,null,null);Dn.options.__file="Spam.vue";var En=Dn.exports,Rn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Verb: ")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.model.verb,expression:"model.verb"}],staticClass:"input",class:{"is-danger":t.verbError},attrs:{type:"text",placeholder:"Verb to use"},domProps:{value:t.model.verb},on:{input:function(e){e.target.composing||t.$set(t.model,"verb",e.target.value)}}}),s("p",{staticClass:"help is-danger"},[t._v(t._s(t.verbError))])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Content: ")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.content,expression:"model.content"}],staticClass:"textarea",class:{"is-danger":t.contentError},attrs:{placeholder:"Message to broadcast"},domProps:{value:t.model.content},on:{input:function(e){e.target.composing||t.$set(t.model,"content",e.target.value)}}}),s("p",{staticClass:"help is-danger"},[t._v(t._s(t.contentError))])])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary",on:{click:t.broadcast}},[t._v("Broadcast")])])])])},An=[],In={data:function(){return{model:{verb:"",content:""},errors:{}}},computed:{verbError:function(){return this.errors.verb},contentError:function(){return this.errors.content}},methods:{resetModel:function(){this.model.verb="",this.model.content="",this.errors={}},broadcast:function(){var t=this;this.$store.dispatch(te,this.model).then(function(){t.$dialog.show("Send broadcast successfully."),t.resetModel()}).catch(function(e){"string"===typeof e?t.$dialog.show(e,3e3):t.errors=e})}}},Un=In,Tn=Object(m["a"])(Un,Rn,An,!1,null,null,null);Tn.options.__file="Broadcast.vue";var jn=Tn.exports;n["a"].use(Xe["a"]);var Ln=new Xe["a"]({mode:"history",base:O.base,routes:[{path:"/",name:"home",component:As},{path:"/channels/:channel/rooms",name:"room",component:Ys},{path:"/channels/:channel/rooms/:room",name:"userInRoom",component:Xs},{path:"/users",name:"user",component:an},{path:"/bans",name:"ban",component:hn},{path:"/blacklist",name:"blacklist",component:Cn},{path:"/history",name:"history",component:Mn},{path:"/spam",name:"spam",component:En},{path:"/broadcast",name:"broadcast",component:jn},{path:"*",redirect:{name:"home"}}]}),Bn=Ln,Fn=s("c665"),Gn=s("aa9a"),Hn=function(){function t(){Object(Fn["a"])(this,t),this.container=null}return Object(Gn["a"])(t,[{key:"getOrCreateContainer",value:function(){if(this.container)return this.container;var t=document.createElement("div");return t.classList.add("dialog-container"),document.body.appendChild(t),this.container=t,t}},{key:"appendDialog",value:function(t){var e=document.createElement("div");return e.classList.add("dialog"),e.innerHTML=t,this.getOrCreateContainer().appendChild(e),e}},{key:"removeDialog",value:function(t){this.container.removeChild(t)}},{key:"show",value:function(t,e){var s=this,n=this.appendDialog(t);ws()({targets:n,opacity:[0,1],top:[35,0],duration:500}),setTimeout(function(){ws()({targets:n,opacity:[1,0],"margin-top":[0,-35],duration:200,easing:"linear",complete:function(){s.removeDialog(n)}})},e||3e3)}}]),t}(),zn={install:function(t){Object.defineProperty(t.prototype,"$dialog",{value:new Hn})}};s("7e7d");n["a"].config.productionTip=!1,n["a"].use(zn),new n["a"]({el:"#app",router:Bn,store:Qe,render:function(t){return t(ge)}}).$mount()},"58e3":function(t,e,s){},"7e7d":function(t,e,s){}});